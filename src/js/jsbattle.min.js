/*! For license information please see jsbattle.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={2228:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},278:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},8056:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r(2946).default;r(6287);var l=r(501),f=r(3501),h=r(278),p=["/properties"],d="http://json-schema.org/draft-07/schema",y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(m,e);var t,r,n,l,y=(n=m,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(n);if(l){var r=c(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return s(this,e)});function m(){return o(this,m),y.apply(this,arguments)}return t=m,(r=[{key:"_addVocabularies",value:function(){var e=this;a(c(m.prototype),"_addVocabularies",this).call(this),f.default.forEach((function(t){return e.addVocabulary(t)}))}},{key:"_addDefaultMetaSchema",value:function(){a(c(m.prototype),"_addDefaultMetaSchema",this).call(this);var e=this.opts,t=e.$data;if(e.meta){var r=t?this.$dataMetaSchema(h,p):h;this.addMetaSchema(r,d,!1),this.refs["http://json-schema.org/schema"]=d}}},{key:"defaultMeta",value:function(){return this.opts.defaultMeta=a(c(m.prototype),"defaultMeta",this).call(this)||(this.getSchema(d)?d:void 0)}}])&&i(t.prototype,r),m}(l.default);t.ZP=y},2279:(e,t)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(){var e=i(["[","]"]);return n=function(){return e},e}function o(){var e=i(["","",""]);return o=function(){return e},e}function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;var y=function e(){d(this,e)};t._CodeOrName=y,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var m=function(e){c(n,e);var r=f(n);function n(e){var o;if(d(this,n),o=r.call(this),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");return o.str=e,o}return s(n,[{key:"toString",value:function(){return this.str}},{key:"emptyStr",value:function(){return!1}},{key:"names",get:function(){return e={},1,(t=this.str)in e?Object.defineProperty(e,t,{value:1,enumerable:!0,configurable:!0,writable:!0}):e[t]=1,e;var e,t}}]),n}(y);t.Name=m;var v=function(e){c(r,e);var t=f(r);function r(e){var n;return d(this,r),(n=t.call(this))._items="string"==typeof e?[e]:e,n}return s(r,[{key:"toString",value:function(){return this.str}},{key:"emptyStr",value:function(){if(this._items.length>1)return!1;var e=this._items[0];return""===e||'""'===e}},{key:"str",get:function(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((function(e,t){return"".concat(e).concat(t)}),"")}},{key:"names",get:function(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((function(e,t){return t instanceof m&&(e[t.str]=(e[t.str]||0)+1),e}),{})}}]),r}(y);function _(e){for(var t=[e[0]],r=0,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];for(;r<o.length;)w(t,o[r]),t.push(e[++r]);return new v(t)}t._Code=v,t.nil=new v(""),t._=_;var b=new v("+");function g(e){for(var t=[O(e[0])],r=0,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];for(;r<o.length;)t.push(b),w(t,o[r]),t.push(b,O(e[++r]));return k(t),new v(t)}function w(e,t){var r,n;t instanceof v?e.push.apply(e,function(e){if(Array.isArray(e))return a(e)}(n=t._items)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):t instanceof m?e.push(t):e.push("number"==typeof(r=t)||"boolean"==typeof r||null===r?r:O(Array.isArray(r)?r.join(","):r))}function k(e){for(var t=1;t<e.length-1;){if(e[t]===b){var r=S(e[t-1],e[t+1]);if(void 0!==r){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}function S(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof m||'"'!==e[e.length-1])return;return"string"!=typeof t?"".concat(e.slice(0,-1)).concat(t,'"'):'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof m?void 0:'"'.concat(e).concat(t.slice(1))}function O(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=g,t.addCodeArg=w,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:g(o(),e,t)},t.stringify=function(e){return new v(O(e))},t.safeStringify=O,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new v(".".concat(e)):_(n(),e)}},6287:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){var e=l(["(",")"]);return o=function(){return e},e}function i(){var e=l([""," "," ",""]);return i=function(){return e},e}function a(){var e=l(["!",""]);return a=function(){return e},e}function u(){var e=l(["Object.keys(",")"]);return u=function(){return e},e}function s(){var e=l(["","[","]"]);return s=function(){return e},e}function c(){var e=l(["",".length"]);return c=function(){return e},e}function l(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t,r){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function p(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var o=S(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return k(this,r)}}function k(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t,r){return t&&P(e.prototype,t),r&&P(e,r),e}Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;var x=r(2279),E=r(1285),C=r(2279);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return C._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return C.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return C.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return C.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return C.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return C.stringify}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return C.Name}});var T=r(1285);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return T.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return T.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return T.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return T.varKinds}}),t.operators={GT:new x._Code(">"),GTE:new x._Code(">="),LT:new x._Code("<"),LTE:new x._Code("<="),EQ:new x._Code("==="),NEQ:new x._Code("!=="),NOT:new x._Code("!"),OR:new x._Code("||"),AND:new x._Code("&&")};var R=function(){function e(){O(this,e)}return j(e,[{key:"optimizeNodes",value:function(){return this}},{key:"optimizeNames",value:function(e,t){return this}}]),e}(),A=function(e){b(r,e);var t=w(r);function r(e,n,o){var i;return O(this,r),(i=t.call(this)).varKind=e,i.name=n,i.rhs=o,i}return j(r,[{key:"render",value:function(e){var t=e.es5,r=e._n,n=t?E.varKinds.var:this.varKind,o=void 0===this.rhs?"":" = ".concat(this.rhs);return"".concat(n," ").concat(this.name).concat(o,";")+r}},{key:"optimizeNames",value:function(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=te(this.rhs,e,t)),this}},{key:"names",get:function(){return this.rhs instanceof x._CodeOrName?this.rhs.names:{}}}]),r}(R),D=function(e){b(r,e);var t=w(r);function r(e,n,o){var i;return O(this,r),(i=t.call(this)).lhs=e,i.rhs=n,i.sideEffects=o,i}return j(r,[{key:"render",value:function(e){var t=e._n;return"".concat(this.lhs," = ").concat(this.rhs,";")+t}},{key:"optimizeNames",value:function(e,t){if(!(this.lhs instanceof x.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=te(this.rhs,e,t),this}},{key:"names",get:function(){return ee(this.lhs instanceof x.Name?{}:v({},this.lhs.names),this.rhs)}}]),r}(R),M=function(e){b(r,e);var t=w(r);function r(e){var n;return O(this,r),(n=t.call(this)).label=e,n.names={},n}return j(r,[{key:"render",value:function(e){var t=e._n;return"".concat(this.label,":")+t}}]),r}(R),N=function(e){b(r,e);var t=w(r);function r(e){var n;return O(this,r),(n=t.call(this)).label=e,n.names={},n}return j(r,[{key:"render",value:function(e){var t=e._n,r=this.label?" ".concat(this.label):"";return"break".concat(r,";")+t}}]),r}(R),I=function(e){b(r,e);var t=w(r);function r(e){var n;return O(this,r),(n=t.call(this)).error=e,n}return j(r,[{key:"render",value:function(e){var t=e._n;return"throw ".concat(this.error,";")+t}},{key:"names",get:function(){return this.error.names}}]),r}(R),L=function(e){b(r,e);var t=w(r);function r(e){var n;return O(this,r),(n=t.call(this)).code=e,n}return j(r,[{key:"render",value:function(e){var t=e._n;return"".concat(this.code,";")+t}},{key:"optimizeNodes",value:function(){return"".concat(this.code)?this:void 0}},{key:"optimizeNames",value:function(e,t){return this.code=te(this.code,e,t),this}},{key:"names",get:function(){return this.code instanceof x._CodeOrName?this.code.names:{}}}]),r}(R),$=function(e){b(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return O(this,r),(e=t.call(this)).nodes=n,e}return j(r,[{key:"render",value:function(e){return this.nodes.reduce((function(t,r){return t+r.render(e)}),"")}},{key:"optimizeNodes",value:function(){for(var e=this.nodes,t=e.length;t--;){var r=e[t].optimizeNodes();Array.isArray(r)?e.splice.apply(e,[t,1].concat(p(r))):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}},{key:"optimizeNames",value:function(e,t){for(var r=this.nodes,n=r.length;n--;){var o=r[n];o.optimizeNames(e,t)||(re(e,o.names),r.splice(n,1))}return r.length>0?this:void 0}},{key:"names",get:function(){return this.nodes.reduce((function(e,t){return Z(e,t.names)}),{})}}]),r}(R),V=function(e){b(r,e);var t=w(r);function r(){return O(this,r),t.apply(this,arguments)}return j(r,[{key:"render",value:function(e){return"{"+e._n+h(S(r.prototype),"render",this).call(this,e)+"}"+e._n}}]),r}($),z=function(e){b(r,e);var t=w(r);function r(){return O(this,r),t.apply(this,arguments)}return r}($),B=function(e){b(r,e);var t=w(r);function r(){return O(this,r),t.apply(this,arguments)}return r}(V);B.kind="else";var U=function(e){b(r,e);var t=w(r);function r(e,n){var o;return O(this,r),(o=t.call(this,n)).condition=e,o}return j(r,[{key:"render",value:function(e){var t="if(".concat(this.condition,")")+h(S(r.prototype),"render",this).call(this,e);return this.else&&(t+="else "+this.else.render(e)),t}},{key:"optimizeNodes",value:function(){h(S(r.prototype),"optimizeNodes",this).call(this);var e=this.condition;if(!0===e)return this.nodes;var t=this.else;if(t){var n=t.optimizeNodes();t=this.else=Array.isArray(n)?new B(n):n}return t?!1===e?t instanceof r?t:t.nodes:this.nodes.length?this:new r(ne(e),t instanceof r?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}},{key:"optimizeNames",value:function(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),h(S(r.prototype),"optimizeNames",this).call(this,e,t)||this.else)return this.condition=te(this.condition,e,t),this}},{key:"names",get:function(){var e=h(S(r.prototype),"names",this);return ee(e,this.condition),this.else&&Z(e,this.else.names),e}}]),r}(V);U.kind="if";var F=function(e){b(r,e);var t=w(r);function r(){return O(this,r),t.apply(this,arguments)}return r}(V);F.kind="for";var q=function(e){b(r,e);var t=w(r);function r(e){var n;return O(this,r),(n=t.call(this)).iteration=e,n}return j(r,[{key:"render",value:function(e){return"for(".concat(this.iteration,")")+h(S(r.prototype),"render",this).call(this,e)}},{key:"optimizeNames",value:function(e,t){if(h(S(r.prototype),"optimizeNames",this).call(this,e,t))return this.iteration=te(this.iteration,e,t),this}},{key:"names",get:function(){return Z(h(S(r.prototype),"names",this),this.iteration.names)}}]),r}(F),H=function(e){b(r,e);var t=w(r);function r(e,n,o,i){var a;return O(this,r),(a=t.call(this)).varKind=e,a.name=n,a.from=o,a.to=i,a}return j(r,[{key:"render",value:function(e){var t=e.es5?E.varKinds.var:this.varKind,n=this.name,o=this.from,i=this.to;return"for(".concat(t," ").concat(n,"=").concat(o,"; ").concat(n,"<").concat(i,"; ").concat(n,"++)")+h(S(r.prototype),"render",this).call(this,e)}},{key:"names",get:function(){var e=ee(h(S(r.prototype),"names",this),this.from);return ee(e,this.to)}}]),r}(F),G=function(e){b(r,e);var t=w(r);function r(e,n,o,i){var a;return O(this,r),(a=t.call(this)).loop=e,a.varKind=n,a.name=o,a.iterable=i,a}return j(r,[{key:"render",value:function(e){return"for(".concat(this.varKind," ").concat(this.name," ").concat(this.loop," ").concat(this.iterable,")")+h(S(r.prototype),"render",this).call(this,e)}},{key:"optimizeNames",value:function(e,t){if(h(S(r.prototype),"optimizeNames",this).call(this,e,t))return this.iterable=te(this.iterable,e,t),this}},{key:"names",get:function(){return Z(h(S(r.prototype),"names",this),this.iterable.names)}}]),r}(F),K=function(e){b(r,e);var t=w(r);function r(e,n,o){var i;return O(this,r),(i=t.call(this)).name=e,i.args=n,i.async=o,i}return j(r,[{key:"render",value:function(e){var t=this.async?"async ":"";return"".concat(t,"function ").concat(this.name,"(").concat(this.args,")")+h(S(r.prototype),"render",this).call(this,e)}}]),r}(V);K.kind="func";var X=function(e){b(r,e);var t=w(r);function r(){return O(this,r),t.apply(this,arguments)}return j(r,[{key:"render",value:function(e){return"return "+h(S(r.prototype),"render",this).call(this,e)}}]),r}($);X.kind="return";var W=function(e){b(r,e);var t=w(r);function r(){return O(this,r),t.apply(this,arguments)}return j(r,[{key:"render",value:function(e){var t="try"+h(S(r.prototype),"render",this).call(this,e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}},{key:"optimizeNodes",value:function(){var e,t;return h(S(r.prototype),"optimizeNodes",this).call(this),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}},{key:"optimizeNames",value:function(e,t){var n,o;return h(S(r.prototype),"optimizeNames",this).call(this,e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(o=this.finally)||void 0===o||o.optimizeNames(e,t),this}},{key:"names",get:function(){var e=h(S(r.prototype),"names",this);return this.catch&&Z(e,this.catch.names),this.finally&&Z(e,this.finally.names),e}}]),r}(V),Y=function(e){b(r,e);var t=w(r);function r(e){var n;return O(this,r),(n=t.call(this)).error=e,n}return j(r,[{key:"render",value:function(e){return"catch(".concat(this.error,")")+h(S(r.prototype),"render",this).call(this,e)}}]),r}(V);Y.kind="catch";var J=function(e){b(r,e);var t=w(r);function r(){return O(this,r),t.apply(this,arguments)}return j(r,[{key:"render",value:function(e){return"finally"+h(S(r.prototype),"render",this).call(this,e)}}]),r}(V);J.kind="finally";var Q=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};O(this,e),this._values={},this._blockStarts=[],this._constants={},this.opts=v(v({},r),{},{_n:r.lines?"\n":""}),this._extScope=t,this._scope=new E.Scope({parent:t}),this._nodes=[new z]}return j(e,[{key:"toString",value:function(){return this._root.render(this.opts)}},{key:"name",value:function(e){return this._scope.name(e)}},{key:"scopeName",value:function(e){return this._extScope.name(e)}},{key:"scopeValue",value:function(e,t){var r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}},{key:"getScopeValue",value:function(e,t){return this._extScope.getValue(e,t)}},{key:"scopeRefs",value:function(e){return this._extScope.scopeRefs(e,this._values)}},{key:"scopeCode",value:function(){return this._extScope.scopeCode(this._values)}},{key:"_def",value:function(e,t,r,n){var o=this._scope.toName(t);return void 0!==r&&n&&(this._constants[o.str]=r),this._leafNode(new A(e,o,r)),o}},{key:"const",value:function(e,t,r){return this._def(E.varKinds.const,e,t,r)}},{key:"let",value:function(e,t,r){return this._def(E.varKinds.let,e,t,r)}},{key:"var",value:function(e,t,r){return this._def(E.varKinds.var,e,t,r)}},{key:"assign",value:function(e,t,r){return this._leafNode(new D(e,t,r))}},{key:"code",value:function(e){return"function"==typeof e?e():e!==x.nil&&this._leafNode(new L(e)),this}},{key:"object",value:function(){for(var e=["{"],t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var o=0,i=r;o<i.length;o++){var a=f(i[o],2),u=a[0],s=a[1];e.length>1&&e.push(","),e.push(u),(u!==s||this.opts.es5)&&(e.push(":"),x.addCodeArg(e,s))}return e.push("}"),new x._Code(e)}},{key:"if",value:function(e,t,r){if(this._blockNode(new U(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}},{key:"elseIf",value:function(e){return this._elseNode(new U(e))}},{key:"else",value:function(){return this._elseNode(new B)}},{key:"endIf",value:function(){return this._endBlockNode(U,B)}},{key:"_for",value:function(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}},{key:"for",value:function(e,t){return this._for(new q(e),t)}},{key:"forRange",value:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.opts.es5?E.varKinds.var:E.varKinds.let,i=this._scope.toName(e);return this._for(new H(o,i,t,r),(function(){return n(i)}))}},{key:"forOf",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:E.varKinds.const,i=this._scope.toName(e);if(this.opts.es5){var a=t instanceof x.Name?t:this.var("_arr",t);return this.forRange("_i",0,x._(c(),a),(function(e){n.var(i,x._(s(),a,e)),r(i)}))}return this._for(new G("of",o,i,t),(function(){return r(i)}))}},{key:"forIn",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.es5?E.varKinds.var:E.varKinds.const;if(this.opts.ownProperties)return this.forOf(e,x._(u(),t),r);var o=this._scope.toName(e);return this._for(new G("in",n,o,t),(function(){return r(o)}))}},{key:"endFor",value:function(){return this._endBlockNode(F)}},{key:"label",value:function(e){return this._leafNode(new M(e))}},{key:"break",value:function(e){return this._leafNode(new N(e))}},{key:"return",value:function(e){var t=new X;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(X)}},{key:"try",value:function(e,t,r){if(!t&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');var n=new W;if(this._blockNode(n),this.code(e),t){var o=this.name("e");this._currNode=n.catch=new Y(o),t(o)}return r&&(this._currNode=n.finally=new J,this.code(r)),this._endBlockNode(Y,J)}},{key:"throw",value:function(e){return this._leafNode(new I(e))}},{key:"block",value:function(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}},{key:"endBlock",value:function(e){var t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");var r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw new Error("CodeGen: wrong number of nodes: ".concat(r," vs ").concat(e," expected"));return this._nodes.length=t,this}},{key:"func",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.nil,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return this._blockNode(new K(e,t,r)),n&&this.code(n).endFunc(),this}},{key:"endFunc",value:function(){return this._endBlockNode(K)}},{key:"optimize",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}},{key:"_leafNode",value:function(e){return this._currNode.nodes.push(e),this}},{key:"_blockNode",value:function(e){this._currNode.nodes.push(e),this._nodes.push(e)}},{key:"_endBlockNode",value:function(e,t){var r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw new Error('CodeGen: not in block "'.concat(t?"".concat(e.kind,"/").concat(t.kind):e.kind,'"'))}},{key:"_elseNode",value:function(e){var t=this._currNode;if(!(t instanceof U))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}},{key:"_root",get:function(){return this._nodes[0]}},{key:"_currNode",get:function(){var e=this._nodes;return e[e.length-1]},set:function(e){var t=this._nodes;t[t.length-1]=e}}]),e}();function Z(e,t){for(var r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function ee(e,t){return t instanceof x._CodeOrName?Z(e,t.names):e}function te(e,t,r){return e instanceof x.Name?o(e):(n=e)instanceof x._Code&&n._items.some((function(e){return e instanceof x.Name&&1===t[e.str]&&void 0!==r[e.str]}))?new x._Code(e._items.reduce((function(e,t){return t instanceof x.Name&&(t=o(t)),t instanceof x._Code?e.push.apply(e,p(t._items)):e.push(t),e}),[])):e;var n;function o(e){var n=r[e.str];return void 0===n||1!==t[e.str]?e:(delete t[e.str],n)}}function re(e,t){for(var r in t)e[r]=(e[r]||0)-(t[r]||0)}function ne(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:x._(a(),ue(e))}t.CodeGen=Q,t.not=ne;var oe=ae(t.operators.AND);t.and=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(oe)};var ie=ae(t.operators.OR);function ae(e){return function(t,r){return t===x.nil?r:r===x.nil?t:x._(i(),ue(t),e,ue(r))}}function ue(e){return e instanceof x.Name?e:x._(o(),e)}t.or=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(ie)}},1285:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){var e=h(["","","",""]);return o=function(){return e},e}function i(){var e=h(["",""," "," = ",";",""]);return i=function(){return e},e}function a(){var e=h(["","",""]);return a=function(){return e},e}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(){var e=h(["\n"],["\\n"]);return l=function(){return e},e}function f(){var e=h([".","[","]"]);return f=function(){return e},e}function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function v(e){var t=w();return function(){var r,n=S(e);if(t){var o=S(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){var t="function"==typeof Map?new Map:void 0;return(b=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return g(e,arguments,S(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),k(n,e)})(e)}function g(e,t,r){return(g=w()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&k(o,r.prototype),o}).apply(null,arguments)}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=void 0;var O=r(2279),P=function(e){m(r,e);var t=v(r);function r(e){var n;return y(this,r),(n=t.call(this,'CodeGen: "code" for '.concat(e," not defined"))).value=e.value,n}return r}(b(Error));t.varKinds={const:new O.Name("const"),let:new O.Name("let"),var:new O.Name("var")};var j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.prefixes,n=t.parent;y(this,e),this._names={},this._prefixes=r,this._parent=n}return d(e,[{key:"toName",value:function(e){return e instanceof O.Name?e:this.name(e)}},{key:"name",value:function(e){return new O.Name(this._newName(e))}},{key:"_newName",value:function(e){var t=this._names[e]||this._nameGroup(e);return"".concat(e).concat(t.index++)}},{key:"_nameGroup",value:function(e){var t,r;if((null===(r=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===r?void 0:r.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error('CodeGen: prefix "'.concat(e,'" is not allowed in this scope'));return this._names[e]={prefix:e,index:0}}}]),e}();t.Scope=j;var x=function(e){m(r,e);var t=v(r);function r(e,n){var o;return y(this,r),(o=t.call(this,n)).prefix=e,o}return d(r,[{key:"setValue",value:function(e,t){var r=t.property,n=t.itemIndex;this.value=e,this.scopePath=O._(f(),new O.Name(r),n)}}]),r}(O.Name);t.ValueScopeName=x;var E=O._(l()),C=function(e){m(n,e);var r=v(n);function n(e){var t;return y(this,n),(t=r.call(this,e))._values={},t._scope=e.scope,t.opts=s(s({},e),{},{_n:e.lines?E:O.nil}),t}return d(n,[{key:"get",value:function(){return this._scope}},{key:"name",value:function(e){return new x(e,this._newName(e))}},{key:"value",value:function(e,t){var r;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");var n=this.toName(e),o=n.prefix,i=null!==(r=t.key)&&void 0!==r?r:t.ref,a=this._values[o];if(a){var u=a.get(i);if(u)return u}else a=this._values[o]=new Map;a.set(i,n);var s=this._scope[o]||(this._scope[o]=[]),c=s.length;return s[c]=t.ref,n.setValue(t,{property:o,itemIndex:c}),n}},{key:"getValue",value:function(e,t){var r=this._values[e];if(r)return r.get(t)}},{key:"scopeRefs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._values;return this._reduceValues(t,(function(t){if(void 0===t.scopePath)throw new Error('CodeGen: name "'.concat(t,'" has no value'));return O._(a(),e,t.scopePath)}))}},{key:"scopeCode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._values,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return this._reduceValues(e,(function(e){if(void 0===e.value)throw new Error('CodeGen: name "'.concat(e,'" has no value'));return e.value.code}),t,r)}},{key:"_reduceValues",value:function(e,r){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0,s=O.nil,c=function(c){var l=e[c];if(!l)return"continue";var f=a[c]=a[c]||new Set;l.forEach((function(e){if(!f.has(e)){f.add(e);var a=r(e);if(a){var c=n.opts.es5?t.varKinds.var:t.varKinds.const;s=O._(i(),s,c,e,a,n.opts._n)}else{if(!(a=null==u?void 0:u(e)))throw new P(e);s=O._(o(),s,a,n.opts._n)}}}))};for(var l in e)c(l);return s}}]),n}(j);t.ValueScope=C},2946:(e,t,r)=>{"use strict";function n(){var e=f([""," && ",""]);return n=function(){return e},e}function o(){var e=f(["","",""]);return o=function(){return e},e}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){var e=f(["!","(",")"]);return u=function(){return e},e}function s(){var e=f(["",""]);return s=function(){return e},e}function c(){var e=f([""," === undefined"]);return c=function(){return e},e}function l(){var e=f([""," !== undefined && (",")"]);return l=function(){return e},e}function f(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.getData=void 0;var p=r(4771),d=r(2523),y=r(388),m=r(6287),v=r(1418),_=r(257),b=function(){function e(t,r,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,r){var n=e.schema,o=e.opts,i=e.self;if(Array.isArray(t.keyword)?!t.keyword.includes(r):t.keyword!==r)throw new Error("ajv implementation error");var a=t.dependencies;if(null==a?void 0:a.some((function(e){return!Object.prototype.hasOwnProperty.call(n,e)})))throw new Error("parent schema must have dependencies of ".concat(r,": ").concat(a.join(",")));if(t.validateSchema&&!t.validateSchema(n[r])){var u="keyword value is invalid: "+i.errorsText(t.validateSchema.errors);if("log"!==o.validateSchema)throw new Error(u);i.logger.error(u)}}(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=d.schemaRefOrVal(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",k(this.$data,t));else if(this.schemaCode=this.schemaValue,!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!t.length||t.some((function(t){return"array"===t?Array.isArray(e):"object"===t?e&&"object"==a(e)&&!Array.isArray(e):a(e)==t||r&&void 0===e}))}(this.schema,r.schemaType,r.allowUndefined))throw new Error("".concat(n," value must be ").concat(JSON.stringify(r.schemaType)));("code"in r?r.trackErrors:!1!==r.errors)&&(this.errsCount=t.gen.const("_errs",v.default.errors))}var t,r;return t=e,(r=[{key:"result",value:function(e,t,r){this.gen.if(m.not(e)),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}},{key:"pass",value:function(e,t){this.result(e,void 0,t)}},{key:"fail",value:function(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}},{key:"fail$data",value:function(e){if(!this.$data)return this.fail(e);var t=this.schemaCode;this.fail(m._(l(),t,m.or(this.invalid$data(),e)))}},{key:"error",value:function(e){(e?y.reportExtraError:y.reportError)(this,this.def.error||y.keywordError)}},{key:"$dataError",value:function(){y.reportError(this,this.def.$dataError||y.keyword$DataError)}},{key:"reset",value:function(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');y.resetErrorsCount(this.gen,this.errsCount)}},{key:"ok",value:function(e){this.allErrors||this.gen.if(e)}},{key:"setParams",value:function(e,t){t?Object.assign(this.params,e):this.params=e}},{key:"block$data",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.nil;this.gen.block((function(){r.check$data(e,n),t()}))}},{key:"check$data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.nil,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.nil;if(this.$data){var r=this.gen,n=this.schemaCode,o=this.schemaType,i=this.def;r.if(m.or(m._(c(),n),t)),e!==m.nil&&r.assign(e,!0),(o.length||i.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==m.nil&&r.assign(e,!1)),r.else()}}},{key:"invalid$data",value:function(){var e=this.gen,t=this.schemaCode,r=this.schemaType,n=this.def,o=this.it;return m.or(function(){if(r.length){if(!(t instanceof m.Name))throw new Error("ajv implementation error");var e=Array.isArray(r)?r:[r];return m._(s(),p.checkDataTypes(e,t,o.opts.strict,p.DataType.Wrong))}return m.nil}(),function(){if(n.validateSchema){var r=e.scopeValue("validate$data",{ref:n.validateSchema});return m._(u(),r,t)}return m.nil}())}},{key:"subschema",value:function(e,t){return _.applySubschema(this.it,e,t)}},{key:"mergeEvaluated",value:function(e,t){var r=this.it,n=this.gen;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=d.mergeEvaluated.props(n,e.props,r.props,t)),!0!==r.items&&void 0!==e.items&&(r.items=d.mergeEvaluated.items(n,e.items,r.items,t)))}},{key:"mergeValidEvaluated",value:function(e,t){var r=this,n=this.it,o=this.gen;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return o.if(t,(function(){return r.mergeEvaluated(e,m.Name)})),!0}}])&&h(t.prototype,r),e}();t.default=b;var g=/^\/(?:[^~]|~0|~1)*$/,w=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function k(e,t){var r,a,u=t.dataLevel,s=t.dataNames,c=t.dataPathArr;if(""===e)return v.default.rootData;if("/"===e[0]){if(!g.test(e))throw new Error("Invalid JSON-pointer: ".concat(e));r=e,a=v.default.rootData}else{var l=w.exec(e);if(!l)throw new Error("Invalid JSON-pointer: ".concat(e));var f=+l[1];if("#"===(r=l[2])){if(f>=u)throw new Error(b("property/index",f));return c[u-f]}if(f>u)throw new Error(b("data",f));if(a=s[u-f],!r)return a}var h,p=a,y=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw a}}}}(r.split("/"));try{for(y.s();!(h=y.n()).done;){var _=h.value;_&&(a=m._(o(),a,m.getProperty(d.unescapeJsonPointer(_))),p=m._(n(),p,a))}}catch(e){y.e(e)}finally{y.f()}return p;function b(e,t){return"Cannot access ".concat(e," ").concat(t," levels up, current level is ").concat(u)}}t.getData=k},328:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function a(e){var t=l();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return c(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,e)})(e)}function c(e,t,r){return(c=l()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&f(o,r.prototype),o}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=void 0;var p=r(5381),d=function(e){i(r,e);var t=a(r);function r(e){var n;return o(this,r),(n=t.call(this,"validation failed")).errors=e,n.ajv=n.validation=!0,n}return r}(s(Error));t.ValidationError=d;var y=function(e){i(r,e);var t=a(r);function r(e,n){var i;return o(this,r),(i=t.call(this,"can't resolve reference ".concat(n," from id ").concat(e))).missingRef=p.resolveUrl(e,n),i.missingSchema=p.normalizeId(p.getFullPath(i.missingRef)),i}return r}(s(Error));t.MissingRefError=y,e.exports={ValidationError:d,MissingRefError:y}},388:(e,t,r)=>{"use strict";function n(){var e=j(["","",""]);return n=function(){return e},e}function o(){var e=j(["{}"]);return o=function(){return e},e}function i(){var e=j(["","/",""]);return i=function(){return e},e}function a(){var e=j(["{}"]);return a=function(){return e},e}function u(){var e=j(["",".errors"]);return u=function(){return e},e}function s(){var e=j(["new ","(",")"]);return s=function(){return e},e}function c(){var e=j(["","++"]);return c=function(){return e},e}function l(){var e=j(["",".push(",")"]);return l=function(){return e},e}function f(){var e=j(["[","]"]);return f=function(){return e},e}function h(){var e=j([""," === null"]);return h=function(){return e},e}function p(){var e=j(["",".data"]);return p=function(){return e},e}function d(){var e=j(["",".schema"]);return d=function(){return e},e}function y(){var e=j(["","/",""]);return y=function(){return e},e}function m(){var e=j(["",".schemaPath"]);return m=function(){return e},e}function v(){var e=j(["",".dataPath"]);return v=function(){return e},e}function _(){var e=j(["",".dataPath === undefined"]);return _=function(){return e},e}function b(){var e=j(["","[","]"]);return b=function(){return e},e}function g(){var e=j(["",".length"]);return g=function(){return e},e}function w(){var e=j([""," !== null"]);return w=function(){return e},e}function k(){var e=j(["[","]"]);return k=function(){return e},e}function S(){var e=j(['"','" keyword is invalid ($data)']);return S=function(){return e},e}function O(){var e=j(['"','" keyword must be '," ($data)"]);return O=function(){return e},e}function P(){var e=j(['should pass "','" keyword validation']);return P=function(){return e},e}function j(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;var x=r(6287),E=r(1418);function C(e,t){var r=e.const("err",t);e.if(x._(h(),E.default.vErrors),(function(){return e.assign(E.default.vErrors,x._(f(),r))}),x._(l(),E.default.vErrors,r)),e.code(x._(c(),E.default.errors))}function T(e,t){var r=e.gen,n=e.validateName;e.schemaEnv.$async?r.throw(x._(s(),e.ValidationError,t)):(r.assign(x._(u(),n),t),r.return(!1))}t.keywordError={message:function(e){var t=e.keyword;return x.str(P(),t)}},t.keyword$DataError={message:function(e){var t=e.keyword,r=e.schemaType;return r?x.str(O(),t,r):x.str(S(),t)}},t.reportError=function(e,t,r){var n=e.it,o=n.gen,i=n.compositeRule,a=n.allErrors,u=A(e,t);(null!=r?r:i||a)?C(o,u):T(n,x._(k(),u))},t.reportExtraError=function(e,t){var r=e.it,n=r.gen,o=r.compositeRule,i=r.allErrors;C(n,A(e,t)),o||i||T(r,E.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(E.default.errors,t),e.if(x._(w(),E.default.vErrors),(function(){return e.if(t,(function(){return e.assign(x._(g(),E.default.vErrors),t)}),(function(){return e.assign(E.default.vErrors,null)}))}))},t.extendErrors=function(e){var t=e.gen,r=e.keyword,n=e.schemaValue,o=e.data,i=e.errsCount,a=e.it;if(void 0===i)throw new Error("ajv implementation error");var u=t.name("err");t.forRange("i",i,E.default.errors,(function(e){t.const(u,x._(b(),E.default.vErrors,e)),t.if(x._(_(),u),(function(){return t.assign(x._(v(),u),x.strConcat(E.default.dataPath,a.errorPath))})),t.assign(x._(m(),u),x.str(y(),a.errSchemaPath,r)),a.opts.verbose&&(t.assign(x._(d(),u),n),t.assign(x._(p(),u),o))}))};var R={keyword:new x.Name("keyword"),schemaPath:new x.Name("schemaPath"),params:new x.Name("params"),propertyName:new x.Name("propertyName"),message:new x.Name("message"),schema:new x.Name("schema"),parentSchema:new x.Name("parentSchema")};function A(e,t){var r=e.keyword,u=e.data,s=e.schemaValue,c=e.it,l=c.gen,f=c.createErrors,h=c.topSchemaRef,p=c.schemaPath,d=c.errorPath,y=c.errSchemaPath,m=c.propertyName,v=c.opts;if(!1===f)return x._(a());var _=t.params,b=t.message,g=[[R.keyword,r],[E.default.dataPath,x.strConcat(E.default.dataPath,d)],[R.schemaPath,x.str(i(),y,r)],[R.params,"function"==typeof _?_(e):_||x._(o())]];if(m&&g.push([R.propertyName,m]),!1!==v.messages){var w="function"==typeof b?b(e):b;g.push([R.message,w])}return v.verbose&&g.push([R.schema,s],[R.parentSchema,x._(n(),h,p)],[E.default.data,u]),l.object.apply(l,g)}},6678:(e,t,r)=>{"use strict";function n(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(){var e=u(['""']);return i=function(){return e},e}function a(){var e=u(['require("ajv/dist/compile/error_classes").ValidationError']);return a=function(){return e},e}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;var c=r(6287),l=r(328),f=r(1418),h=r(5381),p=r(2523),d=r(8612),y=r(574),m=function e(t){var r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refs={},this.dynamicAnchors={},"object"==s(t.schema)&&(n=t.schema),this.schema=t.schema,this.root=t.root||this,this.baseId=null!==(r=t.baseId)&&void 0!==r?r:h.normalizeId(null==n?void 0:n.$id),this.localRefs=t.localRefs,this.meta=t.meta,this.$async=null==n?void 0:n.$async,this.refs={}};function v(e){var t=b.call(this,e);if(t)return t;var r,n=h.getFullPath(e.root.baseId),o=this.opts.code,u=o.es5,s=o.lines,p=this.opts.ownProperties,y=new c.CodeGen(this.scope,{es5:u,lines:s,ownProperties:p});e.$async&&(r=y.scopeValue("Error",{ref:l.ValidationError,code:c._(a())}));var m=y.scopeName("validate");e.validateName=m;var v,_={gen:y,allErrors:this.opts.allErrors,data:f.default.data,parentData:f.default.parentData,parentDataProperty:f.default.parentDataProperty,dataNames:[f.default.data],dataPathArr:[c.nil],dataLevel:0,dataTypes:[],topSchemaRef:y.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:c.stringify(e.schema)}:{ref:e.schema}),validateName:m,ValidationError:r,schema:e.schema,schemaEnv:e,strictSchema:!0,rootId:n,baseId:e.baseId||n,schemaPath:c.nil,errSchemaPath:"#",errorPath:c._(i()),opts:this.opts,self:this};try{this._compilations.add(e),d.validateFunctionCode(_),y.optimize(this.opts.code.optimize);var g=y.toString();v="".concat(y.scopeRefs(f.default.scope),"return ").concat(g),this.opts.code.process&&(v=this.opts.code.process(v,e));var w=new Function("".concat(f.default.self),"".concat(f.default.scope),v)(this,this.scope.get());if(this.scope.value(m,{ref:w}),w.errors=null,w.schema=e.schema,w.schemaEnv=e,e.$async&&(w.$async=!0),!0===this.opts.code.source&&(w.source={validateName:m,validateCode:g,scopeValues:y._values}),this.opts.unevaluated){var k=_.props,S=_.items;w.evaluated={props:k instanceof c.Name?void 0:k,items:S instanceof c.Name?void 0:S,dynamicProps:k instanceof c.Name,dynamicItems:S instanceof c.Name},w.source&&(w.source.evaluated=c.stringify(w.evaluated))}return e.validate=w,e}catch(t){throw delete e.validate,delete e.validateName,v&&this.logger.error("Error compiling schema, function code:",v),t}finally{this._compilations.delete(e)}}function _(e){return h.inlineRef(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:v.call(this,e)}function b(e){var t,r,o,i=n(this._compilations);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(o=e,(r=a).schema===o.schema&&r.root===o.root&&r.baseId===o.baseId)return a}}catch(e){i.e(e)}finally{i.f()}}function g(e,t){for(var r;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||w.call(this,e,t)}function w(e,t){var r=y.parse(t),n=h._getFullPath(r),o=h.getFullPath(e.baseId);if(Object.keys(e.schema).length>0&&n===o)return S.call(this,r,e);var i=h.normalizeId(n),a=this.refs[i]||this.schemas[i];if("string"==typeof a){var u=w.call(this,e,a);if("object"!==s(null==u?void 0:u.schema))return;return S.call(this,r,u)}return"object"===s(null==a?void 0:a.schema)?(a.validate||v.call(this,a),i===h.normalizeId(t)?new m({schema:a.schema,root:e,baseId:o}):S.call(this,r,a)):void 0}t.SchemaEnv=m,t.compileSchema=v,t.resolveRef=function(e,t,r){var n;r=h.resolveUrl(t,r);var o=e.refs[r];if(o)return o;var i=g.call(this,e,r);if(void 0===i){var a=null===(n=e.localRefs)||void 0===n?void 0:n[r];a&&(i=new m({schema:a,root:e,baseId:t}))}return void 0!==i?e.refs[r]=_.call(this,i):void 0},t.resolveSchema=w;var k=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function S(e,t){var r,o=t.baseId,i=t.schema,a=t.root;if("/"===(null===(r=e.fragment)||void 0===r?void 0:r[0])){var u,c,l=n(e.fragment.slice(1).split("/"));try{for(l.s();!(u=l.n()).done;){var f=u.value;if("boolean"==typeof i)return;if(void 0===(i=i[p.unescapeFragment(f)]))return;!k.has(f)&&"object"==s(i)&&i.$id&&(o=h.resolveUrl(o,i.$id))}}catch(e){l.e(e)}finally{l.f()}if("boolean"!=typeof i&&i.$ref&&!p.schemaHasRulesButRef(i,this.RULES)){var d=h.resolveUrl(o,i.$ref);c=w.call(this,a,d)}return(c=c||new m({schema:i,root:a,baseId:o})).schema!==c.root.schema?c:void 0}}},1418:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6287),o={data:new n.Name("data"),valCxt:new n.Name("valCxt"),dataPath:new n.Name("dataPath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope")};t.default=o},5381:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;var o=r(2523),i=r(3094),a=r(4929),u=r(574),s=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return"boolean"==typeof e||(!0===t?!l(e):!!t&&f(e)<=t)};var c=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(e){for(var t in e){if(c.has(t))return!0;var r=e[t];if(Array.isArray(r)&&r.some(l))return!0;if("object"==n(r)&&l(r))return!0}return!1}function f(e){var t=0;for(var r in e){if("$ref"===r)return 1/0;if(t++,!s.has(r)&&("object"==n(e[r])&&o.eachItem(e[r],(function(e){return t+=f(e)})),t===1/0))return 1/0}return t}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;!1!==t&&(e=y(e));var r=u.parse(e);return p(r)}function p(e){return u.serialize(e).split("#")[0]+"#"}t.getFullPath=h,t._getFullPath=p;var d=/#\/?$/;function y(e){return e?e.replace(d,""):""}t.normalizeId=y,t.resolveUrl=function(e,t){return t=y(t),u.resolve(e,t)};var m=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e){var t=this;if("boolean"==typeof e)return{};var r=y(e.$id),o={"":r},s=h(r,!1),c={},l=new Set;return a(e,{allKeys:!0},(function(e,r,i,a){if(void 0!==a){var h=s+r,d=o[a];"string"==typeof e.$id&&(d=v.call(t,e.$id)),_.call(t,e.$anchor),_.call(t,e.$dynamicAnchor),o[r]=d}function v(t){if(t=y(d?u.resolve(d,t):t),l.has(t))throw p(t);l.add(t);var r=this.refs[t];return"string"==typeof r&&(r=this.refs[r]),"object"==n(r)?f(e,r.schema,t):t!==y(h)&&("#"===t[0]?(f(e,c[t],t),c[t]=e):this.refs[t]=h),t}function _(e){if("string"==typeof e){if(!m.test(e))throw new Error('invalid anchor "'.concat(e,'"'));v.call(this,"#".concat(e))}}})),c;function f(e,t,r){if(void 0!==t&&!i(e,t))throw p(r)}function p(e){return new Error('reference "'.concat(e,'" resolves to more than one schema'))}}},9583:(e,t)=>{"use strict";function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;var i=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&i.has(e)},t.getRules=function(){var e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:n(n({},e),{},{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{type:!0,$comment:!0},keywords:{type:!0,$comment:!0}}}},257:(e,t,r)=>{"use strict";function n(){var e=d(['"/" + ','.replace(/~/g, "~0").replace(/\\//g, "~1")'],['"/" + ','.replace(/~/g, "~0").replace(/\\\\//g, "~1")']);return n=function(){return e},e}function o(){var e=d(['"/" + ',""]);return o=function(){return e},e}function i(){var e=d(['"[\'" + ',' + "\']"']);return i=function(){return e},e}function a(){var e=d(['"[" + ',' + "]"']);return a=function(){return e},e}function u(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(){var e=d(["",""]);return c=function(){return e},e}function l(){var e=d(["","",""]);return l=function(){return e},e}function f(){var e=d(["","",""]);return f=function(){return e},e}function h(){var e=d(["","","",""]);return h=function(){return e},e}function p(){var e=d(["","",""]);return p=function(){return e},e}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.applySubschema=t.Type=void 0;var _,b=r(8612),g=r(2523),w=r(6287);!function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(_=t.Type||(t.Type={})),t.applySubschema=function(e,t,r){var s=function(e,t){var r=t.keyword,n=t.schemaProp,o=t.schema,i=t.strictSchema,a=t.schemaPath,u=t.errSchemaPath,s=t.topSchemaRef;if(void 0!==r&&void 0!==o)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==r){var c=e.schema[r];return void 0===n?{schema:c,schemaPath:w._(p(),e.schemaPath,w.getProperty(r)),errSchemaPath:"".concat(e.errSchemaPath,"/").concat(r)}:{schema:c[n],schemaPath:w._(h(),e.schemaPath,w.getProperty(r),w.getProperty(n)),errSchemaPath:"".concat(e.errSchemaPath,"/").concat(r,"/").concat(g.escapeFragment(n))}}if(void 0!==o){if(void 0===a||void 0===u||void 0===s)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,strictSchema:i,schemaPath:a,topSchemaRef:s,errSchemaPath:u}}throw new Error('either "keyword" or "schema" must be passed')}(e,t);!function(e,t,r){var s=r.dataProp,h=r.dataPropType,p=r.data,d=r.dataTypes,y=r.propertyName;if(void 0!==p&&void 0!==s)throw new Error('both "data" and "dataProp" passed, only one allowed');var m=t.gen;if(void 0!==s){var v=t.errorPath,b=t.dataPathArr,k=t.opts;S(m.let("data",w._(f(),t.data,w.getProperty(s)),!0)),e.errorPath=w.str(l(),v,function(e,t,r){if(e instanceof w.Name){var u=t===_.Num;return r?u?w._(a(),e):w._(i(),e):u?w._(o(),e):w._(n(),e)}return r?w.getProperty(e).toString():"/"+g.escapeJsonPointer(e)}(s,h,k.jsPropertySyntax)),e.parentDataProperty=w._(c(),s),e.dataPathArr=[].concat(u(b),[e.parentDataProperty])}function S(r){e.data=r,e.dataLevel=t.dataLevel+1,e.dataTypes=[],e.parentData=t.data,e.dataNames=[].concat(u(t.dataNames),[r])}void 0!==p&&(S(p instanceof w.Name?p:m.let("data",p,!0)),void 0!==y&&(e.propertyName=y)),d&&(e.dataTypes=d)}(s,e,t),function(e,t){var r=t.compositeRule,n=t.createErrors,o=t.allErrors,i=t.strictSchema;void 0!==r&&(e.compositeRule=r),void 0!==n&&(e.createErrors=n),void 0!==o&&(e.allErrors=o),e.strictSchema=i}(s,t);var d=m(m(m({},e),s),{},{items:void 0,props:void 0});return b.subschemaCode(d,r),d}},4447:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,r=e.length,n=0,o=0;o<r;)n++,(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<r&&56320==(64512&(t=e.charCodeAt(o)))&&o++;return n}},2523:(e,t,r)=>{"use strict";function n(){var e=b(["","",""]);return n=function(){return e},e}function o(){var e=b(["{}"]);return o=function(){return e},e}function i(){var e=b([""," > "," ? "," : ",""]);return i=function(){return e},e}function a(){var e=b([""," !== true"]);return a=function(){return e},e}function u(){var e=b([""," === true ? true : "," > "," ? "," : ",""]);return u=function(){return e},e}function s(){var e=b([""," !== true && "," !== undefined"]);return s=function(){return e},e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(){var e=b([""," || {}"]);return h=function(){return e},e}function p(){var e=b([""," !== true"]);return p=function(){return e},e}function d(){var e=b(["Object.assign(",", ",")"]);return d=function(){return e},e}function y(){var e=b([""," === true"]);return y=function(){return e},e}function m(){var e=b([""," !== true && "," !== undefined"]);return m=function(){return e},e}function v(){var e=b(["","","",""]);return v=function(){return e},e}function _(){var e=b(["",""]);return _=function(){return e},e}function b(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function g(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;var k=r(6287),S=r(8612);function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,r=e.opts,n=e.self;if(r.strict&&"boolean"!=typeof t){var o=n.RULES.keywords;for(var i in t)o[i]||S.checkStrictMode(e,'unknown keyword: "'.concat(i,'"'))}}function P(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0;return!1}function j(e){return"number"==typeof e?"".concat(e):e.replace(/~/g,"~0").replace(/\//g,"~1")}function x(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function E(e){var t=e.mergeNames,r=e.mergeToName,n=e.mergeValues,o=e.resultToName;return function(e,i,a,u){var s=void 0===a?i:a instanceof k.Name?(i instanceof k.Name?t(e,i,a):r(e,i,a),a):i instanceof k.Name?(r(e,a,i),i):n(i,a);return u!==k.Name||s instanceof k.Name?s:o(e,s)}}function C(e,t){if(!0===t)return e.var("props",!0);var r=e.var("props",k._(o()));return void 0!==t&&T(e,r,t),r}function T(e,t,r){Object.keys(r).forEach((function(r){return e.assign(k._(n(),t,k.getProperty(r)),!0)}))}t.toHash=function(e){var t,r={},n=g(e);try{for(n.s();!(t=n.n()).done;)r[t.value]=!0}catch(e){n.e(e)}finally{n.f()}return r},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(O(e,t),!P(t,e.self.RULES.all))},t.checkUnknownRules=O,t.schemaHasRules=P,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if("$ref"!==r&&t.all[r])return!0;return!1},t.schemaRefOrVal=function(e,t,r,n){var o=e.topSchemaRef,i=e.schemaPath;if(!n){if("number"==typeof t||"boolean"==typeof t)return t;if("string"==typeof t)return k._(_(),t)}return k._(v(),o,i,k.getProperty(r))},t.unescapeFragment=function(e){return x(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(j(e))},t.escapeJsonPointer=j,t.unescapeJsonPointer=x,t.eachItem=function(e,t){if(Array.isArray(e)){var r,n=g(e);try{for(n.s();!(r=n.n()).done;)t(r.value)}catch(e){n.e(e)}finally{n.f()}}else t(e)},t.mergeEvaluated={props:E({mergeNames:function(e,t,r){return e.if(k._(m(),r,t),(function(){e.if(k._(y(),t),(function(){return e.assign(r,!0)}),(function(){return e.code(k._(d(),r,t))}))}))},mergeToName:function(e,t,r){return e.if(k._(p(),r),(function(){!0===t?e.assign(r,!0):(e.assign(r,k._(h(),r)),T(e,r,t))}))},mergeValues:function(e,t){return!0===e||l(l({},e),t)},resultToName:C}),items:E({mergeNames:function(e,t,r){return e.if(k._(s(),r,t),(function(){return e.assign(r,k._(u(),t,r,t,r,t))}))},mergeToName:function(e,t,r){return e.if(k._(a(),r),(function(){return e.assign(r,!0===t||k._(i(),r,t,r,t))}))},mergeValues:function(e,t){return!0===e||Math.max(e,t)},resultToName:function(e,t){return e.var("items",t)}})},t.evaluatedPropsToName=C,t.setEvaluated=T},7298:(e,t)=>{"use strict";function r(e,t){return t.rules.some((function(t){return n(e,t)}))}function n(e,t){var r;return void 0!==e[t.keyword]||(null===(r=t.definition.implements)||void 0===r?void 0:r.some((function(t){return void 0!==e[t]})))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function(e,t){var n=e.schema,o=e.self.RULES.types[t];return o&&!0!==o&&r(n,o)},t.shouldUseGroup=r,t.shouldUseRule=n},232:(e,t,r)=>{"use strict";function n(){var e,t,r=(e=["",".errors"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return n=function(){return r},r}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;var i=r(388),a=r(6287),u=r(1418),s={message:"boolean schema is false"};function c(e,t){var r={gen:e.gen,keyword:"false schema",data:e.data,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};i.reportError(r,s,t)}t.topBoolOrEmptySchema=function(e){var t=e.gen,r=e.schema,i=e.validateName;!1===r?c(e,!1):"object"==o(r)&&!0===r.$async?t.return(u.default.data):(t.assign(a._(n(),i),null),t.return(!0))},t.boolOrEmptySchema=function(e,t){var r=e.gen;!1===e.schema?(r.var(t,!1),c(e)):r.var(t,!0)}},4771:(e,t,r)=>{"use strict";function n(){var e=$(["{type: ","}"]);return n=function(){return e},e}function o(){var e=$(["{type: ","}"]);return o=function(){return e},e}function i(){var e=$(["should be ",""]);return i=function(){return e},e}function a(){var e=$(["!"," || ",""]);return a=function(){return e},e}function u(){var e=$(["typeof ",' != "object"']);return u=function(){return e},e}function s(){var e=$(["isFinite(",")"]);return s=function(){return e},e}function c(){var e=$(["typeof ",' == "number"']);return c=function(){return e},e}function l(){var e=$(["typeof "," "," ",""]);return l=function(){return e},e}function f(){var e=$(["!("," % 1) && !isNaN(",")"]);return f=function(){return e},e}function h(){var e=$([""," && typeof ",' == "object" && !Array.isArray(',")"]);return h=function(){return e},e}function p(){var e=$(["Array.isArray(",")"]);return p=function(){return e},e}function d(){var e=$([""," "," null"]);return d=function(){return e},e}function y(){var e=$(["","[","]"]);return y=function(){return e},e}function m(){var e=$([""," !== undefined"]);return m=function(){return e},e}function v(){var e=$(["[","]"]);return v=function(){return e},e}function _(){var e=$(["",' === "string" || ',' === "number"\n              || ',' === "boolean" || '," === null"]);return _=function(){return e},e}function b(){var e=$(["",' === "" || '," === 0 || "," === false"]);return b=function(){return e},e}function g(){var e=$(["",' === "true" || '," === 1"]);return g=function(){return e},e}function w(){var e=$(["",' === "false" || '," === 0 || "," === null"]);return w=function(){return e},e}function k(){var e=$(["+",""]);return k=function(){return e},e}function S(){var e=$(["",' === "boolean" || '," === null\n              || (",' === "string" && '," && "," == +"," && !("," % 1))"]);return S=function(){return e},e}function O(){var e=$(["+",""]);return O=function(){return e},e}function P(){var e=$(["",' == "boolean" || '," === null\n              || (",' == "string" && '," && "," == +",")"]);return P=function(){return e},e}function j(){var e=$(['""']);return j=function(){return e},e}function x(){var e=$([""," === null"]);return x=function(){return e},e}function E(){var e=$(['"" + ',""]);return E=function(){return e},e}function C(){var e=$(["",' == "number" || ',' == "boolean"']);return C=function(){return e},e}function T(){var e=$([""," !== undefined"]);return T=function(){return e},e}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(){var e=$([""," !== undefined"]);return A=function(){return e},e}function D(){var e=$(["typeof ",""]);return D=function(){return e},e}function M(){var e=$(["","[0]"]);return M=function(){return e},e}function N(){var e=$([""," == 'object' && Array.isArray(",") && ",".length == 1"]);return N=function(){return e},e}function I(){var e=$(["undefined"]);return I=function(){return e},e}function L(){var e=$(["typeof ",""]);return L=function(){return e},e}function $(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;var V,z=r(9583),B=r(7298),U=r(388),F=r(6287),q=r(2523);function H(e){var t=Array.isArray(e)?e:e?[e]:[];if(t.every(z.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(V=t.DataType||(t.DataType={})),t.getSchemaTypes=function(e){var t=H(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=H,t.coerceAndCheckDataType=function(e,t){var r=e.gen,n=e.data,o=e.opts,i=function(e,t){return t?e.filter((function(e){return G.has(e)||"array"===t&&"array"===e})):[]}(t,o.coerceTypes),a=t.length>0&&!(0===i.length&&1===t.length&&B.schemaHasRulesForType(e,t[0]));if(a){var u=X(t,n,o.strict,V.Wrong);r.if(u,(function(){i.length?function(e,t,r){var n=e.gen,o=e.data,i=e.opts,a=n.let("dataType",F._(L(),o)),u=n.let("coerced",F._(I()));"array"===i.coerceTypes&&n.if(F._(N(),a,o,o),(function(){return n.assign(o,F._(M(),o)).assign(a,F._(D(),o)).if(X(t,o,i.strict),(function(){return n.assign(u,o)}))})),n.if(F._(A(),u));var s,c=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;(G.has(l)||"array"===l&&"array"===i.coerceTypes)&&f(l)}}catch(e){c.e(e)}finally{c.f()}function f(e){switch(e){case"string":return void n.elseIf(F._(C(),a,a)).assign(u,F._(E(),o)).elseIf(F._(x(),o)).assign(u,F._(j()));case"number":return void n.elseIf(F._(P(),a,o,a,o,o,o)).assign(u,F._(O(),o));case"integer":return void n.elseIf(F._(S(),a,o,a,o,o,o,o)).assign(u,F._(k(),o));case"boolean":return void n.elseIf(F._(w(),o,o,o)).assign(u,!1).elseIf(F._(g(),o,o)).assign(u,!0);case"null":return n.elseIf(F._(b(),o,o,o)),void n.assign(u,null);case"array":n.elseIf(F._(_(),a,a,a,o)).assign(u,F._(v(),o))}}n.else(),Y(e),n.endIf(),n.if(F._(T(),u),(function(){n.assign(o,u),function(e,t){var r=e.gen,n=e.parentData,o=e.parentDataProperty;r.if(F._(m(),n),(function(){return r.assign(F._(y(),n,o),t)}))}(e,u)}))}(e,t,i):Y(e)}))}return a};var G=new Set(["string","number","integer","boolean","null"]);function K(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V.Correct,i=o===V.Correct?F.operators.EQ:F.operators.NEQ;switch(e){case"null":return F._(d(),t,i);case"array":n=F._(p(),t);break;case"object":n=F._(h(),t,t,t);break;case"integer":n=a(F._(f(),t,t));break;case"number":n=a();break;default:return F._(l(),t,i,e)}return o===V.Correct?n:F.not(n);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F.nil;return F.and(F._(c(),t),e,r?F._(s(),t):F.nil)}}function X(e,t,r,n){if(1===e.length)return K(e[0],t,r,n);var o,i=q.toHash(e);if(i.array&&i.object){var s=F._(u(),t);o=i.null?s:F._(a(),t,s),delete i.null,delete i.array,delete i.object}else o=F.nil;for(var c in i.number&&delete i.integer,i)o=F.and(o,K(c,t,r,n));return o}t.checkDataType=K,t.checkDataTypes=X;var W={message:function(e){var t=e.schema;return F.str(i(),t)},params:function(e){var t=e.schema,r=e.schemaValue;return"string"==typeof t?F._(o(),t):F._(n(),r)}};function Y(e){var t=function(e){var t=e.gen,r=e.data,n=e.schema,o=q.schemaRefOrVal(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:o,schemaValue:o,parentSchema:n,params:{},it:e}}(e);U.reportError(t,W)}t.reportTypeError=Y},9199:(e,t,r)=>{"use strict";function n(){var e=u([""," = ",""]);return n=function(){return e},e}function o(){var e=u([""," || "," === null || ",' === ""']);return o=function(){return e},e}function i(){var e=u([""," === undefined"]);return i=function(){return e},e}function a(){var e=u(["","",""]);return a=function(){return e},e}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;var s=r(6287),c=r(8612);function l(e,t,r){var u=e.gen,l=e.compositeRule,f=e.data,h=e.opts;if(void 0!==r){var p=s._(a(),f,s.getProperty(t));if(l)c.checkStrictMode(e,"default is ignored for: ".concat(p));else{var d=s._(i(),p);"empty"===h.useDefaults&&(d=s._(o(),d,p,p)),u.if(d,s._(n(),p,s.stringify(r)))}}}t.assignDefaults=function(e,t){var r=e.schema,n=r.properties,o=r.items;if("object"===t&&n)for(var i in n)l(e,i,n[i].default);else"array"===t&&Array.isArray(o)&&o.forEach((function(t,r){return l(e,r,t.default)}))}},8612:(e,t,r)=>{"use strict";function n(){var e=I(["",".items"]);return n=function(){return e},e}function o(){var e=I(["",".props"]);return o=function(){return e},e}function i(){var e=I([""," === 0"]);return i=function(){return e},e}function a(){var e=I(["",".errors"]);return a=function(){return e},e}function u(){var e=I(["new ","(",")"]);return u=function(){return e},e}function s(){var e=I([""," === 0"]);return s=function(){return e},e}function c(){var e=I(["",".opts.$comment(",", ",", ",".schema)"]);return c=function(){return e},e}function l(){var e=I(["","/$comment"]);return l=function(){return e},e}function f(){var e=I(["",".logger.log(",")"]);return f=function(){return e},e}function h(){var e=I([""," === ",""]);return h=function(){return e},e}function p(){var e=I(["/*# sourceURL="," */"]);return p=function(){return e},e}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(){var e=I(["undefined"]);return y=function(){return e},e}function m(){var e=I(["",".items"]);return m=function(){return e},e}function v(){var e=I(["",".dynamicItems"]);return v=function(){return e},e}function _(){var e=I(["undefined"]);return _=function(){return e},e}function b(){var e=I(["",".props"]);return b=function(){return e},e}function g(){var e=I(["",".dynamicProps"]);return g=function(){return e},e}function w(){var e=I(["",".evaluated"]);return w=function(){return e},e}function k(){var e=I(["{}"]);return k=function(){return e},e}function S(){var e=I(["undefined"]);return S=function(){return e},e}function O(){var e=I(["undefined"]);return O=function(){return e},e}function P(){var e=I(['""']);return P=function(){return e},e}function j(){var e=I(["",".",""]);return j=function(){return e},e}function x(){var e=I(["",".",""]);return x=function(){return e},e}function E(){var e=I(["",".",""]);return E=function(){return e},e}function C(){var e=I(["",".",""]);return C=function(){return e},e}function T(){var e=I(["",".",""]);return T=function(){return e},e}function R(){var e=I([", ","={}"]);return R=function(){return e},e}function A(){var e=I(["{",'="", ',", ",", ","=","","}={}"]);return A=function(){return e},e}function D(){var e=I(["",", ",""]);return D=function(){return e},e}function M(){var e=I(['"use strict"; ',""]);return M=function(){return e},e}function N(){var e=I(["",", ",""]);return N=function(){return e},e}function I(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.schemaCxtHasRules=t.subschemaCode=t.validateFunctionCode=void 0;var L=r(232),$=r(4771),V=r(5935),z=r(6287),B=r(1418),U=r(5381),F=r(2523);function q(e,t){var r=e.gen,n=e.validateName,o=e.schema,i=e.schemaEnv,a=e.opts;a.code.es5?r.func(n,z._(N(),B.default.data,B.default.valCxt),i.$async,(function(){r.code(z._(M(),H(o,a))),function(e,t){e.if(B.default.valCxt,(function(){e.var(B.default.dataPath,z._(T(),B.default.valCxt,B.default.dataPath)),e.var(B.default.parentData,z._(C(),B.default.valCxt,B.default.parentData)),e.var(B.default.parentDataProperty,z._(E(),B.default.valCxt,B.default.parentDataProperty)),e.var(B.default.rootData,z._(x(),B.default.valCxt,B.default.rootData)),t.dynamicRef&&e.var(B.default.dynamicAnchors,z._(j(),B.default.valCxt,B.default.dynamicAnchors))}),(function(){e.var(B.default.dataPath,z._(P())),e.var(B.default.parentData,z._(O())),e.var(B.default.parentDataProperty,z._(S())),e.var(B.default.rootData,B.default.data),t.dynamicRef&&e.var(B.default.dynamicAnchors,z._(k()))}))}(r,a),r.code(t)})):r.func(n,z._(D(),B.default.data,function(e){return z._(A(),B.default.dataPath,B.default.parentData,B.default.parentDataProperty,B.default.rootData,B.default.data,e.dynamicRef?z._(R(),B.default.dynamicAnchors):z.nil)}(a)),i.$async,(function(){return r.code(H(o,a)).code(t)}))}function H(e,t){return"object"==d(e)&&e.$id&&(t.code.source||t.code.process)?z._(p(),e.$id):z.nil}function G(e){var t=e.schema,r=e.self;if("boolean"==typeof t)return!t;for(var n in t)if(r.RULES.all[n])return!0;return!1}function K(e){return"boolean"!=typeof e.schema}function X(e){F.checkUnknownRules(e),function(e){var t=e.schema,r=e.errSchemaPath,n=e.opts,o=e.self;t.$ref&&n.ignoreKeywordsWithRef&&F.schemaHasRulesButRef(t,o.RULES)&&o.logger.warn('$ref: keywords ignored in schema at path "'.concat(r,'"'))}(e)}function W(e,t){var r=$.getSchemaTypes(e.schema),n=$.coerceAndCheckDataType(e,r);V.schemaKeywords(e,r,!n,t)}function Y(e){var t=e.gen,r=e.schemaEnv,n=e.schema,o=e.errSchemaPath,i=e.opts,a=n.$comment;if(!0===i.$comment)t.code(z._(f(),B.default.self,a));else if("function"==typeof i.$comment){var u=z.str(l(),o),s=t.scopeValue("root",{ref:r.root});t.code(z._(c(),B.default.self,a,u,s))}}function J(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.opts.strict;if(r){if(t="strict mode: ".concat(t),!0===r)throw new Error(t);e.self.logger.warn(t)}}t.validateFunctionCode=function(e){K(e)&&(X(e),G(e))?function(e){var t=e.schema,r=e.opts,c=e.gen;q(e,(function(){r.$comment&&t.$comment&&Y(e),function(e){var t=e.schema,r=e.opts;void 0!==t.default&&r.useDefaults&&r.strict&&J(e,"default is ignored in the schema root")}(e),c.let(B.default.vErrors,null),c.let(B.default.errors,0),r.unevaluated&&function(e){var t=e.gen,r=e.validateName;e.evaluated=t.const("evaluated",z._(w(),r)),t.if(z._(g(),e.evaluated),(function(){return t.assign(z._(b(),e.evaluated),z._(_()))})),t.if(z._(v(),e.evaluated),(function(){return t.assign(z._(m(),e.evaluated),z._(y()))}))}(e),W(e),function(e){var t=e.gen,r=e.schemaEnv,c=e.validateName,l=e.ValidationError,f=e.opts;r.$async?t.if(z._(s(),B.default.errors),(function(){return t.return(B.default.data)}),(function(){return t.throw(z._(u(),l,B.default.vErrors))})):(t.assign(z._(a(),c),B.default.vErrors),f.unevaluated&&function(e){var t=e.gen,r=e.evaluated,i=e.props,a=e.items;i instanceof z.Name&&t.assign(z._(o(),r),i),a instanceof z.Name&&t.assign(z._(n(),r),a)}(e),t.return(z._(i(),B.default.errors)))}(e)}))}(e):q(e,(function(){return L.topBoolOrEmptySchema(e)}))},t.subschemaCode=function(e,t){K(e)&&(X(e),G(e))?function(e,t){var r=e.schema,n=e.gen;e.opts.$comment&&r.$comment&&Y(e),function(e){e.schema.$id&&(e.baseId=U.resolveUrl(e.baseId,e.schema.$id))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);var o=n.const("_errs",B.default.errors);W(e,o),n.var(t,z._(h(),o,B.default.errors))}(e,t):L.boolOrEmptySchema(e,t)},t.schemaCxtHasRules=G,t.checkStrictMode=J},5935:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){var e,t,r=(e=[""," === ",""],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return o=function(){return r},r}function i(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.schemaKeywords=void 0;var u=r(7298),s=r(4771),c=r(9199),l=r(1277),f=r(2523),h=r(8612),p=r(6287),d=r(1418);function y(e,t){var r=e.gen,n=e.schema;e.opts.useDefaults&&c.assignDefaults(e,t.type),r.block((function(){var r,o=i(t.rules);try{for(o.s();!(r=o.n()).done;){var a=r.value;u.shouldUseRule(n,a)&&l.keywordCode(e,a.keyword,a.definition,t.type)}}catch(e){o.e(e)}finally{o.f()}}))}function m(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function v(e,t){var r=e.schemaEnv.baseId+e.errSchemaPath;t+=' at "'.concat(r,'" (strictTypes)'),h.checkStrictMode(e,t,e.opts.strictTypes)}t.schemaKeywords=function(e,t,r,a){var c=e.gen,h=e.schema,_=e.data,b=e.allErrors,g=e.opts,w=e.self.RULES;function k(n){u.shouldUseGroup(h,n)&&(n.type?(c.if(s.checkDataType(n.type,_,g.strict)),y(e,n),1===t.length&&t[0]===n.type&&r&&(c.else(),s.reportTypeError(e)),c.endIf()):y(e,n),b||c.if(p._(o(),d.default.errors,a||0)))}!h.$ref||!g.ignoreKeywordsWithRef&&f.schemaHasRulesButRef(h,w)?(function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach((function(t){m(e.dataTypes,t)||v(e,'type "'.concat(t,'" not allowed by context "').concat(e.dataTypes.join(","),'"'))})),e.dataTypes=e.dataTypes.filter((function(e){return m(t,e)}))):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&v(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){var r=e.self.RULES.all;for(var o in r){var i=r[o];if("object"==n(i)&&u.shouldUseRule(e.schema,i)){var a=i.definition.type;a.length&&!a.some((function(e){return n=e,(r=t).includes(n)||"number"===n&&r.includes("integer");var r,n}))&&v(e,'missing type "'.concat(a.join(","),'" for keyword "').concat(o,'"'))}}}(e,e.dataTypes))}(e,t),c.block((function(){var e,t=i(w.rules);try{for(t.s();!(e=t.n()).done;)k(e.value)}catch(e){t.e(e)}finally{t.f()}k(w.post)}))):c.block((function(){return l.keywordCode(e,"$ref",w.all.$ref.definition)}))}},1277:(e,t,r)=>{"use strict";function n(){var e=p(["",".length"]);return n=function(){return e},e}function o(){var e=p([""," === null ? "," : ",".concat(",")"]);return o=function(){return e},e}function i(){var e=p(["Array.isArray(",")"]);return i=function(){return e},e}function a(){var e=p(["","[","]"]);return a=function(){return e},e}function u(){var e=p(["","",""]);return u=function(){return e},e}function s(){var e=p(["await "]);return s=function(){return e},e}function c(){var e=p(["",".errors"]);return c=function(){return e},e}function l(){var e=p(["",".errors"]);return l=function(){return e},e}function f(){var e=p([""," instanceof ",""]);return f=function(){return e},e}function h(){var e=p(["await "]);return h=function(){return e},e}function p(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.keywordCode=void 0;var d=r(2946),y=r(388),m=r(1301),v=r(6287),_=r(1418);function b(e,t){var r,a=e.gen,p=e.keyword,d=e.schema,b=e.parentSchema,k=e.$data,S=e.it;!function(e,t){var r=e.schemaEnv;if(t.async&&!r.$async)throw new Error("async keyword in sync schema")}(S,t);var O=!k&&t.compile?t.compile.call(S.self,d,b,S):t.validate,P=w(a,p,O),j=a.let("valid");function x(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.async?v._(s()):v.nil,n=S.opts.passContext?_.default.this:_.default.self,o=!("compile"in t&&!k||!1===t.schema);a.assign(j,v._(u(),r,m.callValidateCode(e,P,n,o)),t.modifying)}function E(e){var r;a.if(v.not(null!==(r=t.valid)&&void 0!==r?r:j),e)}e.block$data(j,(function(){if(!1===t.errors)x(),t.modifying&&g(e),E((function(){return e.error()}));else{var r=t.async?function(){var e=a.let("ruleErrs",null);return a.try((function(){return x(v._(h()))}),(function(t){return a.assign(j,!1).if(v._(f(),t,S.ValidationError),(function(){return a.assign(e,v._(l(),t))}),(function(){return a.throw(t)}))})),e}():(u=v._(c(),P),a.assign(u,null),x(v.nil),u);t.modifying&&g(e),E((function(){return function(e,t){var r=e.gen;r.if(v._(i(),t),(function(){r.assign(_.default.vErrors,v._(o(),_.default.vErrors,t,_.default.vErrors,t)).assign(_.default.errors,v._(n(),_.default.vErrors)),y.extendErrors(e)}),(function(){return e.error()}))}(e,r)}))}var u})),e.ok(null!==(r=t.valid)&&void 0!==r?r:j)}function g(e){var t=e.gen,r=e.data,n=e.it;t.if(n.parentData,(function(){return t.assign(r,v._(a(),n.parentData,n.parentDataProperty))}))}function w(e,t,r){if(void 0===r)throw new Error('keyword "'.concat(t,'" failed to compile'));return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:v.stringify(r)})}t.keywordCode=function(e,t,r,n){var o=new d.default(e,r,t);"code"in r?r.code(o,n):o.$data&&r.validate?b(o,r):"macro"in r?function(e,t){var r=e.gen,n=e.keyword,o=e.schema,i=e.parentSchema,a=e.it,u=t.macro.call(a.self,o,i,a),s=w(r,n,u);!1!==a.opts.validateSchema&&a.self.validateSchema(u,!0);var c=r.name("valid");e.subschema({schema:u,schemaPath:v.nil,errSchemaPath:"".concat(a.errSchemaPath,"/").concat(n),topSchemaRef:s,compositeRule:!0},c),e.pass(c,(function(){return e.error(!0)}))}(o,r):(r.compile||r.validate)&&b(o,r)}},501:(e,t,r)=>{"use strict";function n(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t,r,n,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,o)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){i(a,n,o,u,s,"next",e)}function s(e){i(a,n,o,u,s,"throw",e)}u(void 0)}))}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var p=r(2946);t.KeywordCxt=p.default;var d=r(6287);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var y=r(328),m=r(9583),v=r(6678),_=r(6287),b=r(5381),g=r(4771),w=r(2523),k=r(2228),S=["removeAdditional","useDefaults","coerceTypes"],O=new Set(["validate","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),P={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",schemaId:"JSON Schema draft-04 is not supported in Ajv v7.",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",strictNumbers:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key."},j={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function x(e){var t,r,n,o,i,a,u,s,c,l,h,p,d=null===(t=e.strict)||void 0===t||t,y=!!d&&"log",m=null===(r=e.code)||void 0===r?void 0:r.optimize,v=!0===m||void 0===m?1:m||0;return{strict:d,strictTypes:null!==(n=e.strictTypes)&&void 0!==n?n:y,strictTuples:null!==(o=e.strictTuples)&&void 0!==o?o:y,code:e.code?f(f({},e.code),{},{optimize:v}):{optimize:v},loopRequired:null!==(i=e.loopRequired)&&void 0!==i?i:1/0,loopEnum:null!==(a=e.loopEnum)&&void 0!==a?a:1/0,meta:null===(u=e.meta)||void 0===u||u,messages:null===(s=e.messages)||void 0===s||s,inlineRefs:null===(c=e.inlineRefs)||void 0===c||c,addUsedSchema:null===(l=e.addUsedSchema)||void 0===l||l,validateSchema:null===(h=e.validateSchema)||void 0===h||h,validateFormats:null===(p=e.validateFormats)||void 0===p||p}}var E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e),this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts=f(f({},t),x(t));var r=this.opts.code,n=r.es5,o=r.lines;this.scope=new _.ValueScope({scope:{},prefixes:O,es5:n,lines:o}),this.logger=I(t.logger);var i=t.validateFormats;t.validateFormats=!1,this.RULES=m.getRules(),C.call(this,P,t,"NOT SUPPORTED"),C.call(this,j,t,"DEPRECATED","warn"),this._metaOpts=M.call(this),t.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&D.call(this,t.keywords),"object"==u(t.meta)&&this.addMetaSchema(t.meta),R.call(this),t.validateFormats=i}var t,r;return t=e,(r=[{key:"_addVocabularies",value:function(){this.addKeyword("$async")}},{key:"_addDefaultMetaSchema",value:function(){var e=this.opts,t=e.$data;e.meta&&t&&this.addMetaSchema(k,k.$id,!1)}},{key:"defaultMeta",value:function(){var e=this.opts.meta;return this.opts.defaultMeta="object"==u(e)?e.$id||e:void 0}},{key:"validate",value:function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'.concat(e,'"'))}else r=this.compile(e);var n=r(t);return"$async"in r||(this.errors=r.errors),n}},{key:"compile",value:function(e,t){var r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}},{key:"compileAsync",value:function(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");var r=this.opts.loadSchema;return n.call(this,e,t);function n(e,t){return o.apply(this,arguments)}function o(){return(o=a(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.call(this,t.$schema);case 2:return n=this._addSchema(t,r),e.abrupt("return",n.validate||s.call(this,n));case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function i(e){return u.apply(this,arguments)}function u(){return(u=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||this.getSchema(t)){e.next=3;break}return e.next=3,n.call(this,{$ref:t},!0);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function s(e){return c.apply(this,arguments)}function c(){return(c=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this._compileSchemaEnv(t));case 4:if(e.prev=4,e.t0=e.catch(0),e.t0 instanceof y.MissingRefError){e.next=8;break}throw e.t0;case 8:return l.call(this,e.t0),e.next=11,f.call(this,e.t0.missingSchema);case 11:return e.abrupt("return",s.call(this,t));case 12:case"end":return e.stop()}}),e,this,[[0,4]])})))).apply(this,arguments)}function l(e){var t=e.missingSchema,r=e.missingRef;if(this.refs[t])throw new Error("AnySchema ".concat(t," is loaded but ").concat(r," cannot be resolved"))}function f(e){return h.apply(this,arguments)}function h(){return(h=a(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.call(this,r);case 2:if(n=e.sent,this.refs[r]){e.next=6;break}return e.next=6,i.call(this,n.$schema);case 6:this.refs[r]||this.addSchema(n,r,t);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return(d=a(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._loading[t])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,this._loading[t]=r(t);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,delete this._loading[t],e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[3,,7,10]])})))).apply(this,arguments)}}},{key:"addSchema",value:function(e,t,r){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.validateSchema;if(Array.isArray(e)){var a,s=n(e);try{for(s.s();!(a=s.n()).done;){var c=a.value;this.addSchema(c,void 0,r,i)}}catch(e){s.e(e)}finally{s.f()}return this}if("object"===u(e)&&void 0!==(o=e.$id)&&"string"!=typeof o)throw new Error("schema id must be string");return t=b.normalizeId(t||o),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,i,!0),this}},{key:"addMetaSchema",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.opts.validateSchema;return this.addSchema(e,t,!0,r),this}},{key:"validateSchema",value:function(e,t){if("boolean"==typeof e)return!0;var r;if(void 0!==(r=e.$schema)&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this.opts.defaultMeta||this.defaultMeta()))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,e);if(!n&&t){var o="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(o);this.logger.error(o)}return n}},{key:"getSchema",value:function(e){for(var t;"string"==typeof(t=T.call(this,e));)e=t;if(void 0===t){var r=new v.SchemaEnv({schema:{}});if(!(t=v.resolveSchema.call(this,r,e)))return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}},{key:"removeSchema",value:function(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(u(e)){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":var t=T.call(this,e);return"object"==u(t)&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this;case"object":var r=e;this._cache.delete(r);var n=e.$id;return n&&(n=b.normalizeId(n),delete this.schemas[n],delete this.refs[n]),this;default:throw new Error("ajv.removeSchema: invalid parameter")}}},{key:"addVocabulary",value:function(e){var t,r=n(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;this.addKeyword(o)}}catch(e){r.e(e)}finally{r.f()}return this}},{key:"addKeyword",value:function(e,t){var r,n=this;if("string"==typeof e)r=e,"object"==u(t)&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else{if("object"!=u(e)||void 0!==t)throw new Error("invalid addKeywords parameters");if(r=(t=e).keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if($.call(this,r,t),!t)return w.eachItem(r,(function(e){return V.call(n,e)})),this;B.call(this,t);var o=f(f({},t),{},{type:g.getJSONTypes(t.type),schemaType:g.getJSONTypes(t.schemaType)});return w.eachItem(r,0===o.type.length?function(e){return V.call(n,e,o)}:function(e){return o.type.forEach((function(t){return V.call(n,e,o,t)}))}),this}},{key:"getKeyword",value:function(e){var t=this.RULES.all[e];return"object"==u(t)?t.definition:!!t}},{key:"removeKeyword",value:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e];var r,o=n(t.rules);try{for(o.s();!(r=o.n()).done;){var i=r.value,a=i.rules.findIndex((function(t){return t.keyword===e}));a>=0&&i.rules.splice(a,1)}}catch(e){o.e(e)}finally{o.f()}return this}},{key:"addFormat",value:function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}},{key:"errorsText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.errors,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.separator,n=void 0===r?", ":r,o=t.dataVar,i=void 0===o?"data":o;return e&&0!==e.length?e.map((function(e){return"".concat(i).concat(e.dataPath," ").concat(e.message)})).reduce((function(e,t){return e+n+t})):"No errors"}},{key:"$dataMetaSchema",value:function(e,t){var r=this.RULES.all;e=JSON.parse(JSON.stringify(e));var o,i=n(t);try{for(i.s();!(o=i.n()).done;){var a,s=o.value.split("/").slice(1),c=e,l=n(s);try{for(l.s();!(a=l.n()).done;)c=c[a.value]}catch(e){l.e(e)}finally{l.f()}for(var f in r){var h=r[f];if("object"==u(h)){var p=h.definition.$data,d=c[f];p&&d&&(c[f]=F(d))}}}}catch(e){i.e(e)}finally{i.f()}return e}},{key:"_removeAllSchemas",value:function(e,t){for(var r in e){var n=e[r];t&&!t.test(r)||("string"==typeof n?delete e[r]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[r]))}}},{key:"_addSchema",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.opts.validateSchema,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.addUsedSchema;if("object"!=u(e)&&"boolean"!=typeof e)throw new Error("schema must be object or boolean");var o=this._cache.get(e);if(void 0!==o)return o;var i=b.getSchemaRefs.call(this,e);o=new v.SchemaEnv({schema:e,meta:t,localRefs:i}),this._cache.set(o.schema,o);var a=o.baseId;return n&&!a.startsWith("#")&&(a&&this._checkUnique(a),this.refs[a]=o),r&&this.validateSchema(e,!0),o}},{key:"_checkUnique",value:function(e){if(this.schemas[e]||this.refs[e])throw new Error('schema with key or id "'.concat(e,'" already exists'))}},{key:"_compileSchemaEnv",value:function(e){if(e.meta?this._compileMetaSchema(e):v.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}},{key:"_compileMetaSchema",value:function(e){var t=this.opts;this.opts=this._metaOpts;try{v.compileSchema.call(this,e)}finally{this.opts=t}}}])&&c(t.prototype,r),e}();function C(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"error";for(var o in e){var i=o;i in t&&this.logger[n]("".concat(r,": option ").concat(o,". ").concat(e[i]))}}function T(e){return e=b.normalizeId(e),this.schemas[e]||this.refs[e]}function R(){var e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(var t in e)this.addSchema(e[t],t)}function A(){for(var e in this.opts.formats){var t=this.opts.formats[e];t&&this.addFormat(e,t)}}function D(e){if(Array.isArray(e))this.addVocabulary(e);else for(var t in this.logger.warn("keywords option as map is deprecated, pass array"),e){var r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function M(){var e,t=f({},this.opts),r=n(S);try{for(r.s();!(e=r.n()).done;)delete t[e.value]}catch(e){r.e(e)}finally{r.f()}return t}t.default=E,E.ValidationError=y.ValidationError,E.MissingRefError=y.MissingRefError;var N={log:function(){},warn:function(){},error:function(){}};function I(e){if(!1===e)return N;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var L=/^[a-z_$][a-z0-9_$-]*$/i;function $(e,t){var r=this.RULES;if(w.eachItem(e,(function(e){if(r.keywords[e])throw new Error("Keyword ".concat(e," is already defined"));if(!L.test(e))throw new Error("Keyword ".concat(e," has invalid name"))})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function V(e,t,r){var n,o=this,i=null==t?void 0:t.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');var a=this.RULES,u=i?a.post:a.rules.find((function(e){return e.type===r}));if(u||(u={type:r,rules:[]},a.rules.push(u)),a.keywords[e]=!0,t){var s={keyword:e,definition:f(f({},t),{},{type:g.getJSONTypes(t.type),schemaType:g.getJSONTypes(t.schemaType)})};t.before?z.call(this,u,s,t.before):u.rules.push(s),a.all[e]=s,null===(n=t.implements)||void 0===n||n.forEach((function(e){return o.addKeyword(e)}))}}function z(e,t,r){var n=e.rules.findIndex((function(e){return e.keyword===r}));n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn("rule ".concat(r," is not defined")))}function B(e){var t=e.metaSchema;void 0!==t&&(e.$data&&this.opts.$data&&(t=F(t)),e.validateSchema=this.compile(t,!0))}var U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function F(e){return{anyOf:[e,U]}}},5461:(e,t,r)=>{"use strict";function n(){var e=c([""," <= ",""]);return n=function(){return e},e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){var e=c([""," <= ",""]);return i=function(){return e},e}function a(){var e=c(["",".length"]);return a=function(){return e},e}function u(){var e=c(["{limit: ","}"]);return u=function(){return e},e}function s(){var e=c(["should NOT have more than "," items"]);return s=function(){return e},e}function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var l=r(6287),f=r(257),h=r(2523),p=r(8612),d={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:function(e){var t=e.params.len;return l.str(s(),t)},params:function(e){var t=e.params.len;return l._(u(),t)}},code:function(e){var t=e.gen,r=e.schema,u=e.parentSchema,s=e.data,c=e.it,d=u.items;if(Array.isArray(d)){c.items=!0;var y=t.const("len",l._(a(),s));if(!1===r)e.setParams({len:d.length}),e.pass(l._(i(),y,d.length));else if("object"==o(r)&&!h.alwaysValidSchema(c,r)){var m=t.var("valid",l._(n(),y,d.length));t.if(l.not(m),(function(){return function(r){t.forRange("i",d.length,y,(function(n){e.subschema({keyword:"additionalItems",dataProp:n,dataPropType:f.Type.Num},r),c.allErrors||t.if(l.not(r),(function(){return t.break()}))}))}(m)})),e.ok(m)}}else p.checkStrictMode(c,'"additionalItems" is ignored when "items" is not an array of schemas')}};t.default=d},1366:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){var e=p(["delete ","[","]"]);return o=function(){return e},e}function i(){var e=p(["!(",")"]);return i=function(){return e},e}function a(){var e=p(["",".test(",")"]);return a=function(){return e},e}function u(){var e=p([""," === ",""]);return u=function(){return e},e}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(){var e=p(["",".hasOwnProperty(",")"]);return l=function(){return e},e}function f(){var e=p([""," === ",""]);return f=function(){return e},e}function h(){var e=p(["{additionalProperty: ","}"]);return h=function(){return e},e}function p(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var d=r(1301),y=r(6287),m=r(1418),v=r(257),_=r(2523),b={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"should NOT have additional properties",params:function(e){var t=e.params;return y._(h(),t.additionalProperty)}},code:function(e){var t=e.gen,r=e.schema,c=e.parentSchema,h=e.data,p=e.errsCount,b=e.it;if(!p)throw new Error("ajv implementation error");var g=b.allErrors,w=b.opts;if(b.props=!0,"all"===w.removeAdditional||!_.alwaysValidSchema(b,r)){var k=d.allSchemaProperties(c.properties),S=d.allSchemaProperties(c.patternProperties);t.forIn("key",h,(function(e){k.length||S.length?t.if(function(e){var r;if(k.length>8){var n=_.schemaRefOrVal(b,c.properties,"properties");r=y._(l(),n,e)}else r=k.length?y.or.apply(y,s(k.map((function(t){return y._(u(),e,t)})))):y.nil;return S.length&&(r=y.or.apply(y,[r].concat(s(S.map((function(r){return y._(a(),d.usePattern(t,r),e)})))))),y._(i(),r)}(e),(function(){return P(e)})):P(e)})),e.ok(y._(f(),p,m.default.errors))}function O(e){t.code(y._(o(),h,e))}function P(o){if("all"===w.removeAdditional||w.removeAdditional&&!1===r)O(o);else{if(!1===r)return e.setParams({additionalProperty:o}),e.error(),void(g||t.break());if("object"==n(r)&&!_.alwaysValidSchema(b,r)){var i=t.name("valid");"failing"===w.removeAdditional?(j(o,i,!1),t.if(y.not(i),(function(){e.reset(),O(o)}))):(j(o,i),g||t.if(y.not(i),(function(){return t.break()})))}}}function j(t,r,n){var o={keyword:"additionalProperties",dataProp:t,dataPropType:v.Type.Str,strictSchema:b.strictSchema};!1===n&&Object.assign(o,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(o,r)}}};t.default=b},2698:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2523),o={keyword:"allOf",schemaType:"array",code:function(e){var t=e.gen,r=e.schema,o=e.it;if(!Array.isArray(r))throw new Error("ajv implementation error");var i=t.name("valid");r.forEach((function(t,r){if(!n.alwaysValidSchema(o,t)){var a=e.subschema({keyword:"allOf",schemaProp:r},i);e.ok(i),e.mergeEvaluated(a)}}))}};t.default=o},9152:(e,t,r)=>{"use strict";function n(){var e,t,r=(e=[""," || ",""],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return n=function(){return r},r}Object.defineProperty(t,"__esModule",{value:!0});var o=r(6287),i=r(2523),a={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:function(e){var t=e.gen,r=e.schema,a=e.it;if(!Array.isArray(r))throw new Error("ajv implementation error");if(!r.some((function(e){return i.alwaysValidSchema(a,e)}))||a.opts.unevaluated){var u=t.let("valid",!1),s=t.name("_valid");t.block((function(){return r.forEach((function(r,i){var a=e.subschema({keyword:"anyOf",schemaProp:i,compositeRule:!0},s);t.assign(u,o._(n(),u,s)),e.mergeValidEvaluated(a,s)||t.if(o.not(u))}))})),e.result(u,(function(){return e.reset()}),(function(){return e.error(!0)}))}},error:{message:"should match some schema in anyOf"}};t.default=a},7688:(e,t,r)=>{"use strict";function n(){var e=d([""," >= ",""]);return n=function(){return e},e}function o(){var e=d([""," > ",""]);return o=function(){return e},e}function i(){var e=d([""," >= ",""]);return i=function(){return e},e}function a(){var e=d(["","++"]);return a=function(){return e},e}function u(){var e=d([""," && "," <= ",""]);return u=function(){return e},e}function s(){var e=d([""," >= ",""]);return s=function(){return e},e}function c(){var e=d(["",".length"]);return c=function(){return e},e}function l(){var e=d(["{minContains: ",", maxContains: ","}"]);return l=function(){return e},e}function f(){var e=d(["{minContains: ","}"]);return f=function(){return e},e}function h(){var e=d(["should contain at least "," and no more than "," valid item(s)"]);return h=function(){return e},e}function p(){var e=d(["should contain at least "," valid item(s)"]);return p=function(){return e},e}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var y=r(6287),m=r(257),v=r(2523),_=r(8612),b={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:function(e){var t=e.params,r=t.min,n=t.max;return void 0===n?y.str(p(),r):y.str(h(),r,n)},params:function(e){var t=e.params,r=t.min,n=t.max;return void 0===n?y._(f(),r):y._(l(),r,n)}},code:function(e){var t,r,l=e.gen,f=e.schema,h=e.parentSchema,p=e.data,d=e.it,b=h.minContains,g=h.maxContains;d.opts.next?(t=void 0===b?1:b,r=g):t=1;var w=l.const("len",y._(c(),p));if(e.setParams({min:t,max:r}),void 0!==r||0!==t){if(void 0!==r&&t>r)return _.checkStrictMode(d,'"minContains" > "maxContains" is always invalid'),void e.fail();if(v.alwaysValidSchema(d,f)){var k=y._(s(),w,t);return void 0!==r&&(k=y._(u(),k,w,r)),void e.pass(k)}d.items=!0;var S=l.name("valid");if(void 0===r&&1===t)j(S,(function(){return l.if(S,(function(){return l.break()}))}));else{l.let(S,!1);var O=l.name("_valid"),P=l.let("count",0);j(O,(function(){return l.if(O,(function(){return function(e){l.code(y._(a(),e)),void 0===r?l.if(y._(i(),e,t),(function(){return l.assign(S,!0).break()})):(l.if(y._(o(),e,r),(function(){return l.assign(S,!1).break()})),1===t?l.assign(S,!0):l.if(y._(n(),e,t),(function(){return l.assign(S,!0)})))}(P)}))}))}e.result(S,(function(){return e.reset()}))}else _.checkStrictMode(d,'"minContains" == 0 without "maxContains": "contains" keyword ignored');function j(t,r){l.forRange("i",0,w,(function(n){e.subschema({keyword:"contains",dataProp:n,dataPropType:m.Type.Num,compositeRule:!0},t),r()}))}}};t.default=b},7015:(e,t,r)=>{"use strict";function n(){var e=c([""," && (",")"]);return n=function(){return e},e}function o(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw a}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(){var e=c(["{property: ",",\n    missingProperty: ",",\n    depsCount: ",",\n    deps: ","}"]);return u=function(){return e},e}function s(){var e=c(["should have "," "," when property "," is present"]);return s=function(){return e},e}function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;var l=r(6287),f=r(2523),h=r(1301);t.error={message:function(e){var t=e.params,r=t.property,n=t.depsCount,o=t.deps,i=1===n?"property":"properties";return l.str(s(),i,o,r)},params:function(e){var t=e.params,r=t.property,n=t.depsCount,o=t.deps,i=t.missingProperty;return l._(u(),r,i,n,o)}};var p={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code:function(e){var t,r,n=(t=function(e){var t=e.schema,r={},n={};for(var o in t)"__proto__"!==o&&((Array.isArray(t[o])?r:n)[o]=t[o]);return[r,n]}(e),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}}(t,r)||i(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1];d(e,o),y(e,a)}};function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,r=e.gen,i=e.data,a=e.it;if(0!==Object.keys(t).length){var u=r.let("missing"),s=function(s){var c=t[s];if(0===c.length)return"continue";var f=h.propertyInData(i,s,a.opts.ownProperties);e.setParams({property:s,depsCount:c.length,deps:c.join(", ")}),a.allErrors?r.if(f,(function(){var t,r=o(c);try{for(r.s();!(t=r.n()).done;){var n=t.value;h.checkReportMissingProp(e,n)}}catch(e){r.e(e)}finally{r.f()}})):(r.if(l._(n(),f,h.checkMissingProp(e,c,u))),h.reportMissingProp(e,u),r.else())};for(var c in t)s(c)}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,r=e.gen,n=e.data,o=e.keyword,i=e.it,a=r.name("valid"),u=function(u){if(f.alwaysValidSchema(i,t[u]))return"continue";r.if(h.propertyInData(n,u,i.opts.ownProperties),(function(){var t=e.subschema({keyword:o,schemaProp:u},a);e.mergeValidEvaluated(t,a)}),(function(){return r.var(a,!0)})),e.ok(a)};for(var s in t)u(s)}t.validatePropertyDeps=d,t.validateSchemaDeps=y,t.default=p},6868:(e,t,r)=>{"use strict";function n(){var e=a(["",""]);return n=function(){return e},e}function o(){var e=a(["{failingKeyword: ","}"]);return o=function(){return e},e}function i(){var e=a(['should match "','" schema']);return i=function(){return e},e}function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var u=r(6287),s=r(2523),c=r(8612),l={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:function(e){var t=e.params;return u.str(i(),t.ifClause)},params:function(e){var t=e.params;return u._(o(),t.ifClause)}},code:function(e){var t=e.gen,r=e.parentSchema,o=e.it;void 0===r.then&&void 0===r.else&&c.checkStrictMode(o,'"if" without "then" and "else" is ignored');var i=f(o,"then"),a=f(o,"else");if(i||a){var s,l=t.let("valid",!0),h=t.name("_valid");if(s=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},h),e.mergeEvaluated(s),e.reset(),i&&a){var p=t.let("ifClause");e.setParams({ifClause:p}),t.if(h,d("then",p),d("else",p))}else i?t.if(h,d("then")):t.if(u.not(h),d("else"));e.pass(l,(function(){return e.error(!0)}))}function d(r,o){return function(){var i=e.subschema({keyword:r},h);t.assign(l,h),e.mergeValidEvaluated(i,l),o?t.assign(o,u._(n(),r)):e.setParams({ifClause:r})}}}};function f(e,t){var r=e.schema[t];return void 0!==r&&!s.alwaysValidSchema(e,r)}t.default=l},2964:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5461),o=r(6691),i=r(7688),a=r(7015),u=r(1638),s=r(1366),c=r(3847),l=r(9335),f=r(2883),h=r(9152),p=r(3370),d=r(2698),y=r(6868),m=r(9976),v=[f.default,h.default,p.default,d.default,y.default,m.default,n.default,o.default,i.default,u.default,s.default,a.default,c.default,l.default];t.default=v},6691:(e,t,r)=>{"use strict";function n(){var e=i([""," > ",""]);return n=function(){return e},e}function o(){var e=i(["",".length"]);return o=function(){return e},e}function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var a=r(6287),u=r(257),s=r(2523),c=r(8612),l={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code:function(e){var t,r=e.gen,i=e.schema,l=e.parentSchema,f=e.data,h=e.it,p=r.const("len",a._(o(),f));Array.isArray(i)?(h.opts.unevaluated&&i.length&&!0!==h.items&&(h.items=s.mergeEvaluated.items(r,i.length,h.items)),function(t){if(h.opts.strictTuples&&!function(e,t){return e===t.minItems&&(e===t.maxItems||!1===t.additionalItems)}(i.length,l)){var o='"items" is '.concat(t.length,"-tuple, but minItems or maxItems/additionalItems are not specified or different");c.checkStrictMode(h,o,h.opts.strictTuples)}var u=r.name("valid");t.forEach((function(t,o){s.alwaysValidSchema(h,t)||(r.if(a._(n(),p,o),(function(){return e.subschema({keyword:"items",schemaProp:o,dataProp:o,strictSchema:h.strictSchema},u)})),e.ok(u))}))}(i)):(h.items=!0,s.alwaysValidSchema(h,i)||(t=r.name("valid"),r.forRange("i",0,p,(function(n){e.subschema({keyword:"items",dataProp:n,dataPropType:u.Type.Num,strictSchema:h.strictSchema},t),h.allErrors||r.if(a.not(t),(function(){return r.break()}))})),e.ok(t)))}};t.default=l},2883:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2523),o={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code:function(e){var t=e.gen,r=e.schema,o=e.it;if(n.alwaysValidSchema(o,r))e.fail();else{var i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.result(i,(function(){return e.error()}),(function(){return e.reset()}))}},error:{message:"should NOT be valid"}};t.default=o},3370:(e,t,r)=>{"use strict";function n(){var e=a(["[",", ","]"]);return n=function(){return e},e}function o(){var e=a([""," && ",""]);return o=function(){return e},e}function i(){var e=a(["{passingSchemas: ","}"]);return i=function(){return e},e}function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var u=r(6287),s=r(2523),c={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"should match exactly one schema in oneOf",params:function(e){var t=e.params;return u._(i(),t.passing)}},code:function(e){var t=e.gen,r=e.schema,i=e.it;if(!Array.isArray(r))throw new Error("ajv implementation error");var a=r,c=t.let("valid",!1),l=t.let("passing",null),f=t.name("_valid");e.setParams({passing:l}),t.block((function(){a.forEach((function(r,a){var h;s.alwaysValidSchema(i,r)?t.var(f,!0):h=e.subschema({keyword:"oneOf",schemaProp:a,compositeRule:!0},f),a>0&&t.if(u._(o(),f,c)).assign(c,!1).assign(l,u._(n(),l,a)).else(),t.if(f,(function(){t.assign(c,!0),t.assign(l,a),h&&e.mergeEvaluated(h,u.Name)}))}))})),e.result(c,(function(){return e.reset()}),(function(){return e.error(!0)}))}};t.default=c},9335:(e,t,r)=>{"use strict";function n(){var e=i(["","[","]"]);return n=function(){return e},e}function o(){var e=i(["",".test(",")"]);return o=function(){return e},e}function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0});var u=r(1301),s=r(6287),c=r(257),l=r(8612),f=r(2523),h={keyword:"patternProperties",type:"object",schemaType:"object",code:function(e){var t=e.gen,r=e.schema,i=e.data,h=e.parentSchema,p=e.it,d=p.opts,y=u.schemaProperties(p,r);if(0!==y.length){var m=d.strict&&!d.allowMatchingProperties&&h.properties,v=t.name("valid");!0===p.props||p.props instanceof s.Name||(p.props=f.evaluatedPropsToName(t,p.props));var _=p.props;!function(){var e,r=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw i}}}}(y);try{for(r.s();!(e=r.n()).done;){var n=e.value;m&&b(n),p.allErrors?g(n):(t.var(v,!0),g(n),t.if(v))}}catch(e){r.e(e)}finally{r.f()}}()}function b(e){for(var t in m)new RegExp(e).test(t)&&l.checkStrictMode(p,"property ".concat(t," matches pattern ").concat(e," (use allowMatchingProperties)"))}function g(r){t.forIn("key",i,(function(i){t.if(s._(o(),u.usePattern(t,r),i),(function(){e.subschema({keyword:"patternProperties",schemaProp:r,dataProp:i,dataPropType:c.Type.Str,strictSchema:p.strictSchema},v),p.opts.unevaluated&&!0!==_?t.assign(s._(n(),_,i),!0):p.allErrors||t.if(s.not(v),(function(){return t.break()}))}))}))}}};t.default=h},3847:(e,t,r)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0});var o=r(2946),i=r(1301),a=r(2523),u=r(1366),s={keyword:"properties",type:"object",schemaType:"object",code:function(e){var t=e.gen,r=e.schema,s=e.parentSchema,c=e.data,l=e.it;"all"===l.opts.removeAdditional&&void 0===s.additionalProperties&&u.default.code(new o.default(l,u.default,"additionalProperties"));var f=i.allSchemaProperties(r);l.opts.unevaluated&&f.length&&!0!==l.props&&(l.props=a.mergeEvaluated.props(t,a.toHash(f),l.props));var h=f.filter((function(e){return!a.alwaysValidSchema(l,r[e])}));if(0!==h.length){var p,d=t.name("valid"),y=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw a}}}}(h);try{for(y.s();!(p=y.n()).done;){var m=p.value;v(m)?_(m):(t.if(i.propertyInData(c,m,l.opts.ownProperties)),_(m),l.allErrors||t.else().var(d,!0),t.endIf()),e.ok(d)}}catch(e){y.e(e)}finally{y.f()}}function v(e){return l.opts.useDefaults&&!l.compositeRule&&void 0!==r[e].default}function _(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t,strictSchema:l.strictSchema},d)}}};t.default=s},1638:(e,t,r)=>{"use strict";function n(){var e=i(["{propertyName: ","}"]);return n=function(){return e},e}function o(){var e=i(["property name '","' is invalid"]);return o=function(){return e},e}function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var a=r(6287),u=r(2523),s={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:function(e){var t=e.params;return a.str(o(),t.propertyName)},params:function(e){var t=e.params;return a._(n(),t.propertyName)}},code:function(e){var t=e.gen,r=e.schema,n=e.data,o=e.it;if(!u.alwaysValidSchema(o,r)){var i=t.name("valid");t.forIn("key",n,(function(r){e.setParams({propertyName:r}),e.subschema({keyword:"propertyNames",data:r,dataTypes:["string"],propertyName:r,compositeRule:!0,strictSchema:o.strictSchema},i),t.if(a.not(i),(function(){e.error(!0),o.allErrors||t.break()}))})),e.ok(i)}}};t.default=s},9976:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8612),o={keyword:["then","else"],schemaType:["object","boolean"],code:function(e){var t=e.keyword,r=e.parentSchema,o=e.it;void 0===r.if&&n.checkStrictMode(o,'"'.concat(t,'" without "if" is ignored'))}};t.default=o},1301:(e,t,r)=>{"use strict";function n(){var e=m(["new RegExp(",', "u")']);return n=function(){return e},e}function o(){var e=m(["","(",")"]);return o=function(){return e},e}function i(){var e=m(["",".call(",", ",")"]);return i=function(){return e},e}function a(){var e=m(["",", ",""]);return a=function(){return e},e}function u(){var e=m(["",", ",", ","",""]);return u=function(){return e},e}function s(){var e=m([""," || !",""]);return s=function(){return e},e}function c(){var e=m(["",""," === undefined"]);return c=function(){return e},e}function l(){var e=m([""," && ",""]);return l=function(){return e},e}function f(){var e=m(["",""," !== undefined"]);return f=function(){return e},e}function h(){var e=m(["Object.prototype.hasOwnProperty.call(",", ",")"]);return h=function(){return e},e}function p(){var e=m([""," && ("," = ",")"]);return p=function(){return e},e}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(){var e=m(["",""]);return y=function(){return e},e}function m(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;var v=r(6287),_=r(2523),b=r(1418);function g(e,t){return v._(h(),e,t)}function w(e,t,r){var n=v._(c(),e,v.getProperty(t));return r?v._(s(),n,g(e,t)):n}function k(e){return e?Object.keys(e).filter((function(e){return"__proto__"!==e})):[]}t.checkReportMissingProp=function(e,t){var r=e.gen,n=e.data,o=e.it;r.if(w(n,t,o.opts.ownProperties),(function(){e.setParams({missingProperty:v._(y(),t)},!0),e.error()}))},t.checkMissingProp=function(e,t,r){var n,o=e.data,i=e.it.opts;return v.or.apply(v,function(e){if(Array.isArray(e))return d(e)}(n=t.map((function(e){return v._(p(),w(o,e,i.ownProperties),r,e)})))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.propertyInData=function(e,t,r){var n=v._(f(),e,v.getProperty(t));return r?v._(l(),n,g(e,t)):n},t.noPropertyInData=w,t.allSchemaProperties=k,t.schemaProperties=function(e,t){return k(t).filter((function(r){return!_.alwaysValidSchema(e,t[r])}))},t.callValidateCode=function(e,t,r,n){var s=e.schemaCode,c=e.data,l=e.it,f=l.gen,h=l.topSchemaRef,p=l.schemaPath,d=l.errorPath,y=e.it,m=n?v._(u(),s,c,h,p):c,_=[[b.default.dataPath,v.strConcat(b.default.dataPath,d)],[b.default.parentData,y.parentData],[b.default.parentDataProperty,y.parentDataProperty],[b.default.rootData,b.default.rootData]];y.opts.dynamicRef&&_.push([b.default.dynamicAnchors,b.default.dynamicAnchors]);var g=v._(a(),m,f.object.apply(f,_));return r!==v.nil?v._(i(),t,r,g):v._(o(),t,g)},t.usePattern=function(e,t){return e.scopeValue("pattern",{key:t,ref:new RegExp(t,"u"),code:v._(n(),t)})}},2905:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={keyword:"id",code:function(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=r},6909:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2905),o=r(3512),i=["$schema","$id","$defs","$vocabulary","definitions",n.default,o.default];t.default=i},3512:(e,t,r)=>{"use strict";function n(){var e=h(["",".evaluated.items"]);return n=function(){return e},e}function o(){var e=h(["",".evaluated.props"]);return o=function(){return e},e}function i(){var e=h(["",".length"]);return i=function(){return e},e}function a(){var e=h([""," === null ? "," : ",".concat(",")"]);return a=function(){return e},e}function u(){var e=h(["",".errors"]);return u=function(){return e},e}function s(){var e=h(["!("," instanceof ",")"]);return s=function(){return e},e}function c(){var e=h(["await ",""]);return c=function(){return e},e}function l(){var e=h(["",".validate"]);return l=function(){return e},e}function f(){var e=h(["",".validate"]);return f=function(){return e},e}function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;var p=r(328),d=r(1301),y=r(6287),m=r(1418),v=r(6678),_=r(2523),b={keyword:"$ref",schemaType:"string",code:function(e){var t=e.gen,r=e.schema,n=e.it,o=n.baseId,i=n.schemaEnv,a=n.validateName,u=n.opts,s=n.self;if("#"===r||"#/"===r)return function(){if(i===i.root)return w(e,a,i,i.$async);var r=t.scopeValue("root",{ref:i.root});return w(e,y._(f(),r),i.root,i.root.$async)}();var c,l,h=v.resolveRef.call(s,i.root,o,r);if(void 0===h)throw new p.MissingRefError(o,r);return h instanceof v.SchemaEnv?(l=g(e,c=h),void w(e,l,c,c.$async)):function(n){var o=t.scopeValue("schema",!0===u.code.source?{ref:n,code:y.stringify(n)}:{ref:n}),i=t.name("valid"),a=e.subschema({schema:n,strictSchema:!0,dataTypes:[],schemaPath:y.nil,topSchemaRef:o,errSchemaPath:r},i);e.mergeEvaluated(a),e.ok(i)}(h)}};function g(e,t){var r=e.gen;return t.validate?r.scopeValue("validate",{ref:t.validate}):y._(l(),r.scopeValue("wrapper",{ref:t}))}function w(e,t,r,l){var f=e.gen,h=e.it,p=h.allErrors,v=h.schemaEnv,b=h.opts.passContext?m.default.this:y.nil;function g(e){var t=y._(u(),e);f.assign(m.default.vErrors,y._(a(),m.default.vErrors,t,m.default.vErrors,t)),f.assign(m.default.errors,y._(i(),m.default.vErrors))}function w(e){var t;if(h.opts.unevaluated){var i=null===(t=null==r?void 0:r.validate)||void 0===t?void 0:t.evaluated;if(!0!==h.props)if(i&&!i.dynamicProps)void 0!==i.props&&(h.props=_.mergeEvaluated.props(f,i.props,h.props));else{var a=f.var("props",y._(o(),e));h.props=_.mergeEvaluated.props(f,a,h.props,y.Name)}if(!0!==h.items)if(i&&!i.dynamicItems)void 0!==i.items&&(h.items=_.mergeEvaluated.items(f,i.items,h.items));else{var u=f.var("items",y._(n(),e));h.items=_.mergeEvaluated.items(f,u,h.items,y.Name)}}}l?function(){if(!v.$async)throw new Error("async schema referenced by sync schema");var r=f.let("valid");f.try((function(){f.code(y._(c(),d.callValidateCode(e,t,b))),w(t),p||f.assign(r,!0)}),(function(e){f.if(y._(s(),e,h.ValidationError),(function(){return f.throw(e)})),g(e),p||f.assign(r,!1)})),e.ok(r)}():e.result(d.callValidateCode(e,t,b),(function(){return w(t)}),(function(){return g(t)}))}t.getValidate=g,t.callRef=w,t.default=b},3501:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6909),o=r(6735),i=r(2964),a=r(3781),u=r(7884),s=[n.default,o.default,i.default,a.default,u.metadataVocabulary,u.contentVocabulary];t.default=s},6510:(e,t,r)=>{"use strict";function n(){var e=k(["",".test(",")"]);return n=function(){return e},e}function o(){var e=k(["","(",")"]);return o=function(){return e},e}function i(){var e=k(["await ","(",")"]);return i=function(){return e},e}function a(){var e=k(["",".validate"]);return a=function(){return e},e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){var e=k(["","",""]);return s=function(){return e},e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(){var e=k([""," && "," !== true && "," === "," && !",""]);return l=function(){return e},e}function f(){var e=k(["(typeof ",' == "function" ? '," : ",".test(","))"]);return f=function(){return e},e}function h(){var e=k(["","(",")"]);return h=function(){return e},e}function p(){var e=k(["(",".async ? await ","(",") : ","(","))"]);return p=function(){return e},e}function d(){var e=k([""," && !",""]);return d=function(){return e},e}function y(){var e=k(['"string"']);return y=function(){return e},e}function m(){var e=k(["",".validate"]);return m=function(){return e},e}function v(){var e=k(["",'.type || "string"']);return v=function(){return e},e}function _(){var e=k(["typeof ",' == "object" && !('," instanceof RegExp)"]);return _=function(){return e},e}function b(){var e=k(["","[","]"]);return b=function(){return e},e}function g(){var e=k(["{format: ","}"]);return g=function(){return e},e}function w(){var e=k(['should match format "','"']);return w=function(){return e},e}function k(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var S=r(6287),O={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:function(e){var t=e.schemaCode;return S.str(w(),t)},params:function(e){var t=e.schemaCode;return S._(g(),t)}},code:function(e,t){var r,g,w,k,O,P,j=e.gen,x=e.data,E=e.$data,C=e.schema,T=e.schemaCode,R=e.it,A=R.opts,D=R.errSchemaPath,M=R.schemaEnv,N=R.self;A.validateFormats&&(E?(r=j.scopeValue("formats",{ref:N.formats,code:A.code.formats}),g=j.const("fDef",S._(b(),r,T)),w=j.let("fType"),k=j.let("format"),j.if(S._(_(),g,g),(function(){return j.assign(w,S._(v(),g)).assign(k,S._(m(),g))}),(function(){return j.assign(w,S._(y())).assign(k,g)})),e.fail$data(S.or(!1===A.strict?S.nil:S._(d(),T,k),(O=M.$async?S._(p(),g,k,x,k,x):S._(h(),k,x),P=S._(f(),k,O,k,x),S._(l(),k,k,w,t,P))))):function(){var r=N.formats[C];if(r){if(!0!==r){var l,f,h,p,d=(h=r,p=j.scopeValue("formats",{key:C,ref:h,code:A.code.formats?S._(s(),A.code.formats,S.getProperty(C)):void 0}),l="object"!=u(h)||h instanceof RegExp?["string",h,p]:[h.type||"string",h.validate,S._(a(),p)],f=3,function(e){if(Array.isArray(e))return e}(l)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}}(l,f)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(l,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=d[0],m=d[1],v=d[2];y===t&&e.pass(function(){if("object"==u(r)&&!(r instanceof RegExp)&&r.async){if(!M.$async)throw new Error("async format in sync schema");return S._(i(),v,x)}return"function"==typeof m?S._(o(),v,x):S._(n(),v,x)}())}}else!function(){if(!1!==A.strict)throw new Error(e());function e(){return'unknown format "'.concat(C,'" ignored in schema at path "').concat(D,'"')}N.logger.warn(e())}()}())}};t.default=O},3781:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=[r(6510).default];t.default=n},7884:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},2560:(e,t,r)=>{"use strict";function n(){var e=a(["!","(",", ",")"]);return n=function(){return e},e}function o(){var e=a(['require("ajv/dist/compile/equal")']);return o=function(){return e},e}function i(){var e=a(["{allowedValue: ","}"]);return i=function(){return e},e}function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var u=r(6287),s=r(3094),c={keyword:"const",$data:!0,error:{message:"should be equal to constant",params:function(e){var t=e.schemaCode;return u._(i(),t)}},code:function(e){var t=e.gen.scopeValue("func",{ref:s,code:u._(o())});e.fail$data(u._(n(),t,e.data,e.schemaCode))}};t.default=c},274:(e,t,r)=>{"use strict";function n(){var e=l([""," === ",""]);return n=function(){return e},e}function o(){var e=l(["","(",", ","[","])"]);return o=function(){return e},e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){var e=l(["","(",", ",")"]);return a=function(){return e},e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(){var e=l(['require("ajv/dist/compile/equal")']);return s=function(){return e},e}function c(){var e=l(["{allowedValues: ","}"]);return c=function(){return e},e}function l(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var f=r(6287),h=r(3094),p={keyword:"enum",schemaType:"array",$data:!0,error:{message:"should be equal to one of the allowed values",params:function(e){var t=e.schemaCode;return f._(c(),t)}},code:function(e){var t=e.gen,r=e.data,c=e.$data,l=e.schema,p=e.schemaCode,d=e.it;if(!c&&0===l.length)throw new Error("enum must have non-empty array");var y,m,v=l.length>=d.opts.loopEnum,_=e.gen.scopeValue("func",{ref:h,code:f._(s())});if(v||c)y=t.let("valid"),e.block$data(y,(function(){t.assign(y,!1),t.forOf("v",p,(function(e){return t.if(f._(a(),_,r,e),(function(){return t.assign(y,!0).break()}))}))}));else{if(!Array.isArray(l))throw new Error("ajv implementation error");var b=t.const("vSchema",p);y=f.or.apply(f,function(e){if(Array.isArray(e))return u(e)}(m=l.map((function(e,t){return function(e,t){var a=l[t];return a&&"object"===i(a)?f._(o(),_,r,e,t):f._(n(),r,a)}(b,t)})))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(m)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}e.pass(y)}};t.default=p},6735:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2982),o=r(4316),i=r(6961),a=r(6081),u=r(6087),s=r(3823),c=r(9109),l=r(7808),f=r(2560),h=r(274),p=[n.default,o.default,i.default,a.default,u.default,s.default,c.default,l.default,{keyword:"nullable",schemaType:"boolean"},f.default,h.default];t.default=p},9109:(e,t,r)=>{"use strict";function n(){var e=a(["",".length "," ",""]);return n=function(){return e},e}function o(){var e=a(["{limit: ","}"]);return o=function(){return e},e}function i(){var e=a(["should NOT have "," than "," items"]);return i=function(){return e},e}function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var u=r(6287),s={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:function(e){var t=e.keyword,r=e.schemaCode,n="maxItems"===t?"more":"fewer";return u.str(i(),n,r)},params:function(e){var t=e.schemaCode;return u._(o(),t)}},code:function(e){var t=e.keyword,r=e.data,o=e.schemaCode,i="maxItems"===t?u.operators.GT:u.operators.LT;e.fail$data(u._(n(),r,i,o))}};t.default=s},6961:(e,t,r)=>{"use strict";function n(){var e=c([""," "," ",""]);return n=function(){return e},e}function o(){var e=c(["","(",")"]);return o=function(){return e},e}function i(){var e=c(['require("ajv/dist/compile/ucs2length").default']);return i=function(){return e},e}function a(){var e=c(["",".length"]);return a=function(){return e},e}function u(){var e=c(["{limit: ","}"]);return u=function(){return e},e}function s(){var e=c(["should NOT have "," than "," characters"]);return s=function(){return e},e}function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var l=r(6287),f=r(4447),h={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:function(e){var t=e.keyword,r=e.schemaCode,n="maxLength"===t?"more":"fewer";return l.str(s(),n,r)},params:function(e){var t=e.schemaCode;return l._(u(),t)}},code:function(e){var t,r=e.keyword,u=e.data,s=e.schemaCode,c=e.it,h="maxLength"===r?l.operators.GT:l.operators.LT;if(!1===c.opts.unicode)t=l._(a(),u);else{var p=e.gen.scopeValue("func",{ref:f.default,code:l._(i())});t=l._(o(),p,u)}e.fail$data(l._(n(),t,h,s))}};t.default=h},2982:(e,t,r)=>{"use strict";function n(){var e=a([""," "," "," || isNaN(",")"]);return n=function(){return e},e}function o(){var e=a(["{comparison: ",", limit: ","}"]);return o=function(){return e},e}function i(){var e=a(["should be "," ",""]);return i=function(){return e},e}function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var u=r(6287),s=u.operators,c={maximum:{okStr:"<=",ok:s.LTE,fail:s.GT},minimum:{okStr:">=",ok:s.GTE,fail:s.LT},exclusiveMaximum:{okStr:"<",ok:s.LT,fail:s.GTE},exclusiveMinimum:{okStr:">",ok:s.GT,fail:s.LTE}},l={message:function(e){var t=e.keyword,r=e.schemaCode;return u.str(i(),c[t].okStr,r)},params:function(e){var t=e.keyword,r=e.schemaCode;return u._(o(),c[t].okStr,r)}},f={keyword:Object.keys(c),type:"number",schemaType:"number",$data:!0,error:l,code:function(e){var t=e.keyword,r=e.data,o=e.schemaCode;e.fail$data(u._(n(),r,c[t].fail,o,r))}};t.default=f},6087:(e,t,r)=>{"use strict";function n(){var e=a(["Object.keys(",").length "," ",""]);return n=function(){return e},e}function o(){var e=a(["{limit: ","}"]);return o=function(){return e},e}function i(){var e=a(["should NOT have "," than "," items"]);return i=function(){return e},e}function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var u=r(6287),s={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:function(e){var t=e.keyword,r=e.schemaCode,n="maxProperties"===t?"more":"fewer";return u.str(i(),n,r)},params:function(e){var t=e.schemaCode;return u._(o(),t)}},code:function(e){var t=e.keyword,r=e.data,o=e.schemaCode,i="maxProperties"===t?u.operators.GT:u.operators.LT;e.fail$data(u._(n(),r,i,o))}};t.default=s},4316:(e,t,r)=>{"use strict";function n(){var e=s(["("," === 0 || ("," = ","/",", ","))"]);return n=function(){return e},e}function o(){var e=s([""," !== parseInt(",")"]);return o=function(){return e},e}function i(){var e=s(["Math.abs(Math.round(",") - ",") > 1e-",""]);return i=function(){return e},e}function a(){var e=s(["{multipleOf: ","}"]);return a=function(){return e},e}function u(){var e=s(["should be multiple of ",""]);return u=function(){return e},e}function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var c=r(6287),l={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:function(e){var t=e.schemaCode;return c.str(u(),t)},params:function(e){var t=e.schemaCode;return c._(a(),t)}},code:function(e){var t=e.gen,r=e.data,a=e.schemaCode,u=e.it.opts.multipleOfPrecision,s=t.let("res"),l=u?c._(i(),s,s,u):c._(o(),s,s);e.fail$data(c._(n(),a,s,r,a,l))}};t.default=l},6081:(e,t,r)=>{"use strict";function n(){var e=u(["!",".test(",")"]);return n=function(){return e},e}function o(){var e=u(["(new RegExp(",', "u"))']);return o=function(){return e},e}function i(){var e=u(["{pattern: ","}"]);return i=function(){return e},e}function a(){var e=u(['should match pattern "','"']);return a=function(){return e},e}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var s=r(1301),c=r(6287),l={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:function(e){var t=e.schemaCode;return c.str(a(),t)},params:function(e){var t=e.schemaCode;return c._(i(),t)}},code:function(e){var t=e.gen,r=e.data,i=e.$data,a=e.schema,u=e.schemaCode,l=i?c._(o(),u):s.usePattern(t,a);e.fail$data(c._(n(),l,r))}};t.default=l},3823:(e,t,r)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(){var e=a(["{missingProperty: ","}"]);return o=function(){return e},e}function i(){var e=a(["should have required property '","'"]);return i=function(){return e},e}function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var u=r(1301),s=r(6287),c={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:function(e){var t=e.params.missingProperty;return s.str(i(),t)},params:function(e){var t=e.params.missingProperty;return s._(o(),t)}},code:function(e){var t=e.gen,r=e.schema,o=e.schemaCode,i=e.data,a=e.$data,c=e.it,l=c.opts;if(a||0!==r.length){var f=r.length>=l.loopRequired;c.allErrors?function(){if(f||a)e.block$data(s.nil,h);else{var t,o=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw a}}}}(r);try{for(o.s();!(t=o.n()).done;){var i=t.value;u.checkReportMissingProp(e,i)}}catch(e){o.e(e)}finally{o.f()}}}():function(){var n=t.let("missing");if(f||a){var c=t.let("valid",!0);e.block$data(c,(function(){return function(r,n){e.setParams({missingProperty:r}),t.forOf(r,o,(function(){t.assign(n,u.propertyInData(i,r,l.ownProperties)),t.if(s.not(n),(function(){e.error(),t.break()}))}),s.nil)}(n,c)})),e.ok(c)}else t.if(u.checkMissingProp(e,r,n)),u.reportMissingProp(e,n),t.else()}()}function h(){t.forOf("prop",o,(function(r){e.setParams({missingProperty:r}),t.if(u.noPropertyInData(i,r,l.ownProperties),(function(){return e.error()}))}))}}};t.default=c},7808:(e,t,r)=>{"use strict";function n(){var e=w(["","(","[","], ","[","])"]);return n=function(){return e},e}function o(){var e=w([""," = ","; ","--;"]);return o=function(){return e},e}function i(){var e=w([";","--;"]);return i=function(){return e},e}function a(){var e=w(['require("ajv/dist/compile/equal")']);return a=function(){return e},e}function u(){var e=w(["","[","] = ",""]);return u=function(){return e},e}function s(){var e=w(["","[","]"]);return s=function(){return e},e}function c(){var e=w(["typeof ","[",'] == "number"']);return c=function(){return e},e}function l(){var e=w(["",' += "_"']);return l=function(){return e},e}function f(){var e=w(["typeof ",' == "string"']);return f=function(){return e},e}function h(){var e=w(["continue"]);return h=function(){return e},e}function p(){var e=w(["","[","]"]);return p=function(){return e},e}function d(){var e=w([";","--;"]);return d=function(){return e},e}function y(){var e=w(["{}"]);return y=function(){return e},e}function m(){var e=w([""," > 1"]);return m=function(){return e},e}function v(){var e=w(["",".length"]);return v=function(){return e},e}function _(){var e=w([""," === false"]);return _=function(){return e},e}function b(){var e=w(["{i: ",", j: ","}"]);return b=function(){return e},e}function g(){var e=w(["should NOT have duplicate items (items ## "," and "," are identical)"]);return g=function(){return e},e}function w(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var k=r(4771),S=r(6287),O=r(3094),P={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:function(e){var t=e.params,r=t.i,n=t.j;return S.str(g(),n,r)},params:function(e){var t=e.params,r=t.i,n=t.j;return S._(b(),r,n)}},code:function(e){var t=e.gen,r=e.data,b=e.$data,g=e.schema,w=e.parentSchema,P=e.schemaCode,j=e.it;if(b||g){var x=t.let("valid"),E=w.items?k.getSchemaTypes(w.items):[];e.block$data(x,(function(){var n=t.let("i",S._(v(),r)),o=t.let("j");e.setParams({i:n,j:o}),t.assign(x,!0),t.if(S._(m(),n),(function(){return(E.length>0&&!E.some((function(e){return"object"===e||"array"===e}))?C:T)(n,o)}))}),S._(_(),P)),e.ok(x)}function C(n,o){var i=t.name("item"),a=k.checkDataTypes(E,i,j.opts.strict,k.DataType.Wrong),m=t.const("indices",S._(y()));t.for(S._(d(),n),(function(){t.let(i,S._(p(),r,n)),t.if(a,S._(h())),E.length>1&&t.if(S._(f(),i),S._(l(),i)),t.if(S._(c(),m,i),(function(){t.assign(o,S._(s(),m,i)),e.error(),t.assign(x,!1).break()})).code(S._(u(),m,i,n))}))}function T(u,s){var c=e.gen.scopeValue("func",{ref:O,code:S._(a())}),l=t.name("outer");t.label(l).for(S._(i(),u),(function(){return t.for(S._(o(),s,u,s),(function(){return t.if(S._(n(),c,r,u,r,s),(function(){e.error(),t.assign(x,!1).break(l)}))}))}))}}};t.default=P},3094:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function e(r,n){if(r===n)return!0;if(r&&n&&"object"==t(r)&&"object"==t(n)){if(r.constructor!==n.constructor)return!1;var o,i,a;if(Array.isArray(r)){if((o=r.length)!=n.length)return!1;for(i=o;0!=i--;)if(!e(r[i],n[i]))return!1;return!0}if(r.constructor===RegExp)return r.source===n.source&&r.flags===n.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===n.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===n.toString();if((o=(a=Object.keys(r)).length)!==Object.keys(n).length)return!1;for(i=o;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=o;0!=i--;){var u=a[i];if(!e(r[u],n[u]))return!1}return!0}return r!=r&&n!=n}},4929:e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),n(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function n(e,o,i,a,u,s,c,l,f,h){if(a&&"object"==t(a)&&!Array.isArray(a)){for(var p in o(a,u,s,c,l,f,h),a){var d=a[p];if(Array.isArray(d)){if(p in r.arrayKeywords)for(var y=0;y<d.length;y++)n(e,o,i,d[y],u+"/"+p+"/"+y,s,u,p,a,y)}else if(p in r.propsKeywords){if(d&&"object"==t(d))for(var m in d)n(e,o,i,d[m],u+"/"+p+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),s,u,p,a,m)}else(p in r.keywords||e.allKeys&&!(p in r.skipKeywords))&&n(e,o,i,d,u+"/"+p,s,u,p,a)}i(a,u,s,c,l,f,h)}}r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},9095:function(e,t,r){var n,o;!function(i,a){"use strict";void 0===(o="function"==typeof(n=function(){var e={};function t(e,t){this.x=e||0,this.y=t||0}function r(e,r){this.pos=e||new t,this.r=r||0,this.offset=new t}function n(e,r){this.pos=e||new t,this.angle=0,this.offset=new t,this.setPoints(r||[])}function o(e,r,n){this.pos=e||new t,this.w=r||0,this.h=n||0}function i(){this.a=null,this.b=null,this.overlapN=new t,this.overlapV=new t,this.clear()}e.Vector=t,e.V=t,t.prototype.copy=t.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},t.prototype.clone=t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.perp=t.prototype.perp=function(){var e=this.x;return this.x=this.y,this.y=-e,this},t.prototype.rotate=t.prototype.rotate=function(e){var t=this.x,r=this.y;return this.x=t*Math.cos(e)-r*Math.sin(e),this.y=t*Math.sin(e)+r*Math.cos(e),this},t.prototype.reverse=t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.normalize=t.prototype.normalize=function(){var e=this.len();return e>0&&(this.x=this.x/e,this.y=this.y/e),this},t.prototype.add=t.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},t.prototype.sub=t.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},t.prototype.scale=t.prototype.scale=function(e,t){return this.x*=e,this.y*=void 0!==t?t:e,this},t.prototype.project=t.prototype.project=function(e){var t=this.dot(e)/e.len2();return this.x=t*e.x,this.y=t*e.y,this},t.prototype.projectN=t.prototype.projectN=function(e){var t=this.dot(e);return this.x=t*e.x,this.y=t*e.y,this},t.prototype.reflect=t.prototype.reflect=function(e){var t=this.x,r=this.y;return this.project(e).scale(2),this.x-=t,this.y-=r,this},t.prototype.reflectN=t.prototype.reflectN=function(e){var t=this.x,r=this.y;return this.projectN(e).scale(2),this.x-=t,this.y-=r,this},t.prototype.dot=t.prototype.dot=function(e){return this.x*e.x+this.y*e.y},t.prototype.len2=t.prototype.len2=function(){return this.dot(this)},t.prototype.len=t.prototype.len=function(){return Math.sqrt(this.len2())},e.Circle=r,r.prototype.getAABB=r.prototype.getAABB=function(){var e=this.r;return new o(this.pos.clone().add(this.offset).sub(new t(e,e)),2*e,2*e).toPolygon()},r.prototype.setOffset=r.prototype.setOffset=function(e){return this.offset=e,this},e.Polygon=n,n.prototype.setPoints=n.prototype.setPoints=function(e){if(!this.points||this.points.length!==e.length){var r,n=this.calcPoints=[],o=this.edges=[],i=this.normals=[];for(r=0;r<e.length;r++){var a=e[r],u=r<e.length-1?e[r+1]:e[0];a===u||a.x!==u.x||a.y!==u.y?(n.push(new t),o.push(new t),i.push(new t)):(e.splice(r,1),r-=1)}}return this.points=e,this._recalc(),this},n.prototype.setAngle=n.prototype.setAngle=function(e){return this.angle=e,this._recalc(),this},n.prototype.setOffset=n.prototype.setOffset=function(e){return this.offset=e,this._recalc(),this},n.prototype.rotate=n.prototype.rotate=function(e){for(var t=this.points,r=t.length,n=0;n<r;n++)t[n].rotate(e);return this._recalc(),this},n.prototype.translate=n.prototype.translate=function(e,t){for(var r=this.points,n=r.length,o=0;o<n;o++)r[o].x+=e,r[o].y+=t;return this._recalc(),this},n.prototype._recalc=function(){var e,t=this.calcPoints,r=this.edges,n=this.normals,o=this.points,i=this.offset,a=this.angle,u=o.length;for(e=0;e<u;e++){var s=t[e].copy(o[e]);s.x+=i.x,s.y+=i.y,0!==a&&s.rotate(a)}for(e=0;e<u;e++){var c=t[e],l=e<u-1?t[e+1]:t[0],f=r[e].copy(l).sub(c);n[e].copy(f).perp().normalize()}return this},n.prototype.getAABB=n.prototype.getAABB=function(){for(var e=this.calcPoints,r=e.length,n=e[0].x,i=e[0].y,a=e[0].x,u=e[0].y,s=1;s<r;s++){var c=e[s];c.x<n?n=c.x:c.x>a&&(a=c.x),c.y<i?i=c.y:c.y>u&&(u=c.y)}return new o(this.pos.clone().add(new t(n,i)),a-n,u-i).toPolygon()},n.prototype.getCentroid=n.prototype.getCentroid=function(){for(var e=this.calcPoints,r=e.length,n=0,o=0,i=0,a=0;a<r;a++){var u=e[a],s=a===r-1?e[0]:e[a+1],c=u.x*s.y-s.x*u.y;n+=(u.x+s.x)*c,o+=(u.y+s.y)*c,i+=c}return new t(n/=i*=3,o/=i)},e.Box=o,o.prototype.toPolygon=o.prototype.toPolygon=function(){var e=this.pos,r=this.w,o=this.h;return new n(new t(e.x,e.y),[new t,new t(r,0),new t(r,o),new t(0,o)])},e.Response=i,i.prototype.clear=i.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var a=[],u=0;u<10;u++)a.push(new t);var s=[];for(u=0;u<5;u++)s.push([]);var c=new i,l=new o(new t,1e-6,1e-6).toPolygon();function f(e,t,r){for(var n=Number.MAX_VALUE,o=-Number.MAX_VALUE,i=e.length,a=0;a<i;a++){var u=e[a].dot(t);u<n&&(n=u),u>o&&(o=u)}r[0]=n,r[1]=o}function h(e,t,r,n,o,i){var u=s.pop(),c=s.pop(),l=a.pop().copy(t).sub(e),h=l.dot(o);if(f(r,o,u),f(n,o,c),c[0]+=h,c[1]+=h,u[0]>c[1]||c[0]>u[1])return a.push(l),s.push(u),s.push(c),!0;if(i){var p,d,y=0;u[0]<c[0]?(i.aInB=!1,u[1]<c[1]?(y=u[1]-c[0],i.bInA=!1):y=(p=u[1]-c[0])<(d=c[1]-u[0])?p:-d):(i.bInA=!1,u[1]>c[1]?(y=u[0]-c[1],i.aInB=!1):y=(p=u[1]-c[0])<(d=c[1]-u[0])?p:-d);var m=Math.abs(y);m<i.overlap&&(i.overlap=m,i.overlapN.copy(o),y<0&&i.overlapN.reverse())}return a.push(l),s.push(u),s.push(c),!1}function p(e,t){var r=e.len2(),n=t.dot(e);return n<0?d:n>r?m:y}e.isSeparatingAxis=h;var d=-1,y=0,m=1;function v(e,t,r){for(var n=a.pop().copy(t.pos).add(t.offset).sub(e.pos),o=t.r,i=o*o,u=e.calcPoints,s=u.length,c=a.pop(),l=a.pop(),f=0;f<s;f++){var h=f===s-1?0:f+1,y=0===f?s-1:f-1,v=0,_=null;c.copy(e.edges[f]),l.copy(n).sub(u[f]),r&&l.len2()>i&&(r.aInB=!1);var b=p(c,l);if(b===d){c.copy(e.edges[y]);var g=a.pop().copy(n).sub(u[y]);if((b=p(c,g))===m){if((k=l.len())>o)return a.push(n),a.push(c),a.push(l),a.push(g),!1;r&&(r.bInA=!1,_=l.normalize(),v=o-k)}a.push(g)}else if(b===m){if(c.copy(e.edges[h]),l.copy(n).sub(u[h]),(b=p(c,l))===d){if((k=l.len())>o)return a.push(n),a.push(c),a.push(l),!1;r&&(r.bInA=!1,_=l.normalize(),v=o-k)}}else{var w=c.perp().normalize(),k=l.dot(w),S=Math.abs(k);if(k>0&&S>o)return a.push(n),a.push(w),a.push(l),!1;r&&(_=w,v=o-k,(k>=0||v<2*o)&&(r.bInA=!1))}_&&r&&Math.abs(v)<Math.abs(r.overlap)&&(r.overlap=v,r.overlapN.copy(_))}return r&&(r.a=e,r.b=t,r.overlapV.copy(r.overlapN).scale(r.overlap)),a.push(n),a.push(c),a.push(l),!0}function _(e,t,r){for(var n=e.calcPoints,o=n.length,i=t.calcPoints,a=i.length,u=0;u<o;u++)if(h(e.pos,t.pos,n,i,e.normals[u],r))return!1;for(u=0;u<a;u++)if(h(e.pos,t.pos,n,i,t.normals[u],r))return!1;return r&&(r.a=e,r.b=t,r.overlapV.copy(r.overlapN).scale(r.overlap)),!0}return e.pointInCircle=function(e,t){var r=a.pop().copy(e).sub(t.pos).sub(t.offset),n=t.r*t.r,o=r.len2();return a.push(r),o<=n},e.pointInPolygon=function(e,t){l.pos.copy(e),c.clear();var r=_(l,t,c);return r&&(r=c.aInB),r},e.testCircleCircle=function(e,t,r){var n=a.pop().copy(t.pos).add(t.offset).sub(e.pos).sub(e.offset),o=e.r+t.r,i=o*o,u=n.len2();if(u>i)return a.push(n),!1;if(r){var s=Math.sqrt(u);r.a=e,r.b=t,r.overlap=o-s,r.overlapN.copy(n.normalize()),r.overlapV.copy(n).scale(r.overlap),r.aInB=e.r<=t.r&&s<=t.r-e.r,r.bInA=t.r<=e.r&&s<=e.r-t.r}return a.push(n),!0},e.testPolygonCircle=v,e.testCirclePolygon=function(e,t,r){var n=v(t,e,r);if(n&&r){var o=r.a,i=r.aInB;r.overlapN.reverse(),r.overlapV.reverse(),r.a=r.b,r.b=o,r.aInB=r.bInA,r.bInA=i}return n},e.testPolygonPolygon=_,e})?n.call(t,r,t,e):n)||(e.exports=o)}()},3841:(e,t,r)=>{var n=r(1374),o=r(7963),i=r(7121),a=r(2799),u=r(8930),s=r(1841),c=r(1805);c.alea=n,c.xor128=o,c.xorwow=i,c.xorshift7=a,c.xor4096=u,c.tychei=s,e.exports=c},1374:function(e,t,r){var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,i,a){function u(e){var t,r=this,n=(t=4022871197,function(e){e=String(e);for(var r=0;r<e.length;r++){var n=.02519603282416938*(t+=e.charCodeAt(r));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)});r.next=function(){var e=2091639*r.s0+2.3283064365386963e-10*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=e-(r.c=0|e)},r.c=1,r.s0=n(" "),r.s1=n(" "),r.s2=n(" "),r.s0-=n(e),r.s0<0&&(r.s0+=1),r.s1-=n(e),r.s1<0&&(r.s1+=1),r.s2-=n(e),r.s2<0&&(r.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function c(e,t){var r=new u(e),n=t&&t.state,i=r.next;return i.int32=function(){return 4294967296*r.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,n&&("object"==o(n)&&s(n,r),i.state=function(){return s(r,{})}),i}i&&i.exports?i.exports=c:r.amdD&&r.amdO?void 0===(n=function(){return c}.call(t,r,t,i))||(i.exports=n):this.alea=c}(0,"object"==o(e=r.nmd(e))&&e,r.amdD)},1841:function(e,t,r){var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,i,a){function u(e){var t=this,r="";t.next=function(){var e=t.b,r=t.c,n=t.d,o=t.a;return e=e<<25^e>>>7^r,r=r-n|0,n=n<<24^n>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^r,t.c=r=r-n|0,t.d=n<<16^r>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):r+=e;for(var n=0;n<r.length+20;n++)t.b^=0|r.charCodeAt(n),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function c(e,t){var r=new u(e),n=t&&t.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=r.next,i.quick=i,n&&("object"==o(n)&&s(n,r),i.state=function(){return s(r,{})}),i}i&&i.exports?i.exports=c:r.amdD&&r.amdO?void 0===(n=function(){return c}.call(t,r,t,i))||(i.exports=n):this.tychei=c}(0,"object"==o(e=r.nmd(e))&&e,r.amdD)},7963:function(e,t,r){var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,i,a){function u(e){var t=this,r="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function c(e,t){var r=new u(e),n=t&&t.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=r.next,i.quick=i,n&&("object"==o(n)&&s(n,r),i.state=function(){return s(r,{})}),i}i&&i.exports?i.exports=c:r.amdD&&r.amdO?void 0===(n=function(){return c}.call(t,r,t,i))||(i.exports=n):this.xor128=c}(0,"object"==o(e=r.nmd(e))&&e,r.amdD)},8930:function(e,t,r){var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,o,i){function a(e){var t=this;t.next=function(){var e,r,n=t.w,o=t.X,i=t.i;return t.w=n=n+1640531527|0,r=o[i+34&127],e=o[i=i+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,r=o[i]=r^e,t.i=i,r+(n^n>>>16)|0},function(e,t){var r,n,o,i,a,u=[],s=128;for(t===(0|t)?(n=t,t=null):(t+="\0",n=0,s=Math.max(s,t.length)),o=0,i=-32;i<s;++i)t&&(n^=t.charCodeAt((i+32)%t.length)),0===i&&(a=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,i>=0&&(a=a+1640531527|0,o=0==(r=u[127&i]^=n+a)?o+1:0);for(o>=128&&(u[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)n=u[o+34&127],r=u[o=o+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,u[o]=n^r;e.w=a,e.X=u,e.i=o}(t,e)}function u(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var r=new a(e),n=t&&t.state,o=function(){return(r.next()>>>0)/4294967296};return o.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=r.next,o.quick=o,n&&(n.X&&u(n,r),o.state=function(){return u(r,{})}),o}o&&o.exports?o.exports=s:r.amdD&&r.amdO?void 0===(n=function(){return s}.call(t,r,t,o))||(o.exports=n):this.xor4096=s}(0,"object"==o(e=r.nmd(e))&&e,r.amdD)},2799:function(e,t,r){var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,o,i){function a(e){var t=this;t.next=function(){var e,r,n=t.x,o=t.i;return e=n[o],r=(e^=e>>>7)^e<<24,r^=(e=n[o+1&7])^e>>>10,r^=(e=n[o+3&7])^e>>>3,r^=(e=n[o+4&7])^e<<7,e=n[o+7&7],r^=(e^=e<<13)^e<<9,n[o]=r,t.i=o+1&7,r},function(e,t){var r,n=[];if(t===(0|t))n[0]=t;else for(t=""+t,r=0;r<t.length;++r)n[7&r]=n[7&r]<<15^t.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r?n[7]=-1:n[r],e.x=n,e.i=0,r=256;r>0;--r)e.next()}(t,e)}function u(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var r=new a(e),n=t&&t.state,o=function(){return(r.next()>>>0)/4294967296};return o.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=r.next,o.quick=o,n&&(n.x&&u(n,r),o.state=function(){return u(r,{})}),o}o&&o.exports?o.exports=s:r.amdD&&r.amdO?void 0===(n=function(){return s}.call(t,r,t,o))||(o.exports=n):this.xorshift7=s}(0,"object"==o(e=r.nmd(e))&&e,r.amdD)},7121:function(e,t,r){var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,i,a){function u(e){var t=this,r="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),n==r.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function c(e,t){var r=new u(e),n=t&&t.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=r.next,i.quick=i,n&&("object"==o(n)&&s(n,r),i.state=function(){return s(r,{})}),i}i&&i.exports?i.exports=c:r.amdD&&r.amdO?void 0===(n=function(){return c}.call(t,r,t,i))||(i.exports=n):this.xorwow=c}(0,"object"==o(e=r.nmd(e))&&e,r.amdD)},1805:function(e,t,r){var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=r.nmd(e),function(i,a,u){var s,c=256,l=u.pow(c,6),f=u.pow(2,52),h=2*f,p=255;function d(e,t,r){var n=[],o=_(v((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(a)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(c):(e=new Uint8Array(c),(i.crypto||i.msCrypto).getRandomValues(e)),b(e)}catch(e){var t=i.navigator,r=t&&t.plugins;return[+new Date,i,r,i.screen,b(a)]}}():e,3),n),p=new y(n),d=function(){for(var e=p.g(6),t=l,r=0;e<f;)e=(e+r)*c,t*=c,r=p.g(1);for(;e>=h;)e/=2,t/=2,r>>>=1;return(e+r)/t};return d.int32=function(){return 0|p.g(4)},d.quick=function(){return p.g(4)/4294967296},d.double=d,_(b(p.S),a),(t.pass||r||function(e,t,r,n){return n&&(n.S&&m(n,p),e.state=function(){return m(p,{})}),r?(u.random=e,t):e})(d,o,"global"in t?t.global:this==u,t.state)}function y(e){var t,r=e.length,n=this,o=0,i=n.i=n.j=0,a=n.S=[];for(r||(e=[r++]);o<c;)a[o]=o++;for(o=0;o<c;o++)a[o]=a[i=p&i+e[o%r]+(t=a[o])],a[i]=t;(n.g=function(e){for(var t,r=0,o=n.i,i=n.j,a=n.S;e--;)t=a[o=p&o+1],r=r*c+a[p&(a[o]=a[i=p&i+t])+(a[i]=t)];return n.i=o,n.j=i,r})(c)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){var r,n=[],i=o(e);if(t&&"object"==i)for(r in e)try{n.push(v(e[r],t-1))}catch(e){}return n.length?n:"string"==i?e:e+"\0"}function _(e,t){for(var r,n=e+"",o=0;o<n.length;)t[p&o]=p&(r^=19*t[p&o])+n.charCodeAt(o++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(_(u.random(),a),"object"==o(e)&&e.exports){e.exports=d;try{s=r(3906)}catch(e){}}else void 0===(n=function(){return d}.call(t,r,t,e))||(e.exports=n)}("undefined"!=typeof self?self:this,[],Math)},574:function(e,t){var r,n,o,i;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,o=1;o<n;++o)t[o]=t[o].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function o(e){return e.toUpperCase()}function i(e){var n="[A-Za-z]",o="[0-9]",i=t(o,"[A-Fa-f]"),a=r(r("%[EFef]"+i+"%"+i+i+"%"+i+i)+"|"+r("%[89A-Fa-f]"+i+"%"+i+i)+"|"+r("%"+i+i)),u="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",s=t("[\\:\\/\\?\\#\\[\\]\\@]",u),c=e?"[\\uE000-\\uF8FF]":"[]",l=t(n,o,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),f=r(n+t(n,o,"[\\+\\-\\.]")+"*"),h=r(r(a+"|"+t(l,u,"[\\:]"))+"*"),p=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|"+o),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?"+o)),d=r(p+"\\."+p+"\\."+p+"\\."+p),y=r(i+"{1,4}"),m=r(r(y+"\\:"+y)+"|"+d),v=r(r(y+"\\:")+"{6}"+m),_=r("\\:\\:"+r(y+"\\:")+"{5}"+m),b=r(r(y)+"?\\:\\:"+r(y+"\\:")+"{4}"+m),g=r(r(r(y+"\\:")+"{0,1}"+y)+"?\\:\\:"+r(y+"\\:")+"{3}"+m),w=r(r(r(y+"\\:")+"{0,2}"+y)+"?\\:\\:"+r(y+"\\:")+"{2}"+m),k=r(r(r(y+"\\:")+"{0,3}"+y)+"?\\:\\:"+y+"\\:"+m),S=r(r(r(y+"\\:")+"{0,4}"+y)+"?\\:\\:"+m),O=r(r(r(y+"\\:")+"{0,5}"+y)+"?\\:\\:"+y),P=r(r(r(y+"\\:")+"{0,6}"+y)+"?\\:\\:"),j=r([v,_,b,g,w,k,S,O,P].join("|")),x=r(r(l+"|"+a)+"+"),E=(r(j+"\\%25"+x),r(j+r("\\%25|\\%(?!"+i+"{2})")+x)),C=r("[vV]"+i+"+\\."+t(l,u,"[\\:]")+"+"),T=r("\\["+r(E+"|"+j+"|"+C)+"\\]"),R=r(r(a+"|"+t(l,u))+"*"),A=r(T+"|"+d+"(?!"+R+")|"+R),D=r("[0-9]*"),M=r(r(h+"@")+"?"+A+r("\\:"+D)+"?"),N=r(a+"|"+t(l,u,"[\\:\\@]")),I=r(N+"*"),L=r(N+"+"),$=r(r(a+"|"+t(l,u,"[\\@]"))+"+"),V=r(r("\\/"+I)+"*"),z=r("\\/"+r(L+V)+"?"),B=r($+V),U=r(L+V),F="(?!"+N+")",q=(r(V+"|"+z+"|"+B+"|"+U+"|"+F),r(r(N+"|"+t("[\\/\\?]",c))+"*")),H=r(r(N+"|[\\/\\?]")+"*"),G=r(r("\\/\\/"+M+V)+"|"+z+"|"+U+"|"+F),K=r(f+"\\:"+G+r("\\?"+q)+"?"+r("\\#"+H)+"?"),X=r(r("\\/\\/"+M+V)+"|"+z+"|"+B+"|"+F),W=r(X+r("\\?"+q)+"?"+r("\\#"+H)+"?");return r(K+"|"+W),r(f+"\\:"+G+r("\\?"+q)+"?"),r(r("\\/\\/("+r("("+h+")@")+"?("+A+")"+r("\\:("+D+")")+"?)")+"?("+V+"|"+z+"|"+U+"|"+F+")"),r("\\?("+q+")"),r("\\#("+H+")"),r(r("\\/\\/("+r("("+h+")@")+"?("+A+")"+r("\\:("+D+")")+"?)")+"?("+V+"|"+z+"|"+B+"|"+F+")"),r("\\?("+q+")"),r("\\#("+H+")"),r(r("\\/\\/("+r("("+h+")@")+"?("+A+")"+r("\\:("+D+")")+"?)")+"?("+V+"|"+z+"|"+U+"|"+F+")"),r("\\?("+q+")"),r("\\#("+H+")"),r("("+h+")@"),r("\\:("+D+")"),{NOT_SCHEME:new RegExp(t("[^]",n,o,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",l,u),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",l,u),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",l,u),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",l,u),"g"),NOT_QUERY:new RegExp(t("[^\\%]",l,u,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",l,u,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",l,u),"g"),UNRESERVED:new RegExp(l,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",l,s),"g"),PCT_ENCODED:new RegExp(a,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+j+")"+r(r("\\%25|\\%(?!"+i+"{2})")+"("+x+")")+"?\\]?$")}}var a=i(!1),u=i(!0),s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,l=36,f=/^xn--/,h=/[^\0-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=Math.floor,m=String.fromCharCode;function v(e){throw new RangeError(d[e])}function _(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var o=function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(p,".")).split("."),t).join(".");return n+o}var b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},g=function(e,t,r){var n=0;for(e=r?y(e/700):e>>1,e+=y(e/t);e>455;n+=l)e=y(e/35);return y(n+36*e/(e+38))},w=function(e){return _(e,(function(e){return h.test(e)?"xn--"+function(e){var t=[],r=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=e.charCodeAt(r++);if(o>=55296&&o<=56319&&r<n){var i=e.charCodeAt(r++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),r--)}else t.push(o)}return t}(e)).length,n=128,o=0,i=72,a=!0,u=!1,s=void 0;try{for(var f,h=e[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var p=f.value;p<128&&t.push(m(p))}}catch(e){u=!0,s=e}finally{try{!a&&h.return&&h.return()}finally{if(u)throw s}}var d=t.length,_=d;for(d&&t.push("-");_<r;){var w=c,k=!0,S=!1,O=void 0;try{for(var P,j=e[Symbol.iterator]();!(k=(P=j.next()).done);k=!0){var x=P.value;x>=n&&x<w&&(w=x)}}catch(e){S=!0,O=e}finally{try{!k&&j.return&&j.return()}finally{if(S)throw O}}var E=_+1;w-n>y((c-o)/E)&&v("overflow"),o+=(w-n)*E,n=w;var C=!0,T=!1,R=void 0;try{for(var A,D=e[Symbol.iterator]();!(C=(A=D.next()).done);C=!0){var M=A.value;if(M<n&&++o>c&&v("overflow"),M==n){for(var N=o,I=l;;I+=l){var L=I<=i?1:I>=i+26?26:I-i;if(N<L)break;var $=N-L,V=l-L;t.push(m(b(L+$%V,0))),N=y($/V)}t.push(m(b(N,0))),i=g(o,E,_==d),o=0,++_}}}catch(e){T=!0,R=e}finally{try{!C&&D.return&&D.return()}finally{if(T)throw R}}++o,++n}return t.join("")}(e):e}))},k=function(e){return _(e,(function(e){return f.test(e)?function(e){var t,r=[],n=e.length,o=0,i=128,a=72,u=e.lastIndexOf("-");u<0&&(u=0);for(var s=0;s<u;++s)e.charCodeAt(s)>=128&&v("not-basic"),r.push(e.charCodeAt(s));for(var f=u>0?u+1:0;f<n;){for(var h=o,p=1,d=l;;d+=l){f>=n&&v("invalid-input");var m=(t=e.charCodeAt(f++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:l;(m>=l||m>y((c-o)/p))&&v("overflow"),o+=m*p;var _=d<=a?1:d>=a+26?26:d-a;if(m<_)break;var b=l-_;p>y(c/b)&&v("overflow"),p*=b}var w=r.length+1;a=g(o-h,w,0==h),y(o/w)>c-i&&v("overflow"),i+=y(o/w),o%=w,r.splice(o++,0,i)}return String.fromCodePoint.apply(String,r)}(e.slice(4).toLowerCase()):e}))},S={};function O(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function P(e){for(var t="",r=0,n=e.length;r<n;){var o=parseInt(e.substr(r+1,2),16);if(o<128)t+=String.fromCharCode(o),r+=3;else if(o>=194&&o<224){if(n-r>=6){var i=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&o)<<6|63&i)}else t+=e.substr(r,6);r+=6}else if(o>=224){if(n-r>=9){var a=parseInt(e.substr(r+4,2),16),u=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&o)<<12|(63&a)<<6|63&u)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function j(e,t){function r(e){var r=P(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,O).replace(t.PCT_ENCODED,o)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,O).replace(t.PCT_ENCODED,o)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,O).replace(t.PCT_ENCODED,o)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,O).replace(t.PCT_ENCODED,o)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,O).replace(t.PCT_ENCODED,o)),e}function x(e){return e.replace(/^0*(.*)/,"$1")||"0"}function E(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=s(r,2)[1];return n?n.split(".").map(x).join("."):e}function C(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=s(r,3),o=n[1],i=n[2];if(o){for(var a=o.toLowerCase().split("::").reverse(),u=s(a,2),c=u[0],l=u[1],f=l?l.split(":").map(x):[],h=c.split(":").map(x),p=t.IPV4ADDRESS.test(h[h.length-1]),d=p?7:8,y=h.length-d,m=Array(d),v=0;v<d;++v)m[v]=f[v]||h[y+v]||"";p&&(m[d-1]=E(m[d-1],t));var _=m.reduce((function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(_&&_.length>1){var g=m.slice(0,_.index),w=m.slice(_.index+_.length);b=g.join(":")+"::"+w.join(":")}else b=m.join(":");return i&&(b+="%"+i),b}return e}var T=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,R=void 0==="".match(/(){0}/)[1];function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?u:a;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var o=e.match(T);if(o){R?(r.scheme=o[1],r.userinfo=o[3],r.host=o[4],r.port=parseInt(o[5],10),r.path=o[6]||"",r.query=o[7],r.fragment=o[8],isNaN(r.port)&&(r.port=o[5])):(r.scheme=o[1]||void 0,r.userinfo=-1!==e.indexOf("@")?o[3]:void 0,r.host=-1!==e.indexOf("//")?o[4]:void 0,r.port=parseInt(o[5],10),r.path=o[6]||"",r.query=-1!==e.indexOf("?")?o[7]:void 0,r.fragment=-1!==e.indexOf("#")?o[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?o[4]:void 0)),r.host&&(r.host=C(E(r.host,n),n)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var i=S[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||i&&i.unicodeSupport)j(r,n);else{if(r.host&&(t.domainHost||i&&i.domainHost))try{r.host=w(r.host.replace(n.PCT_ENCODED,P).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}j(r,a)}i&&i.parse&&i.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function D(e,t){var r=!1!==t.iri?u:a,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(C(E(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(n.push(":"),n.push(String(e.port))),n.length?n.join(""):void 0}var M=/^\.\.?\//,N=/^\/\.(\/|$)/,I=/^\/\.\.(\/|$)/,L=/^\/?(?:.|\n)*?(?=\/|$)/;function $(e){for(var t=[];e.length;)if(e.match(M))e=e.replace(M,"");else if(e.match(N))e=e.replace(N,"/");else if(e.match(I))e=e.replace(I,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(L);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?u:a,n=[],o=S[(t.scheme||e.scheme||"").toLowerCase()];if(o&&o.serialize&&o.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||o&&o.domainHost)try{e.host=t.iri?k(e.host):w(e.host.replace(r.PCT_ENCODED,P).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}j(e,r),"suffix"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var i=D(e,t);if(void 0!==i&&("suffix"!==t.reference&&n.push("//"),n.push(i),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var s=e.path;t.absolutePath||o&&o.absolutePath||(s=$(s)),void 0===i&&(s=s.replace(/^\/\//,"/%2F")),n.push(s)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function z(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],o={};return n||(e=A(V(e,r),r),t=A(V(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(o.scheme=t.scheme,o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=$(t.path||""),o.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=$(t.path||""),o.query=t.query):(t.path?("/"===t.path.charAt(0)?o.path=$(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:o.path=t.path:o.path="/"+t.path,o.path=$(o.path)),o.query=t.query):(o.path=e.path,void 0!==t.query?o.query=t.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=t.fragment,o}function B(e,t){return e&&e.toString().replace(t&&t.iri?u.PCT_ENCODED:a.PCT_ENCODED,P)}var U={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},F={scheme:"https",domainHost:U.domainHost,parse:U.parse,serialize:U.serialize};function q(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var H={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=q(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(q(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),n=s(r,2),o=n[0],i=n[1];e.path=o&&"/"!==o?o:void 0,e.query=i,e.resourceName=void 0}return e.fragment=void 0,e}},G={scheme:"wss",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize},K={},X="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",W="[0-9A-Fa-f]",Y=r(r("%[EFef][0-9A-Fa-f]%"+W+W+"%"+W+W)+"|"+r("%[89A-Fa-f][0-9A-Fa-f]%"+W+W)+"|"+r("%"+W+W)),J=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),Q=new RegExp(X,"g"),Z=new RegExp(Y,"g"),ee=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',J),"g"),te=new RegExp(t("[^]",X,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),re=te;function ne(e){var t=P(e);return t.match(Q)?t:e}var oe={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var o=!1,i={},a=r.query.split("&"),u=0,s=a.length;u<s;++u){var c=a[u].split("=");switch(c[0]){case"to":for(var l=c[1].split(","),f=0,h=l.length;f<h;++f)n.push(l[f]);break;case"subject":r.subject=B(c[1],t);break;case"body":r.body=B(c[1],t);break;default:o=!0,i[B(c[0],t)]=B(c[1],t)}}o&&(r.headers=i)}r.query=void 0;for(var p=0,d=n.length;p<d;++p){var y=n[p].split("@");if(y[0]=B(y[0]),t.unicodeSupport)y[1]=B(y[1],t).toLowerCase();else try{y[1]=w(B(y[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[p]=y.join("@")}return r},serialize:function(e,t){var r,n=e,i=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(i){for(var a=0,u=i.length;a<u;++a){var s=String(i[a]),c=s.lastIndexOf("@"),l=s.slice(0,c).replace(Z,ne).replace(Z,o).replace(ee,O),f=s.slice(c+1);try{f=t.iri?k(f):w(B(f,t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[a]=l+"@"+f}n.path=i.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var p=[];for(var d in h)h[d]!==K[d]&&p.push(d.replace(Z,ne).replace(Z,o).replace(te,O)+"="+h[d].replace(Z,ne).replace(Z,o).replace(re,O));return p.length&&(n.query=p.join("&")),n}},ie=/^([^\:]+)\:(.*)/,ae={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(ie),n=e;if(r){var o=t.scheme||n.scheme||"urn",i=r[1].toLowerCase(),a=r[2],u=o+":"+(t.nid||i),s=S[u];n.nid=i,n.nss=a,n.path=void 0,s&&(n=s.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,o=r+":"+(t.nid||n),i=S[o];i&&(e=i.serialize(e,t));var a=e,u=e.nss;return a.path=(n||t.nid)+":"+u,a}},ue=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,se={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(ue)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};S[U.scheme]=U,S[F.scheme]=F,S[H.scheme]=H,S[G.scheme]=G,S[oe.scheme]=oe,S[ae.scheme]=ae,S[se.scheme]=se,e.SCHEMES=S,e.pctEncChar=O,e.pctDecChars=P,e.parse=A,e.removeDotSegments=$,e.serialize=V,e.resolveComponents=z,e.resolve=function(e,t,r){var n=function(e,t){var r={scheme:"null"};if(t)for(var n in t)r[n]=t[n];return r}(0,r);return V(z(A(e,n),A(t,n),n,!0),n)},e.normalize=function(e,t){return"string"==typeof e?e=V(A(e,t),t):"object"===n(e)&&(e=A(V(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=V(A(e,r),r):"object"===n(e)&&(e=V(e,r)),"string"==typeof t?t=V(A(t,r),r):"object"===n(t)&&(t=V(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?u.ESCAPE:a.ESCAPE,O)},e.unescapeComponent=B,Object.defineProperty(e,"__esModule",{value:!0})},"object"===a(t)?i(t):(n=[t],void 0===(o="function"==typeof(r=i)?r.apply(t,n):r)||(e.exports=o))},425:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var extendedMath=__webpack_require__(6238),TankController=function(){function e(){_classCallCheck(this,e),this._initCallback=function(){},this._loopCallback=function(){}}return _createClass(e,[{key:"loop",value:function(e){this._loopCallback=e}},{key:"init",value:function(e){this._initCallback=e}}]),e}(),EvalWorker=function(){function EvalWorker(){_classCallCheck(this,EvalWorker),this.onmessage=function(e){},this._callStackLimit=100,this._callStackCount=0,this._tankController=new TankController}return _createClass(EvalWorker,[{key:"postMessage",value:function postMessage(inputData){var _this=this,response=null;if("init"==inputData.command){if(!inputData.code)throw"The code is required!";var settings=inputData.settings,info=inputData.info,Math=extendedMath(),tank=this._tankController;eval(inputData.code),tank._initCallback(settings,info),response={data:{type:"init",settings}}}else if("update"==inputData.command){var state=inputData.state,control=inputData.control;this._tankController._loopCallback?(this._tankController._loopCallback(state,control),response={data:control}):response={data:control}}this._callStackCount<this._callStackLimit?(this._callStackCount++,this.onmessage(response)):(this._callStackCount=0,setTimeout((function(){_this.onmessage(response)}),1))}},{key:"terminate",value:function(){}}]),EvalWorker}();const __WEBPACK_DEFAULT_EXPORT__=EvalWorker},6238:e=>{e.exports=function(){var e={},t=["LN10","PI","E","LOG10E","SQRT2","LOG2E","SQRT1_2","LN2","cos","pow","log","tan","sqrt","ceil","asin","abs","max","exp","atan2","random","round","floor","acos","atan","min","sin"];for(var r in t)e[t[r]]=Math[t[r]];return e.deg={},e.rad={},e.deg.normalize=function(e){for(e=Number(e);e>180;)e-=360;for(;e<=-180;)e+=360;return e},e.rad.normalize=function(t){for(t=Number(t);t>e.PI;)t-=2*e.PI;for(;t<=-e.PI;)t+=2*e.PI;return t},e.deg2rad=function(t){return e.rad.normalize(t*(e.PI/180))},e.rad2deg=function(t){return e.deg.normalize(t*(180/e.PI))},e.rad.atan2=e.atan2,e.deg.atan2=function(t,r){return e.rad2deg(e.rad.atan2(t,r))},e.distance=function(t,r,n,o){var i=n-t,a=o-r;return e.sqrt(i*i+a*a)},e.randomRange=function(t,r){if(t>r)throw"The range is incorrect. First number must be lower than second";return t+e.random()*(r-t)},e}},3906:()=>{}},__webpack_module_cache__={};function __webpack_require__(e){if(__webpack_module_cache__[e])return __webpack_module_cache__[e].exports;var t=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__),t.loaded=!0,t.exports}__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e=__webpack_require__(3841),t=__webpack_require__.n(e);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){for(;e>180;)e-=360;for(;e<-180;)e+=360;return e}const i=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"object"!=r(t))throw"AI definition must be an object";this._id=n,this._name=t.name,this._team=null,this._maxEnergy=100,this._energy=this._maxEnergy,this._x=0,this._y=0,this._lastX=0,this._lastY=0,this._angle=0,this._gunAngle=0,this._radarAngle=0,this._throttle=0,this._actualThrottle=0,this._speed=0,this._turn=0,this._gunTurn=0,this._radarTurn=0,this._wallHit=!1,this._enemyHit=!1,this._allyHit=!1,this._beingRammed=!1,this._radarRange=300,this._radarFocal=6,this._enemySpot=null,this._allySpot=null,this._bulletsSpot=[],this._gunReloadTime=70,this._gunTimer=0,this._shootingPower=0,this._targetingAlarmTimer=0,this._debugData={},this._score=0,this._state=null,this._hasBoost=!1,this._maxBoost=400,this._boost=this._maxBoost,this._wallDistance=null,this._skin="zebra"}var i,a;return i=e,(a=[{key:"onEnemyHitScore",value:function(e){this._score+=e}},{key:"onEnemyKillScore",value:function(){this._score+=20}},{key:"onSurviveScore",value:function(){this._score+=10}},{key:"setThrottle",value:function(e){this._throttle=Math.min(1,Math.max(-1,e))}},{key:"setTurn",value:function(e){this._turn=Math.min(1,Math.max(-1,e))}},{key:"setGunTurn",value:function(e){this._gunTurn=Math.min(1,Math.max(-1,e))}},{key:"setRadarTurn",value:function(e){this._radarTurn=Math.min(1,Math.max(-1,e))}},{key:"setBoost",value:function(e){this._hasBoost=!!e}},{key:"setDebugData",value:function(e){this._debugData=e}},{key:"onWallHit",value:function(){this._wallHit=!0,this.onDamage(.2)}},{key:"onEnemyHit",value:function(){this._enemyHit=!0,this.onDamage(.2)}},{key:"onAllyHit",value:function(){this._allyHit=!0,this.onDamage(.2)}},{key:"onBeingRam",value:function(e){this._beingRammed=!0,this.onDamage(.1+.1*Math.round(4*e))}},{key:"onEnemySpot",value:function(e){this._enemySpot=e}},{key:"onAllySpot",value:function(e){this._allySpot=e}},{key:"onBulletSpot",value:function(e){this._bulletsSpot.push(e)}},{key:"onWallSpot",value:function(e){this._wallDistance=e}},{key:"onTargetingAlarm",value:function(){this._targetingAlarmTimer=3}},{key:"isAlly",value:function(e){return!!this._team&&!!e.team&&this._team.name==e.team.name}},{key:"onDamage",value:function(e){this._energy=Math.max(0,this._energy-e)}},{key:"moveTo",value:function(e,t,r){this._x=e,this._y=t,this._lastX=e,this._lastY=t,void 0!==r&&(this._angle=r)}},{key:"handleShoot",value:function(){var e=this._shootingPower;return this._shootingPower=0,e}},{key:"shoot",value:function(e){e=Math.max(.1,Math.min(1,e)),this.isReloading||(this._gunTimer=Math.round(e*this._gunReloadTime),this._shootingPower=e)}},{key:"randomize",value:function(e){void 0===e&&(e=(new Date).getTime()+Math.round(1e6*Math.random()));var r=t()(e);this._angle=Math.round(360*r())-180}},{key:"init",value:function(e){e&&e.SKIN&&(this._skin=e.SKIN)}},{key:"simulationStep",value:function(e){var t=this;if(0!=t._energy){t._hasBoost&&t._boost>0&&t._boost--;var r=t._x,n=t._y,i=t._throttle*(t.hasBoost?4:2),a=t.hasBoost?10:20;t._actualThrottle+=(i-t._actualThrottle)/a;var u=t._actualThrottle,s=t._angle*(Math.PI/180);t._x+=u*Math.cos(s),t._y+=u*Math.sin(s),t._wallHit=!1,t._enemyHit=!1,t._allyHit=!1,!e.checkTank(t)&&(t._x=r,t._y=n,t._actualThrottle=0),this._beingRammed&&(t._enemyHit=!0,this._beingRammed=!1),t._angle+=2*t._turn,t._radarAngle+=6*t._radarTurn,t._gunAngle+=3*t._gunTurn,t._angle=o(t._angle),t._radarAngle=o(t._radarAngle),t._gunAngle=o(t._gunAngle),e.updateTank(t),t._enemySpot=null,t._allySpot=null,t._wallDistance=null,t._targetingAlarmTimer=Math.max(0,t._targetingAlarmTimer-1),e.scanTanks(t),e.scanBullets(t),e.scanWalls(t),t._gunTimer>0&&t._gunTimer--;for(var c=null,l=null,f=[];t._bulletsSpot.length;){var h=t._bulletsSpot.shift();f.push({id:h.id,x:h.x,y:h.y,angle:h.angle,speed:h.speed,damage:h.damage})}t._enemySpot&&(c={id:t._enemySpot.id,x:t._enemySpot.x,y:t._enemySpot.y,angle:t._enemySpot.angle,speed:t._enemySpot.speed*(t._enemySpot.throttle<0?-1:1),energy:t._enemySpot.energy}),t._allySpot&&(l={id:t._allySpot.id,x:t._allySpot.x,y:t._allySpot.y,angle:t._allySpot.angle,speed:t._allySpot.speed,energy:t._allySpot.energy});var p=t._x-t._lastX,d=t._y-t._lastY;t._speed=Math.sqrt(p*p+d*d),t._lastX=t._x,t._lastY=t._y,t._state={x:t._x,y:t._y,angle:t._angle,energy:t._energy,boost:t._boost,collisions:{wall:t._wallHit,enemy:t._enemyHit,ally:t._allyHit},radar:{angle:t._radarAngle,targetingAlarm:t.targetingAlarm,wallDistance:t._wallDistance,enemy:c,ally:l,bullets:f},gun:{angle:t._gunAngle,reloading:t.isReloading},radio:{inbox:t.team?t.team.getMessages(t.id):[]}}}}},{key:"id",get:function(){return this._id}},{key:"skin",get:function(){return this._skin}},{key:"state",get:function(){return this._state}},{key:"energy",get:function(){return this._energy}},{key:"score",get:function(){return this._score}},{key:"maxEnergy",get:function(){return this._maxEnergy}},{key:"radarRange",get:function(){return this._radarRange}},{key:"radarFocal",get:function(){return this._radarFocal}},{key:"name",get:function(){return this._name}},{key:"fullName",get:function(){return this._name+" #"+this._id}},{key:"team",get:function(){return this._team}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"speed",get:function(){return this._speed}},{key:"gunLength",get:function(){return 25}},{key:"angle",get:function(){return this._angle}},{key:"throttle",get:function(){return this._throttle}},{key:"hasBoost",get:function(){return this._hasBoost&&this._boost>0}},{key:"boost",get:function(){return this._boost}},{key:"maxBoost",get:function(){return this._maxBoost}},{key:"gunAngle",get:function(){return this._gunAngle}},{key:"radarAngle",get:function(){return this._radarAngle}},{key:"enemySpot",get:function(){return this._enemySpot}},{key:"allySpot",get:function(){return this._allySpot}},{key:"targetingAlarm",get:function(){return this._targetingAlarmTimer>0}},{key:"debugData",get:function(){return this._debugData}},{key:"isShooting",get:function(){return this._shootingPower>0}},{key:"shootingPower",get:function(){return this._shootingPower}},{key:"isReloading",get:function(){return this._gunTimer>0}}])&&n(i.prototype,a),e}();function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._members=[],this._inboxMap=[],this._outboxMap=[]}var t,r;return t=e,(r=[{key:"addTank",value:function(e){if(e.team)throw"Tank "+e.fullName+" is already assigned to team "+e.team.name;for(var t in this._members)if(this._members[t].id==e.id)return;this._members.push(e),e._team=this,this._inboxMap[e.id]=[],this._outboxMap[e.id]=[]}},{key:"getMessages",value:function(e){return this._outboxMap[e]}},{key:"sendMessages",value:function(e,t){for(var r in this._inboxMap)r!=e&&(this._inboxMap[r]=this._inboxMap[r].concat(t))}},{key:"processMessages",value:function(){var e;for(e in this._inboxMap)this._outboxMap[e]=this._inboxMap[e],this._inboxMap[e]=[]}},{key:"size",get:function(){return this._members.length}},{key:"name",get:function(){return this._name}},{key:"aliveCount",get:function(){for(var e=0,t=0;t<this._members.length;t++)this._members[t].energy>0&&e++;return e}},{key:"score",get:function(){for(var e=0,t=0;t<this._members.length;t++)e+=this._members[t].score;return e}},{key:"energy",get:function(){for(var e=0,t=0;t<this._members.length;t++)e+=this._members[t].energy;return e}},{key:"maxEnergy",get:function(){for(var e=0,t=0;t<this._members.length;t++)e+=this._members[t].maxEnergy;return e}},{key:"isAlive",get:function(){return this.aliveCount>0}},{key:"members",get:function(){return this._members}}])&&a(t.prototype,r),e}();function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t,r,n){for(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=r,this._owner=t,this._angle=t.angle+t.gunAngle;this._angle>180;)this._angle-=360;for(;this._angle<-180;)this._angle+=360;this._x=t.x+t.gunLength*Math.cos(this._angle*(Math.PI/180)),this._y=t.y+t.gunLength*Math.sin(this._angle*(Math.PI/180)),this._speed=4,this._power=n,this._damage=.01*Math.round(1e3*n+300*n*n),this._exploded=!1}var t,r;return t=e,(r=[{key:"onWallHit",value:function(){this._exploded=!0}},{key:"onEnemyHit",value:function(e){this._exploded=!0,e.onDamage(this._damage)}},{key:"simulationStep",value:function(){this._x+=this._speed*Math.cos(this._angle*(Math.PI/180)),this._y+=this._speed*Math.sin(this._angle*(Math.PI/180))}},{key:"id",get:function(){return this._id}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"angle",get:function(){return this._angle}},{key:"speed",get:function(){return this._speed}},{key:"damage",get:function(){return this._damage}},{key:"power",get:function(){return this._power}},{key:"owner",get:function(){return this._owner}},{key:"exploded",get:function(){return this._exploded}}])&&s(t.prototype,r),e}();function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._width=null,this._height=null,this._startSlotList=[],this._offsetX=0,this._offsetY=0}var r,n;return r=e,(n=[{key:"setSize",value:function(e,t){this._width=e-2*this.margin,this._height=t-2*this.margin}},{key:"randomize",value:function(e){void 0===e&&(e=(new Date).getTime()+Math.round(1e6*Math.random()));var r=t()(e);this._offsetX=Math.round(1e4*r()-5e3),this._offsetY=Math.round(1e4*r()-5e3),this._startSlotList=[];for(var n=90,o=this.minX+n;o<this.maxX-n;o+=n)for(var i=this.minY+n;i<this.maxY-n;i+=n)this._startSlotList.push({x:o,y:i});for(var a,u,s=this._startSlotList.length;0!==s;)u=Math.floor(r()*s),s-=1,a=this._startSlotList[s],this._startSlotList[s]=this._startSlotList[u],this._startSlotList[u]=a}},{key:"getStartSlot",value:function(){return this._startSlotList.length?this._startSlotList.pop():null}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"margin",get:function(){return 25}},{key:"minX",get:function(){return this._offsetX+this.margin}},{key:"minY",get:function(){return this._offsetY+this.margin}},{key:"maxX",get:function(){return this._offsetX+this._width+this.margin}},{key:"maxY",get:function(){return this._offsetY+this._height+this.margin}},{key:"offsetX",get:function(){return this._offsetX}},{key:"offsetY",get:function(){return this._offsetY}}])&&l(r.prototype,n),e}();function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=[]}var t,r;return t=e,(r=[{key:"add",value:function(e,t){this._data[e]||(this._data[e]=[]),this._data[e].push(t)}},{key:"get",value:function(e){return this._data[e]||(this._data[e]=[]),this._data[e]}},{key:"clear",value:function(e){this._data=[]}}])&&h(t.prototype,r),e}(),d=__webpack_require__(9095),y=__webpack_require__.n(d);function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._wallList=[],this._tankMap=[],this._bulletMap=[],this._radarBeamMap=[],this._battlefield=null}var t,r;return t=e,(r=[{key:"updateBattlefield",value:function(e){var t;this._battlefield={minX:e.minX,minY:e.minY,maxX:e.maxX,maxY:e.maxY},t=new(y().Box)(new(y().Vector)(e.minX-10,e.minY),10,e.height).toPolygon(),this._wallList.push(t),t=new(y().Box)(new(y().Vector)(e.minX,e.minY-10),e.width,10).toPolygon(),this._wallList.push(t),t=new(y().Box)(new(y().Vector)(e.maxX,e.minY),10,e.height).toPolygon(),this._wallList.push(t),t=new(y().Box)(new(y().Vector)(e.minX,e.maxY),e.width,10).toPolygon(),this._wallList.push(t)}},{key:"updateTank",value:function(e){var t=this._getTankShape(e);t.pos.x=e.x,t.pos.y=e.y}},{key:"removeBullet",value:function(e){this._bulletMap[e.id]=null}},{key:"removeTank",value:function(e){this._tankMap[e.id]=null,this._radarBeamMap[e.id]=null}},{key:"hitTestBullet",value:function(e){var t,r,n,o=this._getBulletShape(e),i=e.owner.energy?this._getTankShape(e.owner):null;for(t in o.pos.x=e.x,o.pos.y=e.y,this._wallList)if(r=this._wallList[t],y().testCirclePolygon(o,r))return e.onWallHit(),!0;for(t in this._tankMap)if((n=this._tankMap[t])&&n!=i&&y().testCircleCircle(o,n)){var a=n.tank.energy;return e.onEnemyHit(n.tank),e.owner.isAlly(n.tank)||e.owner.onEnemyHitScore(a-n.tank.energy),0==n.tank.energy&&e.owner.onEnemyKillScore(),!0}return!1}},{key:"checkTank",value:function(e){var t,r,n,o,i=this._getTankShape(e);for(t in i.pos.x=e.x,i.pos.y=e.y,this._wallList)if(n=this._wallList[t],r=y().testCirclePolygon(i,n))return e.onWallHit(),!1;for(t in this._tankMap)if((o=this._tankMap[t])&&o!=i){r=y().testCircleCircle(i,o);var a=e.isAlly(o.tank);if(r){if(a)return e.onAllyHit(),!1;var u=o.tank.energy;return e.onEnemyHit(),o.tank.onBeingRam(e.speed),e.onEnemyHitScore(u-o.tank.energy),!1}}return!0}},{key:"scanTanks",value:function(e){var t,r,n=this._getRadarBeamShape(e),o=this._getTankShape(e);n.setAngle((e.angle+e.radarAngle)*Math.PI/180),n.pos.x=e.x,n.pos.y=e.y;var i=[];for(t in this._tankMap)(r=this._tankMap[t])&&r!=o&&y().testPolygonCircle(n,r)&&i.push(r.tank);if(0==i.length)return!1;var a,u,s,c,l=null,f=e.radarRange,h=null,p=e.radarRange;for(t in i)u=i[t].x-e.x,s=i[t].y-e.y,a=Math.sqrt(u*u+s*s),(c=i[t].isAlly(e))||l&&!(a<f)?c&&(!h||a<p)&&(h=i[t],p=a):(l=i[t],f=a);return h&&e.onAllySpot(h),l&&(e.onEnemySpot(l),l.onTargetingAlarm()),!0}},{key:"scanBullets",value:function(e){var t,r,n=this._getRadarBeamShape(e);n.setAngle((e.angle+e.radarAngle)*Math.PI/180),n.pos.x=e.x,n.pos.y=e.y;var o=!1;for(t in this._bulletMap)(r=this._bulletMap[t])&&r.bullet.owner!=e&&y().testCirclePolygon(r,n)&&(e.onBulletSpot(r.bullet),o=!0);return o}},{key:"scanWalls",value:function(e){var t=this._getWallDistance(e);return t<e.radarRange&&(e.onWallSpot(t),!0)}},{key:"_getWallDistance",value:function(e){for(var t=e.angle+e.radarAngle;t>180;)t-=360;for(;t<-180;)t+=360;var r,n,o=e.y-this._battlefield.minY,i=this._battlefield.maxY-e.y,a=e.x-this._battlefield.minX,u=this._battlefield.maxX-e.x;return-180==t||180==t?a:0==t?u:-90==t?o:90==t?i:(t>-180&&t<-90?(r=a/Math.cos((t+180)*(Math.PI/180)),n=o/Math.sin((t+180)*(Math.PI/180))):t>-90&&t<0?(r=u/Math.cos(-t*(Math.PI/180)),n=o/Math.sin(-t*(Math.PI/180))):t>0&&t<90?(r=u/Math.cos(t*(Math.PI/180)),n=i/Math.sin(t*(Math.PI/180))):(r=a/Math.cos((180-t)*(Math.PI/180)),n=i/Math.sin((180-t)*(Math.PI/180))),Math.min(r,n))}},{key:"_getTankShape",value:function(e){if(!this._tankMap[e.id]){if(0==e.energy)throw"Cannot create shape for destroyed tank";var t=new(y().Circle)(new(y().Vector)(e.x,e.y),18);this._tankMap[e.id]=t,t.tank=e}return this._tankMap[e.id]}},{key:"_getBulletShape",value:function(e){if(!this._bulletMap[e.id]){if(e.exploded)throw"Cannot create shape for exploded bullet";var t=new(y().Circle)(new(y().Vector)(e.x,e.y),3);this._bulletMap[e.id]=t,t.bullet=e}return this._bulletMap[e.id]}},{key:"_getRadarBeamShape",value:function(e){if(!this._radarBeamMap[e.id]){if(0==e.energy)throw"Cannot create radar beam shape for destroyed tank";var t=e.radarRange*Math.tan(e.radarFocal*(Math.PI/180))/2,r=new(y().Polygon)(new(y().Vector)(e.x,e.y),[new(y().Vector)(0,3),new(y().Vector)(0,-3),new(y().Vector)(e.radarRange,-t),new(y().Vector)(e.radarRange,t)]);this._radarBeamMap[e.id]=r,r.tank=e}return this._radarBeamMap[e.id]}}])&&m(t.prototype,r),e}(),_=__webpack_require__(425);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var w=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw"Tank is required";if(!r)throw"AiDefinition is required";this._tank=t,this._aiWorker=null,this._aiProcessingStart=0,this._aiProcessingCheckInterval=null,this._aiProcessingResolveCallback=null,this._aiProcessingRejectCallback=null,this._slowAiChances=10,this._onActivationCallback=[],this._onDectivationCallback=[],this._aiProcessingTimeLimit=3e3,this._aiDefinition=r,this._isReady=!1,this._controlData={THROTTLE:0,BOOST:0,TURN:0,RADAR_TURN:0,GUN_TURN:0,SHOOT:0,OUTBOX:[],DEBUG:{}}}var t,r;return t=e,(r=[{key:"setProcessingLimit",value:function(e){this._aiProcessingTimeLimit=e}},{key:"onActivation",value:function(e){this._onActivationCallback.push(e)}},{key:"onDectivation",value:function(e){this._onDeactivationCallback.push(e)}},{key:"_formatError",value:function(e){if(!e.message)return"unknown";var t=e.message;return e.lineno&&(t="Line #"+e.lineno+": "+t),t}},{key:"activate",value:function(e,t,r){if("number"!=typeof e)throw"seed must be a number, '"+b(e)+"' given";if("function"!=typeof t)throw"resolve callback must be a function, '"+b(t)+"' given";if("function"!=typeof r)throw"reject callback must be a function, '"+b(r)+"' given";var n=this;n._aiWorker=n._createWorker(this._aiDefinition),n._aiWorker.onerror=function(e){console.error(e),n._aiProcessingRejectCallback&&(n._aiProcessingRejectCallback({message:"Web Worker of '"+n._tank.fullName+"' returned an error: "+n._formatError(e),performanceIssues:!1,tankName:n._tank.name,tankId:n._tank.id}),n._aiProcessingResolveCallback=null,n._aiProcessingRejectCallback=null)},n._aiProcessingCheckInterval&&(clearInterval(n._aiProcessingCheckInterval),n._aiProcessingCheckInterval=null),n._aiProcessingCheckInterval=setInterval((function(){n._aiProcessingRejectCallback&&(new Date).getTime()-n._aiProcessingStart>n._aiProcessingTimeLimit&&(clearInterval(n._aiProcessingCheckInterval),n._aiProcessingCheckInterval=null,n._aiProcessingRejectCallback({message:"Simulation cannot be continued because "+n._tank.name+" #"+n._tank.id+" does not respond",performanceIssues:!0,tankName:n._tank.name,tankId:n._tank.id}))}),Math.max(n._aiDefinition.executionLimit,Math.round(n._aiProcessingTimeLimit/2))),n._aiWorker.onmessage=function(e){var t=e.data;if(n._aiProcessingResolveCallback){if("init"==t.type){n._configureTank(t.settings?t.settings:{}),n._isReady=!0;for(var r=0;r<n._onActivationCallback.length;r++)n._onActivationCallback[r].bind(n)()}else n._controlTank(t);var o,i=(new Date).getTime()-n._aiProcessingStart;if(i>n._aiDefinition.executionLimit&&"init"!=t.type&&(n._slowAiChances--,console.warn("Execution of AI for tank "+n._tank.name+" #"+n._tank.id+" takes too long ("+i+"ms). If problem repeats, AI will be terminated."),n._slowAiChances<=0))return o=n._aiProcessingRejectCallback,n._aiProcessingResolveCallback=null,n._aiProcessingRejectCallback=null,void o({message:"Simulation cannot be continued because "+n._tank.name+" #"+n._tank.id+" has performance issues",performanceIssues:!0,tankName:n._tank.name,tankId:n._tank.id});o=n._aiProcessingResolveCallback,n._aiProcessingResolveCallback=null,n._aiProcessingRejectCallback=null,o()}};var o;o=n._tank.team&&n._tank.team.size>1?{name:n._tank.team.name,mates:n._tank.team.members.map((function(e){return e.id}))}:{name:n._tank.fullName,mates:[n._tank.id]};var i={id:n._tank.id,team:o};n._aiDefinition.initData&&(i.initData=n._aiDefinition.initData),n._aiProcessingStart=(new Date).getTime(),n._aiProcessingResolveCallback=t,n._aiProcessingRejectCallback=r,n._aiWorker.postMessage({command:"init",seed:e+":"+n._tank.id,settings:{SKIN:"zebra"},info:i,code:n._aiDefinition.code})}},{key:"deactivate",value:function(){this._aiWorker&&(this._aiWorker.terminate(),this._aiWorker=null),this._aiProcessingCheckInterval&&(clearInterval(this._aiProcessingCheckInterval),this._aiProcessingCheckInterval=null);for(var e=0;e<this._onDectivationCallback.length;e++)this._onDectivationCallback[e].bind(this)()}},{key:"simulationStep",value:function(e,t){if("function"!=typeof e)throw"resolve callback must be a function, '"+b(e)+"' given";if("function"!=typeof t)throw"reject callback must be a function, '"+b(t)+"' given";if(!this._isReady)throw"AI of "+this._tank.fullName+" not initliazed";var r=this;if(r._aiWorker&&0==r._tank.energy)return r._aiWorker.terminate(),r._aiWorker=null,void e();r._aiProcessingStart=(new Date).getTime(),r._aiProcessingResolveCallback=e,r._aiProcessingRejectCallback=t,r._aiWorker.postMessage({command:"update",state:r._tank.state,control:r._controlData})}},{key:"_configureTank",value:function(e){var t={};-1!=["zebra","forest","black","tiger","desert","lava","ocean"].indexOf(e.SKIN)&&(t.SKIN=e.SKIN),this._tank.init(t)}},{key:"_controlTank",value:function(e){var t=this;t._controlData.THROTTLE=Number(e.THROTTLE),t._controlData.TURN=Number(e.TURN),t._controlData.GUN_TURN=Number(e.GUN_TURN),t._controlData.RADAR_TURN=Number(e.RADAR_TURN),t._controlData.SHOOT=Number(e.SHOOT),t._controlData.DEBUG=e.DEBUG,t._controlData.BOOST=e.BOOST?1:0,t._controlData.THROTTLE=isNaN(t._controlData.THROTTLE)?0:t._controlData.THROTTLE,t._controlData.TURN=isNaN(t._controlData.TURN)?0:t._controlData.TURN,t._controlData.GUN_TURN=isNaN(t._controlData.GUN_TURN)?0:t._controlData.GUN_TURN,t._controlData.RADAR_TURN=isNaN(t._controlData.RADAR_TURN)?0:t._controlData.RADAR_TURN,t._controlData.SHOOT=isNaN(t._controlData.SHOOT)?0:t._controlData.SHOOT,t._controlData.THROTTLE=Math.min(1,Math.max(-1,Number(t._controlData.THROTTLE))),t._controlData.TURN=Math.min(1,Math.max(-1,Number(t._controlData.TURN))),t._controlData.GUN_TURN=Math.min(1,Math.max(-1,Number(t._controlData.GUN_TURN))),t._controlData.RADAR_TURN=Math.min(1,Math.max(-1,Number(t._controlData.RADAR_TURN))),t._controlData.SHOOT=Math.min(1,Math.max(0,Number(t._controlData.SHOOT))),t._tank.setThrottle(t._controlData.THROTTLE),t._tank.setBoost(t._controlData.BOOST),t._tank.setTurn(t._controlData.TURN),t._tank.setRadarTurn(t._controlData.RADAR_TURN),t._tank.setGunTurn(t._controlData.GUN_TURN),t._tank.setDebugData(t._controlData.DEBUG),t._controlData.SHOOT&&t._tank.shoot(t._controlData.SHOOT),t._controlData.SHOOT=0;var r=[];for(var n in e.OUTBOX)r.push(JSON.parse(JSON.stringify(e.OUTBOX[n])));t._tank.team&&t._tank.team.sendMessages(t._tank.id,r),t._controlData.OUTBOX=[]}},{key:"_createWorker",value:function(e){return e.useSandbox?new Worker(e.filePath):new _.Z}},{key:"tank",get:function(){return this._tank}},{key:"worker",get:function(){return this._aiWorker}}])&&g(t.prototype,r),e}();function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._simulationStepDuration=30,this._stepCounter=0,this._checkLoop=0,this._started=!1,this._desiredPerfomance=Math.floor(1e3/this._simulationStepDuration),this._actualPerfomance=this._desiredPerfomance,this._perfomanceIndex=1,this._desiredQuality=1,this._quality=this._desiredQuality,this._checkInterval=500}var t,r;return t=e,(r=[{key:"start",value:function(){this._started=!0;var e=this;this._checkLoop=setInterval((function(){e._check()}),this._checkInterval)}},{key:"stop",value:function(){this._started=!1,this._checkLoop&&(clearInterval(this._checkLoop),this._checkLoop=null)}},{key:"setSimulationStepDuration",value:function(e){e!=this._simulationStepDuration&&(this._quality=this._desiredQuality),this._simulationStepDuration=e,this._desiredPerfomance=Math.floor(1e3/e)}},{key:"onSimulationStep",value:function(){this._started&&this._stepCounter++}},{key:"_check",value:function(){this._actualPerfomance=Math.ceil(this._stepCounter*(1e3/this._checkInterval)),this._stepCounter=0;var e=this._desiredPerfomance?this._actualPerfomance/this._desiredPerfomance:1;this._perfomanceIndex=(this._perfomanceIndex+e)/2,this._updateQuality()}},{key:"_updateQuality",value:function(){var e=2.5*this._perfomanceIndex-1.25;e=Math.max(0,Math.min(1,e));var t=-.5*this._perfomanceIndex+.45;this._perfomanceIndex>1?this._desiredQuality+=.1:this._desiredQuality-=t,this._desiredQuality=Math.max(0,Math.min(1,this._desiredQuality));var r=Math.max(e,this._desiredQuality);this._desiredQuality=(this._desiredQuality+r)/2,this._desiredQuality<this._quality?this._quality=this._desiredQuality:this._quality=(this._desiredQuality+9*this._quality)/10}},{key:"started",get:function(){return this._started}},{key:"desiredPerfomance",get:function(){return this._desiredPerfomance}},{key:"actualPerfomance",get:function(){return this._actualPerfomance}},{key:"qualityLevel",get:function(){return this._quality}}])&&k(t.prototype,r),e}();function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var P=!1;const j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=(new Date).getTime().toString();t=t.substr(t.length-6,6)+""+Math.round(1e7*Math.random()),t=(t=Number(t)).toString(35),this._name="",this._team=t,this._code=null,this._initData=null,this._useSandbox=!0,this._executionLimit=100}var t,r;return t=e,(r=[{key:"toJSON",value:function(){return{name:this._name,team:this._team,code:this._code,initData:this._initData,useSandbox:this._useSandbox,executionLimit:this.executionLimit}}},{key:"fromJSON",value:function(e){this._name=e.name,this._team=e.team,this._code=e.code?e.code.replace(/importScripts\w*\([^\)]*\)/g,""):e.code,this._initData=e.initData,this._useSandbox=e.useSandbox,this._executionLimit=e.executionLimit}},{key:"clone",value:function(){var t=new e;return t.fromJSON(this.toJSON()),t}},{key:"fromFile",value:function(e,t){if(!e)throw new Error("tankName is required");this._name=e,this._code=null,this._initData=void 0!==t?t:null}},{key:"fromCode",value:function(e,t,r){if(!e)throw new Error("tankName is required");if(!t)throw new Error("Code is required");if("string"!=typeof e)throw new Error("tankName must be a string");if("string"!=typeof t)throw new Error("code must be a string");t=t.replace(/importScripts\w*\([^\)]*\)/g,""),this._name=e,this._code=t,this._initData=void 0!==r?r:null}},{key:"assignToTeam",value:function(e){this._team=e}},{key:"disableSandbox",value:function(){if(null===this._code)throw new Error("Sandbox can be disabled for AI created from code only (AI name: '"+this._name+"')");P||(console.warn("Disabling sandbox for AI! It could be dangerous."),P=!0),this._useSandbox=!1}},{key:"name",get:function(){return this._name}},{key:"teamName",get:function(){return this._team}},{key:"executionLimit",get:function(){return this._executionLimit},set:function(e){this._executionLimit=e}},{key:"filePath",get:function(){return this._useSandbox?null!==this._code?"tanks/lib/codeWorker.js":"tanks/".concat(this._name,".tank.js"):null}},{key:"code",get:function(){return this._code}},{key:"initData",get:function(){return this._initData}},{key:"useSandbox",get:function(){return this._useSandbox}}])&&O(t.prototype,r),e}();var x=__webpack_require__(8056);const E=JSON.parse('{"definitions":{},"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://jsbattle.jmrlab.com/schema/ubd-schema-v4.json","type":"object","title":"The Ultimate Battle Descriptor Schema","required":["version","rngSeed","timeLimit","teamMode","aiList"],"properties":{"version":{"$id":"#/properties/version","enum":[4],"title":"Version of the schema"},"rngSeed":{"$id":"#/properties/rngSeed","type":"number","title":"Battle RNG seed","default":0,"examples":[0.850067584253805]},"timeLimit":{"$id":"#/properties/timeLimit","type":"number","title":"Duration of the battle in ms (or zero if no limit defined","default":0,"examples":[0,20000]},"teamMode":{"$id":"#/properties/teamMode","type":"boolean","title":"Team death match","default":false,"examples":[false]},"aiList":{"$id":"#/properties/aiList","type":"array","minItems":2,"maxItems":40,"title":"List of AIs that joins the battle","items":{"$id":"#/properties/aiList/items","type":"object","title":"Tank AI","required":["name","team","code","initData","useSandbox","executionLimit"],"properties":{"name":{"$id":"#/properties/aiList/items/properties/name","type":"string","title":"Name of tank","default":"","examples":["User Created Tank"],"pattern":"^(.*)$"},"team":{"$id":"#/properties/aiList/items/properties/team","type":"string","title":"Team of the tank","default":"","examples":["10i42s2ca"],"pattern":"^(.*)$"},"code":{"$id":"#/properties/aiList/items/properties/code","anyOf":[{"type":"string"},{"type":"null"}],"title":"Code of the AI","default":"","examples":["var a = 1;"]},"initData":{"$id":"#/properties/aiList/items/properties/initData","default":null,"title":"Initial data of AI","anyOf":[{"type":"object"},{"type":"null"}],"examples":[null]},"useSandbox":{"$id":"#/properties/aiList/items/properties/useSandbox","type":"boolean","title":"Use sandbox for AI execution","default":true,"examples":[true]},"executionLimit":{"$id":"#/properties/aiList/items/properties/executionLimit","type":"integer","title":"AI code execution time limit in ms","default":100,"examples":[100]},"count":{"$id":"#/properties/aiList/items/properties/count","type":"integer","title":"count of AIs to added","default":1,"examples":[3]}}}}}}');function C(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const A=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._version=4,this._aiList=[],this._rngSeed=(new Date).getTime(),this._teamMode=!1,this._timeLimit=0}var t,r;return t=e,(r=[{key:"addAiDefinition",value:function(e){this._aiList.push(e)}},{key:"setTeamMode",value:function(e){this._teamMode=e}},{key:"getTeamMode",value:function(){return this._teamMode}},{key:"setRngSeed",value:function(e){this._rngSeed=e}},{key:"getVersion",value:function(){return this._version}},{key:"getAiList",value:function(){return this._aiList}},{key:"setTimeLimit",value:function(e){this._timeLimit=e}},{key:"getTimeLimit",value:function(){return this._timeLimit}},{key:"getRngSeed",value:function(){return this._rngSeed}},{key:"encode",value:function(){var e,t,r={version:this._version,rngSeed:this._rngSeed,teamMode:this._teamMode,timeLimit:this._timeLimit,aiList:[]},n=C(this._aiList);try{for(n.s();!(t=n.n()).done;){var o=t.value;e=o.count||1;for(var i=0;i<e;i++)r.aiList.push(o.toJSON())}}catch(e){n.e(e)}finally{n.f()}return JSON.stringify(r)}},{key:"decode",value:function(e,t){var r,n;try{r=JSON.parse(e)}catch(e){throw new Error("Cannot parse UBD file! ".concat(e))}if(this._version!=r.version)throw new Error("Version of UBD does not match. Version ".concat(r.version," is not supported. Please convert to version ").concat(this._version));this.validateJsonData(r),this._rngSeed=r.rngSeed,this._teamMode=r.teamMode,this._timeLimit=r.timeLimit;var o,i=C(r.aiList);try{for(i.s();!(o=i.n()).done;){var a=o.value;n=new j,t||(a.useSandbox=!0,a.executionLimit=100,a.initData=null),n.fromJSON(a),this._aiList.push(n)}}catch(e){i.e(e)}finally{i.f()}}},{key:"validateJsonData",value:function(e){var t=(new x.ZP).compile(E);if(!t(e))throw new Error("UBD validation failed - "+t.errors[0].message)}},{key:"clone",value:function(){var t=new e;t.setRngSeed(this.getRngSeed()),t.setTeamMode(this.getTeamMode()),t.setTimeLimit(this.getTimeLimit());var r,n,o=C(this.getAiList());try{for(o.s();!(n=o.n()).done;)r=n.value.clone(),t.addAiDefinition(r)}catch(e){o.e(e)}finally{o.f()}return t}}])&&R(t.prototype,r),e}(),D=function(e){var t=0;for(var r in e._teamMap)e._teamMap[r].isAlive&&t++;return t<=1};function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const I=function(){function e(r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._debug=n,this._aiList=[],this._allTankList=[],this._tankList=[],this._bulletList=[],this._explodedTankList=[],this._explodedBulletList=[],this._battlefield=null,this._simulationTimeout=null,this._renderInterval=null,this._simulationStepDuration=17,this._renderStepDuration=30,this._renderer=r,this._isRunning=!1,this._collisionResolver=new v,this._rngSeed=(new Date).getTime()+Math.round(1e6*Math.random()),this._rng=t()(this._rngSeed),this._speedMultiplier=1,this._onSimulationStepCallback=[],this._onRenderStepCallback=[],this._onFinishCallback=[],this._onErrorCallback=[],this._onStartCallback=[],this._timeElapsed=0,this._timeLimit=3e4,this._finishCondition=D,this._customFinishCondition=!1,this._eventStore=new p,this._nextTankId=1,this._nextBulletId=1,this._rendererQuality="auto",this._perfMon=new S,this._perfMon.setSimulationStepDuration(this._simulationStepDuration/this._speedMultiplier),this._callStackLimit=Number.MAX_VALUE,this._callStackCount=0,this._teamMap=[],this._teamList=[],this._ultimateBattleDescriptor=new A,this.log("Contructing Simulation")}var r,n;return r=e,(n=[{key:"setRngSeed",value:function(e){this.log("Set renderer RNG Seed to '".concat(e,"'")),this._rngSeed=e,this._ultimateBattleDescriptor.setRngSeed(e),this._rng=t()(this._rngSeed)}},{key:"getRngSeed",value:function(){return this._rngSeed}},{key:"getRandom",value:function(){return this._rng()}},{key:"log",value:function(e){this._debug&&console.log("[SIM] "+e)}},{key:"setFinishCondition",value:function(e){this.log("Setting custom finish conditioins"),this._customFinishCondition=!0,this._finishCondition=e}},{key:"init",value:function(e,t){this.log("Initialize the battlefield (width=".concat(e,", height=").concat(t,")")),this._battlefield=new f,this._battlefield.setSize(e,t),this._battlefield.randomize(this._rng()),this._renderer.initBatlefield(this._battlefield),this._collisionResolver.updateBattlefield(this._battlefield),this.log("The battlefiield initialized. Done.")}},{key:"start",value:function(){if(this.log("Starting the simulation"),0==this._tankList.length)throw new Error("To start simulation, the tank list cannot be empty!");var e;this._isRunning=!0;var t=this;this._renderInterval&&(this.log("Clearing existing render interval"),clearInterval(this._renderInterval),this._renderInterval=null),this.log("Activating AIs..."),this._activateAi((function(){for(t._renderInterval=setInterval((function(){t._updateView()}),t._renderStepDuration),t._simulationTimeout&&clearTimeout(t._simulationTimeout),t._perfMon.start(),t.log("Notify onStartCallback"),e=0;e<t._onStartCallback.length;e++)t._onStartCallback[e]();t.log("Run first simulation step"),t._simulationStep()}),(function(r){for(console.error(r),e=0;e<t._onErrorCallback.length;e++)t._onErrorCallback[e](r.message?r.message:"Error during simulation")}))}},{key:"_simulationStep",value:function(){this._perfMon.onSimulationStep();var e,t=(new Date).getTime(),r=this;this._updateModel(),this._updateAi((function(){if(r._simulationTimeout&&(clearTimeout(r._simulationTimeout),r._simulationTimeout=null),r._timeLimit>0&&r._timeElapsed==r._timeLimit||r._finishCondition(r))for(r.stop(),r._updateModel(),r._updateView(),e=0;e<r._onFinishCallback.length;e++)r._onFinishCallback[e]();if(r._isRunning){var n=(new Date).getTime()-t,o=r._simulationStepDuration/r._speedMultiplier-n;for(o=Math.round(o),e=0;e<r._onSimulationStepCallback.length;e++)r._onSimulationStepCallback[e]();r._timeElapsed+=r._simulationStepDuration,r._timeLimit>0&&(r._timeElapsed=Math.min(r._timeElapsed,r._timeLimit)),o>0?(r._callStackCount=0,r._simulationTimeout=setTimeout(r._simulationStep.bind(r),o)):r._callStackCount>=r._callStackLimit?r._simulationTimeout=setTimeout(r._simulationStep.bind(r),1):(r._callStackCount++,r._simulationStep())}}),(function(t){for(console.error(t),e=0;e<r._onErrorCallback.length;e++)r._onErrorCallback[e](t.message?t.message:"Error during simulation")}))}},{key:"addTank",value:function(e){if(this.log("Adding tank..."),"object"!=M(e))throw"AI definition must be an object";if(!this._battlefield)throw"Simulation not initialized";if(!e.teamName)throw"Team name cannot be empty!";var t=this._battlefield.getStartSlot();if(!t)throw"No free space in the battlefield";this._ultimateBattleDescriptor.addAiDefinition(e),this._ultimateBattleDescriptor.setTeamMode(this.hasTeams());var r=this._createTank(e);r.randomize(this.getRandom()),r.moveTo(t.x,t.y),this._tankList.push(r),this._allTankList.push(r),this._timeLimit>0&&this._allTankList.length>2&&(this._timeLimit+=2e3),this._teamMap[e.teamName]||(this._teamMap[e.teamName]=new u(e.teamName),this._teamList.push(this._teamMap[e.teamName])),this._teamMap[e.teamName].addTank(r);var n=this._createAiWrapper(r,e);return this._aiList.push(n),n}},{key:"setSpeed",value:function(e){this.log("Set speed to '".concat(e,"'")),this._speedMultiplier=Math.max(.01,Number(e)),this._perfMon.setSimulationStepDuration(this._simulationStepDuration/this._speedMultiplier),this._renderer.setSpeed(e)}},{key:"setRendererQuality",value:function(e){this.log("Set rederer quality to '".concat(e,"'")),isNaN(e)&&"auto"!=e||(isNaN(e)||(e=Math.min(1,Math.max(0,e))),this._rendererQuality=e)}},{key:"stop",value:function(){var e,t;for(this.log("stopping the simulation"),this._isRunning=!1,this._perfMon.stop(),this._renderer.stop(),this._simulationTimeout&&(clearTimeout(this._simulationTimeout),this._simulationTimeout=null),this._renderInterval&&(clearInterval(this._renderInterval),this._renderInterval=null),t=0;t<this._aiList.length;t++)(e=this._aiList[t])&&e.deactivate();this._aiList=[]}},{key:"onStep",value:function(e){this._onSimulationStepCallback.push(e)}},{key:"onRender",value:function(e){this._onRenderStepCallback.push(e)}},{key:"onStart",value:function(e){this._onStartCallback.push(e)}},{key:"onFinish",value:function(e){this._onFinishCallback.push(e)}},{key:"onError",value:function(e){this._onErrorCallback.push(e)}},{key:"createUltimateBattleDescriptor",value:function(){if(this._customFinishCondition)throw new Error("Cannot create UBD for battles with custom battle finish condition!");return this._ultimateBattleDescriptor.clone()}},{key:"hasTeams",value:function(){return this._teamList.length!=this._tankList.length}},{key:"_activateAi",value:function(e,t){this._runInSequence(this._aiList,"activate",this._rng(),e,t)}},{key:"_updateAi",value:function(e,t){this._runInSequence(this._aiList,"simulationStep",null,e,t)}},{key:"_runInSequence",value:function(e,t,r,n,o){if(0==e.length)return n();function i(){for(var e=[],t=arguments[1],r=arguments[0],n=2;n<arguments.length;n++)e.push(arguments[n]);return function(n){t.apply(r,e.concat(n))}}var a,u=i(null,n),s=i(null,o);a=r?i(e[e.length-1],e[e.length-1][t],r,u,s):i(e[e.length-1],e[e.length-1][t],u,s);for(var c=e.length-2;c>=0;c--)a=r?i(e[c],e[c][t],r,a,s):i(e[c],e[c][t],a,s);a()}},{key:"_updateModel",value:function(){var e,t,r,n;for(e=0;e<this._tankList.length;e++)(t=this._tankList[e])&&t.simulationStep(this._collisionResolver);var o=0;for(e=0;e<this._tankList.length;e++)(t=this._tankList[e])&&t.energy<=0&&(o++,this._tankList[e]=null,this._explodedTankList.push(t),this._collisionResolver.removeTank(t),this._eventStore.add("tank_"+t.id,{type:"destroy",tank:t}));var i=[];for(e=0;e<this._aiList.length;e++)(n=this._aiList[e])&&(n.tank.energy<=0?(this._aiList[e]=null,n.deactivate()):i.push(n));for(this._aiList=i,e=0;e<this._tankList.length;e++)if((t=this._tankList[e])&&t.isShooting){var a=t.handleShoot();r=this._createBullet(t,a),this._bulletList.push(r),this._eventStore.add("tank_"+t.id,{type:"shoot",tank:t,bullet:r})}for(e=0;e<this._tankList.length;e++)if(t=this._tankList[e])for(var u=0;u<o;u++)t.onSurviveScore();for(e=0;e<this._bulletList.length;e++)(r=this._bulletList[e])&&(r.simulationStep(),this._collisionResolver.hitTestBullet(r)&&(this._bulletList[e]=null,this._explodedBulletList.push(r),this._collisionResolver.removeBullet(r),this._eventStore.add("bullet_"+r.id,{type:"explode",bullet:r})));for(e in this._teamMap)this._teamMap[e].processMessages()}},{key:"_updateView",value:function(){var e,t,r;for("auto"==this._rendererQuality?this._renderer.quality=this._perfMon.qualityLevel:this._renderer.quality=this._rendererQuality,this._renderer.preRender(),this._renderer.renderClock(this._timeElapsed,this._timeLimit),e=0;e<this._tankList.length;e++)(t=this._tankList[e])&&this._renderer.renderTank(t,this._eventStore.get("tank_"+t.id));for(e=0;e<this._bulletList.length;e++)(r=this._bulletList[e])&&this._renderer.renderBullet(r,this._eventStore.get("bullet_"+r.id));for(;this._explodedTankList.length;)t=this._explodedTankList.pop(),this._renderer.renderTank(t,this._eventStore.get("tank_"+t.id));for(;this._explodedBulletList.length;)r=this._explodedBulletList.pop(),this._renderer.renderBullet(r,this._eventStore.get("bullet_"+r.id));for(this._renderer.renderTankStats(this._allTankList),this._renderer.postRender(),e=0;e<this._onRenderStepCallback.length;e++)this._onRenderStepCallback[e]();this._eventStore.clear()}},{key:"_createAiWrapper",value:function(e,t){return new w(e,t)}},{key:"_createTank",value:function(e){return new i(e,this._nextTankId++)}},{key:"_createBullet",value:function(e,t){return new c(e,this._nextBulletId++,t)}},{key:"tankList",get:function(){return this._allTankList}},{key:"teamList",get:function(){return this._teamList}},{key:"renderer",get:function(){return this._renderer}},{key:"battlefield",get:function(){return this._battlefield}},{key:"timeElapsed",get:function(){return this._timeElapsed}},{key:"timeLimit",get:function(){return this._timeLimit},set:function(e){this.log("Set time limit to '".concat(e,"'")),this._ultimateBattleDescriptor.setTimeLimit(e),this._timeLimit=e}}])&&N(r.prototype,n),e}();function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const $=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"initBatlefield",value:function(e){}},{key:"preRender",value:function(){}},{key:"postRender",value:function(){}},{key:"renderTank",value:function(e,t){}},{key:"renderClock",value:function(e,t){}},{key:"renderTankStats",value:function(e){}},{key:"renderBullet",value:function(e,t){}},{key:"setSpeed",value:function(e){}},{key:"stop",value:function(){}},{key:"dispose",value:function(){}},{key:"quality",get:function(){return 1},set:function(e){}}])&&L(t.prototype,r),e}(),V=PIXI;function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var B=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._model=t,this._view=null,this._isAlive=!0}var t,r;return t=e,(r=[{key:"destroy",value:function(){this._isAlive=!1}},{key:"update",value:function(e){}},{key:"isAlive",get:function(){return this._isAlive}},{key:"model",get:function(){return this._model}},{key:"view",get:function(){return this._view}}])&&z(t.prototype,r),e}();function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=G(n);if(o){var r=G(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return H(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this))._debug=e,t._tankMap=[],t._bulletMap=[],t._offsetX=0,t._offsetY=0,t._speedMultiplier=1,t}return t=a,(r=[{key:"log",value:function(e){this._debug&&console.log("[RENDERER] "+e)}},{key:"initBatlefield",value:function(e){this._offsetX=e.offsetX,this._offsetY=e.offsetY}},{key:"renderTank",value:function(e,t){this._renderModel(e,t,this._tankMap,this._createTankView)}},{key:"renderBullet",value:function(e,t){this._renderModel(e,t,this._bulletMap,this._createBulletView)}},{key:"getBulletView",value:function(e){return this._bulletMap[e]}},{key:"getTankView",value:function(e){return this._tankMap[e]}},{key:"setSpeed",value:function(e){this._speedMultiplier=e}},{key:"_renderModel",value:function(e,t,r,n){var o=null;return r[e.id]?o=r[e.id]:(o=n(e),r[e.id]=o),o.update(t),o}},{key:"_createTankView",value:function(e){return new B(e)}},{key:"_createBulletView",value:function(e){return new B(e)}},{key:"dispose",value:function(){}},{key:"offsetX",get:function(){return this._offsetX}},{key:"offsetY",get:function(){return this._offsetY}},{key:"speedMultiplier",get:function(){return this._speedMultiplier}}])&&F(t.prototype,r),a}($);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Y(e,t,r){return(Y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Z(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Z(n);if(o){var r=Z(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Q(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._model=e,t._view=new V.Container,t._create(t._view),t}return t=a,(r=[{key:"update",value:function(e){Y(Z(a.prototype),"update",this).call(this,e),void 0!==this._model.x&&(this._view.x=this._model.x),void 0!==this._model.y&&(this._view.y=this._model.y),void 0!==this._model.angle&&(this._view.rotation=this._model.angle*(Math.PI/180))}},{key:"destroy",value:function(){Y(Z(a.prototype),"destroy",this).call(this),this.view.parent&&this.view.parent.removeChild(this.view)}},{key:"_create",value:function(e){}}])&&W(t.prototype,r),a}(B);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ne(e,t,r){return(ne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ae(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ae(n);if(o){var r=ae(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ie(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._hudView=new V.Container,t._createHud(t._hudView),t}return t=a,(r=[{key:"update",value:function(e){ne(ae(a.prototype),"update",this).call(this,e),this.view.rotation=0,this.body.rotation=this.model.angle*(Math.PI/180),this.gun.rotation=(this.model.angle+this.model.gunAngle)*(Math.PI/180),this.radar.rotation=(this.model.angle+this.model.radarAngle)*(Math.PI/180),this.energyBar.scale.x=this.model.energy/this.model.maxEnergy,this.label.text=this.model.fullName,this.hudView.x=this.view.x,this.hudView.y=this.view.y;for(var t=0;t<e.length;t++)this._onEvent(e[t])}},{key:"_onEvent",value:function(e){switch(e.type){case"shoot":this._onShoot(e);break;case"destroy":this._onDestroy(e)}}},{key:"_onShoot",value:function(e){}},{key:"_onDestroy",value:function(e){this.destroy()}},{key:"_create",value:function(e){ne(ae(a.prototype),"_create",this).call(this,e),this._body=this._createBody(),this._gun=this._createGun(),this._radar=this._createRadar(),e.addChild(this._body),e.addChild(this._gun),e.addChild(this._radar)}},{key:"_createHud",value:function(e){this._label=this._createLabel(),this._energyBar=this._createEnergyBar(),e.addChild(this._createHudBackground()),e.addChild(this._energyBar),e.addChild(this._label)}},{key:"_createBody",value:function(){return new V.Sprite}},{key:"_createGun",value:function(){return new V.Sprite}},{key:"_createRadar",value:function(){return new V.Sprite}},{key:"_createHudBackground",value:function(){return new V.Sprite}},{key:"_createEnergyBar",value:function(){return new V.Sprite}},{key:"_createLabel",value:function(){return new V.Text}},{key:"destroy",value:function(){ne(ae(a.prototype),"destroy",this).call(this),this.hudView.parent&&this.hudView.parent.removeChild(this.hudView)}},{key:"body",get:function(){return this._body}},{key:"hudView",get:function(){return this._hudView}},{key:"gun",get:function(){return this._gun}},{key:"radar",get:function(){return this._radar}},{key:"label",get:function(){return this._label}},{key:"energyBar",get:function(){return this._energyBar}}])&&re(t.prototype,r),a}(ee);function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ce=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"construct",value:function(){this._msElapsed=0,this._msLimit=0}},{key:"update",value:function(e,t){this._msElapsed=e,this._msLimit=t}},{key:"msElapsed",get:function(){return this._msElapsed}},{key:"msLimit",get:function(){return this._msLimit}},{key:"text",get:function(){var e=Math.max(0,this._msLimit-this._msElapsed),t=Math.floor(e/1e3),r=e%1e3;for(t=t.toString();t.length<2;)t="0"+t;for(r=r.toString();r.length<3;)r="0"+r;return"0:"+t+"."+r}}])&&se(t.prototype,r),e}();function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function he(e,t,r){return(he="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ye(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ye(n);if(o){var r=ye(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return de(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t))._name=e,r._isDisposed=!1,V.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,r._masterContainer=new V.Container,r._tankContainer=new V.Container,r._bulletContainer=new V.Container,r._hudContainer=new V.Container,r._masterContainer.addChild(r._tankContainer),r._masterContainer.addChild(r._bulletContainer),r._masterContainer.addChild(r._hudContainer),r._renderer=null,r._stage=null,r._clockModel=new ce,r._clockView=null,r._battlefieldView=null,window.devicePixelRatio>=2?r._rendererScale=2:r._rendererScale=1,r.log("Contructing Renderer"),r}return t=a,(r=[{key:"initBatlefield",value:function(e){this.log("initializing the battlefield"),he(ye(a.prototype),"initBatlefield",this).call(this,e),this._masterContainer.x=-this.offsetX,this._masterContainer.y=-this.offsetY,this.log("battlefield offset: x=".concat(this._masterContainer.x,", y=").concat(this._masterContainer.y));var t={view:this._canvas,antialias:!1,backgroundColor:16777215,resolution:this._rendererScale,width:e.width+2*e.margin,height:e.height+2*e.margin};this.log("renderer settings: width=".concat(t.width,", height=").concat(t.width)),this._renderer=new V.autoDetectRenderer(t),this._stage=new V.Container,this._battlefieldView=this._createBattlefieldView(e),this._clockView=this._createClockView(this._clockModel),this._stage.addChild(this._battlefieldView.view),this._stage.addChild(this._masterContainer),this._stage.addChild(this._clockView.view),this._renderer.render(this._stage),this.log("battlefield initialized")}},{key:"init",value:function(e){this._canvas=e}},{key:"loadAssets",value:function(e,t){var r=this;if(this.log("loading assets, urlPrefix: '".concat(t,"'")),t=t||"",!this._name)return this.log("No assets to load for that renderer. Done."),void e();var n=new V.Loader,o=[];for(var i in n.resources)this.log("adding resource to load '".concat(i,"'")),o.push(i);this._getSpritesheetUrls(this._name,this._rendererScale).filter((function(e){return-1==o.indexOf(e)})).forEach((function(e){n.add(t+e)})),this.log("loading assets..."),n.load((function(t,n){if(r._isDisposed)return r.log("Renderer disposed: Clearing texture cache"),V.utils.clearTextureCache(),void r.log("Renderer disposed: Skipping onAssetsLoaded handler");r.log("onAssetsLoaded()"),r.onAssetsLoaded(),r.log("Assets loaded"),e()}))}},{key:"onAssetsLoaded",value:function(){}},{key:"preRender",value:function(){this._battlefieldView.update()}},{key:"renderTank",value:function(e,t){he(ye(a.prototype),"renderTank",this).call(this,e,t);var r=this.getTankView(e.id);!r.parent&&r.isAlive&&(this._tankContainer.addChild(r.view),this._hudContainer.addChild(r.hudView))}},{key:"renderBullet",value:function(e,t){he(ye(a.prototype),"renderBullet",this).call(this,e,t);var r=this.getBulletView(e.id);!r.parent&&r.isAlive&&this._bulletContainer.addChild(r.view)}},{key:"renderClock",value:function(e,t){this._clockModel.update(e,t),this._clockView.update()}},{key:"postRender",value:function(){he(ye(a.prototype),"postRender",this).call(this),this._renderer.render(this._stage)}},{key:"_getSpritesheetUrls",value:function(e,t){var r=2==t?"retina@2x":"web";return["img/spritesheets/".concat(e,"/").concat(r,"/jsbattle.json")]}},{key:"_createTankView",value:function(e){return new ue(e)}},{key:"_createBulletView",value:function(e){return new ee(e)}},{key:"_createBattlefieldView",value:function(e){return new ee(e)}},{key:"_createClockView",value:function(e){return new ee(e)}},{key:"dispose",value:function(){this.log("Disposing..."),this._isDisposed=!0,this._renderer?(this._renderer.context.gl.getExtension("WEBGL_lose_context").loseContext(),this._renderer.destroy(),this._renderer=null):this.log("Already disposed"),this._canvas=null,this._stage=null,this.log("Clearing texture cache"),V.utils.clearTextureCache()}},{key:"stage",get:function(){return this._stage}},{key:"battlefieldView",get:function(){return this._battlefieldView}},{key:"masterContainer",get:function(){return this._masterContainer}}])&&fe(t.prototype,r),a}(K);function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ke(n);if(o){var r=ke(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return we(this,e)});function a(){return _e(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"_create",value:function(e){var t=new V.Graphics;t.beginFill(0),t.lineStyle(1,16776960,.8),t.drawRect(0,0,this.model.width+2*this.model.margin,this.model.height+2*this.model.margin),t.endFill(),e.addChild(t),(t=new V.Graphics).beginFill(0),t.lineStyle(1,16776960,.8),t.drawRect(this.model.margin,this.model.margin,this.model.width,this.model.height),t.endFill(),e.addChild(t)}},{key:"update",value:function(e){}}])&&be(t.prototype,r),a}(ee);function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ee(n);if(o){var r=Ee(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return xe(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"_create",value:function(e){var t=new V.TextStyle({fontFamily:"Arial",fontSize:12,fill:"#00ff00"});this._label=new V.Text("clock",t),this._label.x=5,this._label.y=5,e.addChild(this._label)}},{key:"update",value:function(e){this._label.text=this.model.text}}])&&Pe(t.prototype,r),a}(ee);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ae(e,t,r){return(Ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ne(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ne(n);if(o){var r=Ne(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Me(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"update",value:function(e){Ae(Ne(a.prototype),"update",this).call(this,e),this.view.scale.x=this.view.scale.y=.7*this.model.power+.3,this.model.exploded&&this.destroy()}}])&&Re(t.prototype,r),a}(ee);function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e,t){return!t||"object"!==Le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Be(n);if(o){var r=Be(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ze(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"_create",value:function(e){var t=new V.Graphics;t.beginFill(65280,.5),t.drawCircle(0,0,5),t.endFill(),e.addChild(t)}}])&&$e(t.prototype,r),a}(Ie);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ke(n);if(o){var r=Ke(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ge(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"_createBody",value:function(){var e=new V.Graphics;return e.lineStyle(1,16776960,.8),e.beginFill(65280,.5),e.drawRect(-15,-15,30,30),e.endFill(),e}},{key:"_createGun",value:function(){var e=new V.Graphics;return e.beginFill(65280,.5),e.lineStyle(1,16776960,.8),e.drawCircle(0,0,10),e.drawRect(0,-3,30,6),e.endFill(),e}},{key:"_createRadar",value:function(){var e=new V.Graphics;e.beginFill(65280,.5),e.lineStyle(1,16776960,.8),e.drawRect(-3,-10,6,20),e.endFill(),e.lineStyle(),e.beginFill(11206570,.1),e.moveTo(0,-3);var t=300*Math.tan(Math.PI/180*6)/2;return e.lineTo(300,-t),e.lineTo(300,t),e.lineTo(0,3),e}},{key:"_createLabel",value:function(){var e=new V.TextStyle({fontFamily:"Arial",fontSize:12,fill:65280}),t=new V.Text("",e);return t.anchor.set(.5,.5),t.x=0,t.y=-40,t}},{key:"_createHudBackground",value:function(){var e=new V.Graphics;return e.beginFill(0,1),e.lineStyle(1,16776960,.8),e.drawRect(-26,-3,52,6),e.y=-30,e}},{key:"_createEnergyBar",value:function(){var e=new V.Graphics;return e.beginFill(65280,1),e.drawRect(0,-2,50,4),e.x=-25,e.y=-30,e}}])&&qe(t.prototype,r),a}(ue);function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Je(e,t,r){return(Je="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=et(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=et(n);if(o){var r=et(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ze(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,void 0,e))._frameCounter=0,t._fpsLabel=null,t._scoreBoard=null,t}return t=a,(r=[{key:"initBatlefield",value:function(e){Je(et(a.prototype),"initBatlefield",this).call(this,e);var t=new V.TextStyle({fontFamily:"Arial",fontSize:12,fill:"#00ff00"});this._fpsLabel=new V.Text("FPS",t),this._fpsLabel.x=100,this._fpsLabel.y=5,this.stage.addChild(this._fpsLabel);var r=this;setInterval((function(){r._fpsLabel.text="FPS: "+r._frameCounter,r._frameCounter=0}),1e3),t=new V.TextStyle({fontFamily:"Arial",fontSize:12,fill:"#00ff00"}),this._scoreBoard=new V.Text("scores",t),this._scoreBoard.x=e.margin+2,this._scoreBoard.y=e.margin+2,this._scoreBoard.alpha=.5,this.stage.addChild(this._scoreBoard)}},{key:"renderTankStats",value:function(e){Je(et(a.prototype),"renderTankStats",this).call(this,e);var t,r=[];for(t=0;t<e.length;t++)r.push({name:e[t].fullName,energy:e[t].energy,value:e[t].score});r.sort((function(e,t){return e.value<t.value?1:e.value>t.value?-1:0}));var n="";for(t=0;t<r.length;t++)n+=r[t].value.toFixed(3)+" - "+r[t].name+(0==r[t].energy?" [X]":"")+"\n";this._scoreBoard.text=n}},{key:"postRender",value:function(){Je(et(a.prototype),"postRender",this).call(this),this._frameCounter++}},{key:"_createBattlefieldView",value:function(e){return new Se(e)}},{key:"_createClockView",value:function(e){return new Ce(e)}},{key:"_createBulletView",value:function(e){return new Ue(e)}},{key:"_createTankView",value:function(e){return new Xe(e)}}])&&Ye(t.prototype,r),a}(me);function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function at(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var st=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ut(n);if(o){var r=ut(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return at(this,e)});function a(){return nt(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"_create",value:function(e){var t=V.Sprite.from("battlefield");e.addChild(t)}},{key:"update",value:function(e){}}])&&ot(t.prototype,r),a}(ee);function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ht(e,t){return!t||"object"!==ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pt(n);if(o){var r=pt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ht(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"_create",value:function(e){var t=new V.TextStyle({fontFamily:"Arial",fontSize:15,fill:"#000000"});this._label=new V.Text("clock",t),this._label.x=10,this._label.y=580,e.addChild(this._label)}},{key:"update",value:function(e){this._label.text=this.model.text}}])&&lt(t.prototype,r),a}(ee);function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e,t){return!t||"object"!==yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bt(n);if(o){var r=bt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return _t(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"_create",value:function(e){var t=V.Sprite.from("bullet");t.anchor.set(.5),e.addChild(t)}}])&&mt(t.prototype,r),a}(Ie);function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function St(e,t,r){return(St="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pt(e,t){return!t||"object"!==wt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jt(n);if(o){var r=jt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Pt(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"update",value:function(e){St(jt(a.prototype),"update",this).call(this,e),this._shoot.alpha=this.model.isShooting?1:.7*this._shoot.alpha}},{key:"_createBody",value:function(){var e=V.Sprite.from("tank_body");return e.anchor.set(.5),e}},{key:"_createGun",value:function(){var e=new V.Container,t=V.Sprite.from("tank_gun");return t.anchor.set(.3,.5),e.addChild(t),this._shoot=V.Sprite.from("tank_shoot"),this._shoot.anchor.set(-1.2,.5),this._shoot.alpha=0,e.addChild(this._shoot),e}},{key:"_createRadar",value:function(){var e=V.Sprite.from("tank_radar");return e.anchor.set(.5),e}},{key:"_createLabel",value:function(){var e=new V.TextStyle({fontFamily:"Arial",fontSize:12,fill:0}),t=new V.Text("",e);return t.anchor.set(.5,.5),t.x=0,t.y=-40,t}},{key:"_createHudBackground",value:function(){var e=new V.Graphics;return e.beginFill(0,1),e.drawRect(-26,-3,52,6),e.y=-30,e}},{key:"_createEnergyBar",value:function(){var e=new V.Graphics;return e.beginFill(16711680,1),e.drawRect(0,-2,50,4),e.x=-25,e.y=-30,e}}])&&kt(t.prototype,r),a}(ue);function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tt(e,t,r){return(Tt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function At(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dt(n);if(o){var r=Dt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return At(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,"bw",e))._bigBoomAnim=[],t._smallBoomAnim=[],t._shakeTimer=0,t}return t=a,(r=[{key:"onAssetsLoaded",value:function(){for(var e=0;e<=9;e++)this._bigBoomAnim.push(V.Texture.from("big_boom_00"+e)),this._smallBoomAnim.push(V.Texture.from("small_boom_00"+e))}},{key:"initBatlefield",value:function(e){Tt(Dt(a.prototype),"initBatlefield",this).call(this,e)}},{key:"renderTank",value:function(e,t){Tt(Dt(a.prototype),"renderTank",this).call(this,e,t),0==e.energy&&(this._shakeTimer=10,this._addExplosion(e.x,e.y,this._bigBoomAnim))}},{key:"renderBullet",value:function(e,t){Tt(Dt(a.prototype),"renderBullet",this).call(this,e,t),e.exploded&&this._addExplosion(e.x,e.y,this._smallBoomAnim)}},{key:"postRender",value:function(){Tt(Dt(a.prototype),"postRender",this).call(this),this._shakeTimer>0?(this._shakeTimer--,this.masterContainer.x=10*Math.random()-5-this.offsetX,this.masterContainer.y=10*Math.random()-5-this.offsetY):(this.masterContainer.x=-this.offsetX,this.masterContainer.y=-this.offsetY)}},{key:"_createBattlefieldView",value:function(e){return new st(e)}},{key:"_createClockView",value:function(e){return new dt(e)}},{key:"_createBulletView",value:function(e){return new gt(e)}},{key:"_createTankView",value:function(e){return new xt(e)}},{key:"_addExplosion",value:function(e,t,r){var n=new V.AnimatedSprite(r);n.anchor.set(.5),this.masterContainer.addChild(n),n.x=e,n.y=t,n.loop=!1,n.onComplete=function(){this.stop(),this.parent.removeChild(this)},n.play()}}])&&Ct(t.prototype,r),a}(me);function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function It(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lt(e,t,r){return(Lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vt(e,t){return!t||"object"!==Nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zt(n);if(o){var r=zt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Vt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._holeList=[],t._settings=null,t}return t=a,(r=[{key:"configure",value:function(e){this._settings=e}},{key:"_create",value:function(e){var t=V.Sprite.from("battlefield");e.addChild(t);var r=new V.Graphics;r.beginFill(255,1),r.moveTo(25,25),r.lineTo(875,25),r.lineTo(875,575),r.lineTo(90,575),r.lineTo(90,565),r.lineTo(25,565),r.lineTo(25,25),r.endFill(),this._craterContainer=new V.Container,this._craterContainer.mask=r,e.addChild(this._craterContainer),e.addChild(r);var n=new V.Graphics;n.beginFill(255,.4),n.moveTo(15,15),n.lineTo(885,15),n.lineTo(885,585),n.lineTo(80,585),n.lineTo(80,575),n.lineTo(15,575),n.lineTo(15,15),n.lineTo(25,25),n.lineTo(25,575),n.lineTo(80,575),n.lineTo(80,575),n.lineTo(875,575),n.lineTo(875,25),n.lineTo(25,25),n.endFill(),this._holesContainer=new V.Container,this._holesContainer.mask=n,e.addChild(this._holesContainer),e.addChild(n)}},{key:"addCrater",value:function(e,t){var r=V.Sprite.from("crater");r.anchor.set(.5),r.x=e-this.model.offsetX,r.y=t-this.model.offsetY,r.blendMode=V.BLEND_MODES.MULTIPLY,r.alpha=.8,this._craterContainer.addChild(r)}},{key:"update",value:function(){Lt(zt(a.prototype),"update",this).call(this),this._holesContainer.visible=this._settings.skratchLimit>0,this._craterContainer.visible=this._settings.showCraters}},{key:"addBulletHole",value:function(e,t,r){var n=0;if(Math.abs(t-this.model.maxY)<10)t=this.model.maxY+3+3*Math.random();else if(Math.abs(t-this.model.minY)<10)t=this.model.minY-3-3*Math.random();else if(Math.abs(e-this.model.maxX)<10)e=this.model.maxX+3+3*Math.random(),n=Math.PI/2;else{if(!(Math.abs(e-this.model.minX)<10))return;e=this.model.minX-3-3*Math.random(),n=Math.PI/2}var o=V.Sprite.from("hole");o.anchor.set(.5),o.x=e-this.model.offsetX,o.y=t-this.model.offsetY,o.rotation=n,o.scale.x=o.scale.y=.7+.5*r,this._holesContainer.addChild(o),this._holeList.push(o);for(var i=this._settings?this._settings.skratchLimit:20;this._holeList.length>i;)(o=this._holeList.shift()).parent.removeChild(o)}}])&&It(t.prototype,r),a}(ee);function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qt(e,t){return(qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ht(e,t){return!t||"object"!==Ut(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gt(e){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Gt(n);if(o){var r=Gt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ht(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"_create",value:function(e){var t=new V.TextStyle({fontFamily:"Arial",fontSize:15,fill:"#000000"});this._label=new V.Text("clock",t),this._label.x=10,this._label.y=580,e.addChild(this._label)}},{key:"update",value:function(e){this._label.text=this.model.text}}])&&Ft(t.prototype,r),a}(ee);function Xt(e){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yt(e,t,r){return(Yt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Jt(e,t){return(Jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qt(e,t){return!t||"object"!==Xt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var er=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Zt(n);if(o){var r=Zt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Qt(this,e)});function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"configure",value:function(e){this._settings=e}},{key:"update",value:function(e){Yt(Zt(a.prototype),"update",this).call(this,e),this._glow.visible=this._settings&&this._settings.showGlow}},{key:"_create",value:function(e){var t=V.Sprite.from("bullet");t.anchor.set(.5);var r=V.Sprite.from("glow");r.anchor.set(.5),r.blendMode=V.BLEND_MODES.ADD,r.alpha=.1,this._glow=r,e.addChild(r),e.addChild(t)}}])&&Wt(t.prototype,r),a}(Ie);function tr(e){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nr(e,t,r){return(nr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ar(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function or(e,t){return(or=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ir(e,t){return!t||"object"!==tr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ar(e){return(ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ur=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&or(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ar(n);if(o){var r=ar(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ir(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._lightTimer=0,t}return t=a,(r=[{key:"update",value:function(e){nr(ar(a.prototype),"update",this).call(this,e),this._shoot.alpha=.8*this._shoot.alpha,this._tankGun.x=.8*this._tankGun.x,this.radar.rotation=(-this.model.gunAngle+this._model.radarAngle)*(Math.PI/180),this._lightTimer=this.model.enemySpot?this._lightTimer+1:0,this._light.alpha=.5*-Math.cos(.25*this._lightTimer)+.5}},{key:"_onShoot",value:function(e){nr(ar(a.prototype),"_onShoot",this).call(this,e),this._tankGun.x=-1-3*e.bullet.power,this._shoot.alpha=1}},{key:"_create",value:function(e){nr(ar(a.prototype),"_create",this).call(this,e),this._tankGun.addChild(this.radar)}},{key:"_createBody",value:function(){var e=V.Sprite.from("tank_body_"+this.model.skin);return e.anchor.set(.3,.5),e}},{key:"_createGun",value:function(){var e=new V.Container,t=V.Sprite.from("tank_gun_"+this.model.skin);return t.anchor.set(.3,.5),e.addChild(t),this._tankGun=t,this._shoot=V.Sprite.from("tank_shoot"),this._shoot.anchor.set(.3,.5),this._shoot.alpha=0,this._light=V.Sprite.from("tank_light"),this._light.anchor.set(.3,.5),this._light.alpha=0,e.addChild(this._shoot),e.addChild(this._light),e}},{key:"_createRadar",value:function(){var e=V.Sprite.from("tank_radar_"+this.model.skin);return e.anchor.set(.2,.5),e.x=-5,e}},{key:"_createLabel",value:function(){var e=new V.TextStyle({fontFamily:"Arial",fontSize:10,stroke:0,strokeThickness:2,fill:16777147}),t=new V.Text("",e);return t.anchor.set(.5,.5),t.x=0,t.y=-40,t}},{key:"_createHudBackground",value:function(){var e=new V.Graphics;return e.beginFill(0,1),e.drawRect(-26,-3,52,6),e.y=-30,e}},{key:"_createEnergyBar",value:function(){var e=new V.Graphics;return e.beginFill(16777113,1),e.drawRect(0,-2,50,4),e.x=-25,e.y=-30,e}}])&&rr(t.prototype,r),a}(ue);function sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var cr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._particleLimit=1e3,this._skratchLimit=100,this._showDirt=!0,this._showGlow=!0,this._showCraters=!0,this._dropFrames=1,this._quality=1,this.quality=this._quality}var t,r;return t=e,(r=[{key:"dropFrames",get:function(){return this._dropFrames}},{key:"particleLimit",get:function(){return this._particleLimit}},{key:"skratchLimit",get:function(){return this._skratchLimit}},{key:"showDirt",get:function(){return this._showDirt}},{key:"showGlow",get:function(){return this._showGlow}},{key:"showCraters",get:function(){return this._showCraters}},{key:"quality",get:function(){return this._quality},set:function(e){e=Math.min(1,Math.max(0,e)),this._quality=e,this._particleLimit=Math.round(1e3*e*e),this._skratchLimit=Math.round(100*e),this._showDirt=e>.2,this._showGlow=e>.5,this._showCraters=e>.1,this._dropFrames=e>.3?1:e>.2?2:e>.1?3:4,this._quality=e}}])&&sr(t.prototype,r),e}();function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hr(e,t,r){return(hr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yr(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function pr(e,t){return(pr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dr(e,t){return!t||"object"!==lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yr(e){return(yr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yr(n);if(o){var r=yr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return dr(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,"brody",e))._bigBoomAnim=[],t._shakeTimer=0,t._particleContainer=null,t._particleList=[],t._explosionList=[],t._settings=new cr,t._masterContainer.addChild(t._bulletContainer),t._frameTimer=0,t._frameCounter=0,t._fpsInterval=null,t._fps=30,t}return t=a,(r=[{key:"onAssetsLoaded",value:function(){var e;for(e=0;e<=22;e++)this._bigBoomAnim.push(V.Texture.from("big_boom_0"+(e<10?"0"+e:e)))}},{key:"initBatlefield",value:function(e){hr(yr(a.prototype),"initBatlefield",this).call(this,e),this.battlefieldView.configure(this._settings),this._particleContainer=new V.ParticleContainer(1e3,{position:!0,rotation:!0,alpha:!0}),this._masterContainer.addChild(this._particleContainer),this._masterContainer.addChild(this._hudContainer);var t=this;this._fpsInterval=setInterval((function(){t._fps=t._frameCounter,t._frameCounter=0}),1e3)}},{key:"renderTank",value:function(e,t){var r;for(r in hr(yr(a.prototype),"renderTank",this).call(this,e,t),t)if("destroy"==t[r].type){this._shakeTimer=10,this._addTankExplosion(e);break}var n=e.throttle>0?180:0,o=(e.angle+n)*(Math.PI/180);if(e.speed>1){var i=e.x+20*Math.cos(o-Math.PI/4)+7*Math.cos(o),u=e.y+20*Math.sin(o-Math.PI/4)+7*Math.sin(o),s=e.x+20*Math.cos(o+Math.PI/4)+7*Math.cos(o),c=e.y+20*Math.sin(o+Math.PI/4)+7*Math.sin(o);Math.random()<this.speedMultiplier&&(this._addDirt(i,u),this._addDirt(s,c))}}},{key:"renderBullet",value:function(e,t){hr(yr(a.prototype),"renderBullet",this).call(this,e,t),this.getBulletView(e.id).configure(this._settings),e.exploded&&(this._addBulletExplosion(e),this.battlefieldView.addBulletHole(e.x,e.y,e.power))}},{key:"preRender",value:function(){var e;hr(yr(a.prototype),"preRender",this).call(this);var t,r=0;for(t=this._particleList.length-1;t>=0;t--)(e=this._particleList[t])&&(e.x+=this.speedMultiplier*e.speed*e.rotation*Math.cos(e.rotation),e.y+=this.speedMultiplier*e.speed*e.rotation*Math.sin(e.rotation),e.alpha=Math.max(0,e.alpha-this.speedMultiplier*e.alphaSpeed),e.lifetime-=this.speedMultiplier,e.lifetime<=0||r>this._settings.particleLimit?(e.parent.removeChild(e),this._particleList[t]=null):r++);for(t=0;t<this._explosionList.length;t++)this._explosionList[t]&&(this._explosionList[t].alpha=this._explosionList[t].alpha-.12*this.speedMultiplier,this._explosionList[t].alpha<.01&&(this._explosionList[t].parent.removeChild(this._explosionList[t]),this._explosionList[t]=null))}},{key:"postRender",value:function(){this._frameTimer++,this._frameCounter++,this._frameTimer%this._settings.dropFrames==0&&hr(yr(a.prototype),"postRender",this).call(this),this._shakeTimer>0?(this._shakeTimer--,this.masterContainer.x=10*Math.random()-5-this.offsetX,this.masterContainer.y=10*Math.random()-5-this.offsetY,this._battlefieldView.view.x=10*Math.random()-5,this._battlefieldView.view.y=10*Math.random()-5):(this.masterContainer.x=-this.offsetX,this.masterContainer.y=-this.offsetY,this._battlefieldView.view.x=0,this._battlefieldView.view.y=0)}},{key:"stop",value:function(){this._fpsInterval&&clearInterval(this._fpsInterval)}},{key:"_getSpritesheetUrls",value:function(e,t){return t>=2?["img/spritesheets/".concat(e,"/retina@2x/jsbattle_0.json"),"img/spritesheets/".concat(e,"/retina@2x/jsbattle_1.json")]:["img/spritesheets/".concat(e,"/web/jsbattle.json")]}},{key:"_addTankExplosion",value:function(e){this._addExplosion(e.x,e.y,this._bigBoomAnim),this.battlefieldView.addCrater(e.x,e.y),this._addSparks(e.x,e.y,300)}},{key:"_addBulletExplosion",value:function(e){this._addGlow(e.x,e.y,.3+.6*e.power);var t=5+40*e.power;this._addSparks(e.x,e.y,t)}},{key:"_createBattlefieldView",value:function(e){return new Bt(e)}},{key:"_createClockView",value:function(e){return new Kt(e)}},{key:"_createBulletView",value:function(e){return new er(e)}},{key:"_createTankView",value:function(e){return new ur(e)}},{key:"_addExplosion",value:function(e,t,r){this._addGlow(e,t,5);var n=new V.AnimatedSprite(r);n.animationSpeed=this.speedMultiplier,n.anchor.set(.5),this.masterContainer.addChild(n),n.x=e,n.y=t,n.loop=!1,n.blendMode=V.BLEND_MODES.ADD,n.onComplete=function(){this.stop(),this.parent.removeChild(this)},n.play()}},{key:"_addGlow",value:function(e,t,r){if(this._settings.showGlow){var n=V.Sprite.from("glow");n.anchor.set(.5),n.scale.x=n.scale.y=r,n.alpha=.4,n.blendMode=V.BLEND_MODES.ADD,n.x=e,n.y=t,this.masterContainer.addChild(n),this._explosionList.push(n)}}},{key:"_addSparks",value:function(e,t,r){r=Math.ceil(r*this._settings.quality);for(var n=0;n<r;n++){var o=V.Sprite.from("spark");o.x=e,o.y=t,o.alphaSpeed=0,o.anchor.set(.5),o.speed=1+2*Math.random(),o.rotation=2*Math.random()*Math.PI,o.lifetime=5+5*Math.random(),this._particleContainer.addChild(o),this._particleList.push(o)}}},{key:"_addDirt",value:function(e,t){if(this._settings.showDirt)for(var r=0;r<5;r++){var n=Math.floor(3*Math.random()),o=V.Sprite.from("dirt_"+n);o.x=e+4*Math.random()-2,o.y=t+4*Math.random()-2,o.anchor.set(.5),o.speed=0,o.alphaSpeed=.02+.02*Math.random(),o.rotation=0,o.alpha=.1+.4*Math.random(),o.lifetime=25,o.scale.x=o.scale.y=.5+2*Math.random(),this._particleContainer.addChild(o),this._particleList.push(o)}}},{key:"quality",get:function(){return this._settings.quality},set:function(e){this._settings.quality=e}}])&&fr(t.prototype,r),a}(me);function vr(e){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function br(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gr(e,t){return(gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wr(e,t){return!t||"object"!==vr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kr(e){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kr(n);if(o){var r=kr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return wr(this,e)});function a(){return _r(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"renderTank",value:function(e,t){}},{key:"renderBullet",value:function(e,t){}},{key:"loadAssets",value:function(e){e()}},{key:"init",value:function(){}}])&&br(t.prototype,r),a}($);const Or={createSimulation:function(e,t){return e=e||new $(t),new I(e,t)},createAiDefinition:function(){return new j},createUBD:function(){return new A},createRenderer:function(e,t){switch(e){case"debug":return new tt(t);case"bw":return new Mt(t);case"brody":return new mr(t);case"void":return new Sr(t);default:throw"Unknown rederer "+e}}};!function(e){e?e.JsBattle=Or:console.warn("self is not defined")}(window)})()})();
//# sourceMappingURL=jsbattle.min.js.map